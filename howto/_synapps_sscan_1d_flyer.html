

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>synApps sscan as 1D Flyer &#8212; APS Bluesky Training</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'howto/_synapps_sscan_1d_flyer';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Simulate a temperature controller with an EPICS swait record" href="_temperature_controller_swait.html" />
    <link rel="prev" title="synApps busy record" href="_synapps_busy.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">APS Bluesky Training</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../instrument/index.html">
    Instrument
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../example/index.html">
    Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../tutor/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>

            <li class="nav-item dropdown pst-header-nav-item">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class="nav-item ">
  <a class="nav-link dropdown-item nav-internal" href="../changes.html">
    Changes
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../instrument/index.html">
    Instrument
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../example/index.html">
    Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../tutor/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../changes.html">
    Changes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="bluesky_cheat_sheet.html">Bluesky Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="_ad_v_motors.html">Scan Area Detector v. Motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_after_measurement.html">Accessing data later, after the measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="_basic_aps_info.html">APS Accelerator Information for Beamlines</a></li>
<li class="toctree-l1"><a class="reference internal" href="_basic_motor_scaler_scan.html">Minimal: Scan scaler <em>vs</em> motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_bluesky_queueserver.html">First steps with bluesky-queueserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="_count_scaler.html">Count the scaler</a></li>
<li class="toctree-l1"><a class="reference internal" href="_custom_heater_positioner.html">Heater Simulation using synApps epid and transform records</a></li>
<li class="toctree-l1"><a class="reference internal" href="_custom_plan.html">Custom bluesky plan</a></li>

<li class="toctree-l1"><a class="reference internal" href="_doodle.html">Linux Command &amp; Wait for Finish</a></li>
<li class="toctree-l1"><a class="reference internal" href="_dynamic_limits_2motor.html">Dynamic Limits for Two Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="_epics_proc_field.html">Trigger a Device with the EPICS record .PROC field</a></li>
<li class="toctree-l1"><a class="reference internal" href="_images_darks_flats.html">Images, Darks, &amp; whites with EPICS area detector, ophyd, and Bluesky</a></li>
<li class="toctree-l1"><a class="reference internal" href="_lineup_1d_peak.html">Lineup a 1-D peak : scan detector <em>v</em> motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_locate_image_peak.html">Locate peak on 2-D area detector image</a></li>
<li class="toctree-l1"><a class="reference internal" href="_plot_x_y_databroker.html">Plot x, y data from a databroker run</a></li>
<li class="toctree-l1"><a class="reference internal" href="_synapps_busy.html">synApps <em>busy</em> record</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">synApps <em>sscan</em> as 1D Flyer</a></li>
<li class="toctree-l1"><a class="reference internal" href="_temperature_controller_swait.html">Simulate a temperature controller with an EPICS <code class="docutils literal notranslate"><span class="pre">swait</span></code> record</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">How-To Guides</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">synApps...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="synApps-sscan-as-1D-Flyer">
<h1>synApps <em>sscan</em> as 1D Flyer<a class="headerlink" href="#synApps-sscan-as-1D-Flyer" title="Permalink to this heading">#</a></h1>
<p>In this notebook, the EPICS <em>sscan</em> record is demonstrated as a bluesky <em>Flyer</em>. The EPICS sscan record will conduct a scan as configured from bluesky. After the scan, the data will be returned to bluesky for routine inclusion in the run’s documents.</p>
<p>NOTE: This notebook is under construction!</p>
<section id="Overview">
<h2>Overview<a class="headerlink" href="#Overview" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference external" href="https://blueskyproject.io/bluesky">Bluesky</a> framework has support for data acquisition using an external data collector. The support is for an ophyd <em>fly-able</em> device, which must be customized for the details of that external data collector. The design prototype collector is a <em>fly</em> scan controller (hence the name used by bluesky), operating outside the <em>bluesky</em> process, which performs its readings of detector(s) during continuous (<em>on-the-fly</em>) motion of one or more positioners.
Triggering of the detectors must also be part of the external controller. The description is that this type of <a class="reference external" href="https://blueskyproject.io/bluesky/async.html#asynchronous-acquisition">asynchronous acquisition</a> requires fine-grained timing beyond the capabilities of <em>bluesky</em>.</p>
<blockquote>
<div><p>Flying means: “Let the hardware take control, cache data externally, and then transfer all the data to the RunEngine at the end.” This is essential when the data acquisition rates are faster than the RunEngine or Python can go.</p>
</div></blockquote>
<p>Note: As a consequence of the external nature of this <em>Flyer</em> device, the usual activity of the bluesky RunEngine pertaining to interruptions (pause, resume, stop, or abort) may not affect the progress of the external data collector. The RunEngine may only interrupt the external data collector as that collector allows in its interface with bluesky.</p>
<p><em>Any</em> external data acquisition controller or data logger is suitable for use as a bluesky <em>Flyer</em>. It is not necessary for the external controller to conduct its acquisition at high rates.</p>
<p>The EPICS <a class="reference external" href="https://epics.anl.gov/bcda/synApps/sscan/sscanRecord.html">sscan record</a> is an example of an external data acquisition controller. It supports various scan types (step, list, continuous) with flexible configuration for up to four positioners and dozens of detectors, as well as scans of up to four dimensions. The <em>sscan</em> record is used by many APS beamlines for routine data collection.</p>
</section>
<section id="References">
<h2>References<a class="headerlink" href="#References" title="Permalink to this heading">#</a></h2>
<p>The documentation for <em>Flyer</em>s is distributed across the <em>bluesky</em> and <em>ophyd</em> packages:</p>
<ul class="simple">
<li><p>Pre-assembled bluesky plans: <a class="reference external" href="https://blueskyproject.io/bluesky/plans.html#pre-assembled-plans">https://blueskyproject.io/bluesky/plans.html#pre-assembled-plans</a></p></li>
<li><p>bluesky <code class="docutils literal notranslate"><span class="pre">fly()</span></code> plan: <a class="reference external" href="https://blueskyproject.io/bluesky/generated/bluesky.plans.fly.html#bluesky.plans.fly">https://blueskyproject.io/bluesky/generated/bluesky.plans.fly.html#bluesky.plans.fly</a></p></li>
<li><p>asynchronous collection with fly scans: <a class="reference external" href="https://blueskyproject.io/bluesky/plans.html#asynchronous-plans-fly-scans-and-monitoring">https://blueskyproject.io/bluesky/plans.html#asynchronous-plans-fly-scans-and-monitoring</a></p></li>
<li><p>Asynchronous Acquisition:https://blueskyproject.io/bluesky/async.html</p></li>
<li><p>ophyd flyer classes: <a class="reference external" href="https://blueskyproject.io/ophyd/generated/ophyd.flyers.html">https://blueskyproject.io/ophyd/generated/ophyd.flyers.html</a></p></li>
<li><p>ophyd Fly-able Interface (with links to the <code class="docutils literal notranslate"><span class="pre">FlyerInterface()</span></code> methods) : <a class="reference external" href="https://blueskyproject.io/ophyd/architecture.html#fly-able-interface">https://blueskyproject.io/ophyd/architecture.html#fly-able-interface</a> ## 1D step scans using sscan record</p></li>
</ul>
<p>Use the <a class="reference external" href="https://epics.anl.gov/bcda/synApps/sscan/sscanRecord.html">sscan record</a> as an <a class="reference external" href="https://blueskyproject.io/bluesky/async.html">ophyd Flyer</a> for data acquisition with the <a class="reference external" href="https://blueskyproject.io/bluesky">bluesky</a> <a class="reference external" href="https://blueskyproject.io/bluesky/generated/bluesky.plans.fly.html#bluesky.plans.fly">fly</a> plan. Consider the case of <a class="reference external" href="https://epics.anl.gov/bcda/synApps/sscan/sscanRecord.html#HEADING_1-1">1D step scans using sscan record</a>.</p>
<p>Suggest the <em>noisy v m1</em> scan, done as 1-D step scan with <code class="docutils literal notranslate"><span class="pre">sscan</span></code> record, where <code class="docutils literal notranslate"><span class="pre">noisy</span></code> is the <a class="reference external" href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/epics-modules/calc/R3-6-1/documentation/swaitRecord.html">swait</a> record calculating a Lorentzian peak based on <code class="docutils literal notranslate"><span class="pre">m1</span></code> (EPICS <a class="reference external" href="%5B*swait*%5D(https://epics.anl.gov/bcda/synApps/motor/motorRecord.html)">motor</a> record) position.</p>
<p>We’ll build a custom Python class, from <a class="reference external" href="https://apstools.readthedocs.io/en/latest/source/synApps/_sscan.html">apstools.synApps.SscanRecord</a> (a subclass of <a class="reference external" href="https://blueskyproject.io/ophyd/tutorials/device.html#define-a-custom-device">ophyd.Device</a>), that supports the EPICS <a class="reference external" href="https://epics.anl.gov/bcda/synApps/sscan/sscanRecord.html">sscan</a> record and add the <a class="reference external" href="https://blueskyproject.io/ophyd/architecture.html#fly-able-interface">ophyd.FlyerInterface</a> to that class. A class method will
configure the Device staging to setup the sscan record for a 1-D step scan using the <a class="reference external" href="https://github.com/BCDA-APS/bluesky_training/blob/711baca0e4fcdffc97fb4d05ee73d4b5b93fcc3a/bluesky/instrument/devices/motors.py#L25">m1</a> positioner and the <a class="reference external" href="https://github.com/BCDA-APS/bluesky_training/blob/711baca0e4fcdffc97fb4d05ee73d4b5b93fcc3a/bluesky/instrument/devices/noisy_detector.py#L42">noisy</a> detector. <code class="docutils literal notranslate"><span class="pre">noisy</span></code> is implemented as an EPICS
<a class="reference external" href="https://htmlpreview.github.io/?https://raw.githubusercontent.com/epics-modules/calc/R3-6-1/documentation/swaitRecord.html">swait</a> record configured to recalculate a Lorentzian profile when the <code class="docutils literal notranslate"><span class="pre">m1</span></code> readback value changes. The center, width, and height are <a class="reference external" href="https://github.com/BCDA-APS/bluesky_training/blob/711baca0e4fcdffc97fb4d05ee73d4b5b93fcc3a/bluesky/instrument/devices/noisy_detector.py#L24-L38">set randomly</a> as this bluesky instrument package is loaded. The center of the simulated
peak will be defined somewhere between <a class="reference external" href="https://github.com/BCDA-APS/bluesky_training/blob/711baca0e4fcdffc97fb4d05ee73d4b5b93fcc3a/bluesky/instrument/devices/noisy_detector.py#L34">+/- 1</a>.</p>
<section id="Load-the-instrument-package">
<h3>Load the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> package<a class="headerlink" href="#Load-the-instrument-package" title="Permalink to this heading">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> widget

<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">pathlib</span><span class="o">,</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">(),</span> <span class="s2">&quot;bluesky&quot;</span><span class="p">)))</span>
<span class="kn">from</span> <span class="nn">instrument.collection</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/prjemian/bluesky/instrument/_iconfig.py
Activating auto-logging. Current session state plus future input saved.
Filename       : /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/.logs/ipython_console.log
Mode           : rotate
Output logging : True
Raw input log  : False
Timestamping   : True
State          : active
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
I Thu-17:53:40 - ############################################################ startup
I Thu-17:53:40 - logging started
I Thu-17:53:40 - logging level = 10
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/session_logs.py
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/collection.py
I Thu-17:53:40 - CONDA_PREFIX = /home/prjemian/.conda/envs/bluesky_2023_2
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Exception reporting mode: Minimal
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
I Thu-17:53:40 - xmode exception level: &#39;Minimal&#39;
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/mpl/notebook.py
I Thu-17:53:40 - #### Bluesky Framework ####
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/framework/check_python.py
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/framework/check_bluesky.py
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/framework/initialize.py
I Thu-17:53:40 - RunEngine metadata saved in directory: /home/prjemian/Bluesky_RunEngine_md
I Thu-17:53:40 - using databroker catalog &#39;training&#39;
I Thu-17:53:40 - using ophyd control layer: pyepics
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/framework/metadata.py
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/epics_signal_config.py
I Thu-17:53:40 - Using RunEngine metadata for scan_id
I Thu-17:53:40 - #### Devices ####
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/devices/area_detector.py
I Thu-17:53:40 - /home/prjemian/bluesky/instrument/devices/calculation_records.py
I Thu-17:53:43 - /home/prjemian/bluesky/instrument/devices/fourc_diffractometer.py
I Thu-17:53:43 - /home/prjemian/bluesky/instrument/devices/ioc_stats.py
I Thu-17:53:43 - /home/prjemian/bluesky/instrument/devices/kohzu_monochromator.py
I Thu-17:53:43 - /home/prjemian/bluesky/instrument/devices/motors.py
I Thu-17:53:43 - /home/prjemian/bluesky/instrument/devices/noisy_detector.py
I Thu-17:53:43 - /home/prjemian/bluesky/instrument/devices/scaler.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/devices/shutter_simulator.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/devices/simulated_fourc.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/devices/simulated_kappa.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/devices/slits.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/devices/sixc_diffractometer.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/devices/temperature_signal.py
I Thu-17:53:44 - #### Callbacks ####
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/callbacks/spec_data_file_writer.py
I Thu-17:53:44 - #### Plans ####
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/plans/lup_plan.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/plans/peak_finder_example.py
I Thu-17:53:44 - /home/prjemian/bluesky/instrument/utils/image_analysis.py
I Thu-17:53:45 - #### Utilities ####
I Thu-17:53:45 - writing to SPEC file: /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/20230413-175344.dat
I Thu-17:53:45 -    &gt;&gt;&gt;&gt;   Using default SPEC file name   &lt;&lt;&lt;&lt;
I Thu-17:53:45 -    file will be created when bluesky ends its next scan
I Thu-17:53:45 -    to change SPEC file, use command:   newSpecFile(&#39;title&#39;)
I Thu-17:53:45 - #### Startup is complete. ####
</pre></div></div>
</div>
<p>Add this notebook’s name to the RunEngine metadata and define the IOC’s prefix.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="o">.</span><span class="n">md</span><span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;sscan_1d_flyer&quot;</span>
<span class="n">ioc</span> <span class="o">=</span> <span class="s2">&quot;gp:&quot;</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="Bluesky-step-scan">
<h2>Bluesky step scan<a class="headerlink" href="#Bluesky-step-scan" title="Permalink to this heading">#</a></h2>
<p>We are told that the <code class="docutils literal notranslate"><span class="pre">noisy</span></code> signal will show a peak when <code class="docutils literal notranslate"><span class="pre">m1</span></code> is moved over the range <code class="docutils literal notranslate"><span class="pre">[-1</span> <span class="pre">..</span> <span class="pre">+1]</span></code>. Use <em>bluesky</em> to show that peak.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># show a pre-assembled bluesky.plans.scan() acquisition</span>
<span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">noisy</span><span class="p">],</span> <span class="n">m1</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="n">md</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">purpose</span><span class="o">=</span><span class="s2">&quot;demo bluesky scan plan&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 956     Time: 2023-04-13 17:53:45
Persistent Unique Scan ID: &#39;cfa4afcd-bcf0-4c35-ae0d-7f4daa927238&#39;
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+
|   seq_num |       time |         m1 |      noisy |
+-----------+------------+------------+------------+
|         1 | 17:53:46.8 |    -1.1000 | 7442.55055 |
|         2 | 17:53:47.2 |    -0.9900 | 11249.11706 |
|         3 | 17:53:47.6 |    -0.8800 | 18986.60948 |
|         4 | 17:53:48.0 |    -0.7700 | 38984.13377 |
|         5 | 17:53:48.4 |    -0.6600 | 81758.13663 |
|         6 | 17:53:48.8 |    -0.5500 | 90661.67681 |
|         7 | 17:53:49.2 |    -0.4400 | 44616.92674 |
|         8 | 17:53:49.6 |    -0.3300 | 21037.26285 |
|         9 | 17:53:50.0 |    -0.2200 | 12314.44644 |
|        10 | 17:53:50.4 |    -0.1100 | 7477.76738 |
|        11 | 17:53:50.8 |     0.0000 | 5304.05319 |
|        12 | 17:53:51.2 |     0.1100 | 3719.11921 |
|        13 | 17:53:51.6 |     0.2200 | 2812.51654 |
|        14 | 17:53:52.0 |     0.3300 | 2297.41489 |
|        15 | 17:53:52.4 |     0.4400 | 1785.46562 |
|        16 | 17:53:52.8 |     0.5500 | 1508.59485 |
|        17 | 17:53:53.2 |     0.6600 | 1209.38156 |
|        18 | 17:53:53.6 |     0.7700 | 1024.83242 |
|        19 | 17:53:54.0 |     0.8800 |  919.60953 |
|        20 | 17:53:54.4 |     0.9900 |  765.85225 |
|        21 | 17:53:54.8 |     1.1000 |  655.33053 |
+-----------+------------+------------+------------+
generator scan [&#39;cfa4afcd&#39;] (scan num: 956)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;cfa4afcd-bcf0-4c35-ae0d-7f4daa927238&#39;,)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__synapps_sscan_1d_flyer_6_2.png" src="../_images/howto__synapps_sscan_1d_flyer_6_2.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">bec</span><span class="o">.</span><span class="n">peaks</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
&#39;com&#39;:
    {&#39;noisy&#39;: -0.5404925440667286}
,
&#39;cen&#39;:
    {&#39;noisy&#39;: -0.597662063312674}
,
&#39;max&#39;:
    {&#39;noisy&#39;: (-0.55,
               90661.67681062203)}
,
&#39;min&#39;:
    {&#39;noisy&#39;: (1.1,
               655.3305297746574)}
,
&#39;fwhm&#39;:
    {&#39;noisy&#39;: 0.31034751314623277}
,
}
</pre></div></div>
</div>
</section>
<section id="sscan-as-Bluesky-Flyer">
<h2>sscan as Bluesky Flyer<a class="headerlink" href="#sscan-as-Bluesky-Flyer" title="Permalink to this heading">#</a></h2>
<p>Load some structures to be used.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">DeviceStatus</span><span class="p">,</span> <span class="n">Signal</span>
<span class="kn">from</span> <span class="nn">ophyd.flyers</span> <span class="kn">import</span> <span class="n">FlyerInterface</span>
<span class="kn">from</span> <span class="nn">apstools.synApps</span> <span class="kn">import</span> <span class="n">SscanRecord</span>
</pre></div>
</div>
</div>
<details><p>if save data is to be used</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO: if save data is to be used</span>

<span class="c1"># # configure saveData for data collection into MDA files:</span>
<span class="c1"># save_data.stage_sigs[&quot;file_system&quot;] = &quot;/tmp&quot;</span>
<span class="c1"># save_data.stage_sigs[&quot;subdirectory&quot;] = &quot;saveData&quot;</span>
<span class="c1"># save_data.stage_sigs[&quot;base_name&quot;] = &quot;sscan1_&quot;</span>
<span class="c1"># save_data.stage_sigs[&quot;next_scan_number&quot;] = 1</span>
<span class="c1"># save_data.stage_sigs[&quot;comment1&quot;] = &quot;testing&quot;</span>
<span class="c1"># save_data.stage_sigs[&quot;comment2&quot;] = &quot;configured and run from ophyd&quot;</span>
</pre></div>
</div>
</details><p>The <code class="docutils literal notranslate"><span class="pre">setup_staging_1D_step()</span></code> method (below) configures the device’s <code class="docutils literal notranslate"><span class="pre">stage_sigs</span></code> dictionary to configure the sscan record for the 1-D scan. The bluesky RunEngine will only be responsible for configuring the sscan record and telling it to start. Once it has stopped, this device will collect the data from the sscan record’s array fields and <code class="docutils literal notranslate"><span class="pre">yield</span></code> it back to the RunEngine per the Bluesky <a class="reference external" href="https://blueskyproject.io/event-model/">event model</a>.</p>
<ul class="simple">
<li><p>The <em>sscan</em> record will record the time stamp for each point (relative to the scan’s starting time) if the text <code class="docutils literal notranslate"><span class="pre">time</span></code> or <code class="docutils literal notranslate"><span class="pre">TIME</span></code> is used as the readback of one of the positioners. At the expense of providing valuable timestamp information for the Bluesky event model interface, this reduces the number of possible positioners for use by the sscan record to three.</p></li>
<li><p>To record the positioner setpoint value for each point, the motor’s setpoint PV (<code class="docutils literal notranslate"><span class="pre">.VAL</span></code> field) is added as an additional detector.</p></li>
<li><p><em>This</em> scan is preconfigured for the <code class="docutils literal notranslate"><span class="pre">m1</span></code> positioner and the <code class="docutils literal notranslate"><span class="pre">noisy</span></code> detector.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">SscanFlyer_1D_StepSimple</span><span class="p">(</span><span class="n">FlyerInterface</span><span class="p">,</span> <span class="n">SscanRecord</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquiring</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">stage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_channels</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">unstage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">unstage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_channels</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_staging_1D_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="o">=-</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">finish</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">ddelay</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">pdelay</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configure sscan record for 1D step scan: noisy v. m1&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xref</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">positioners</span><span class="o">=</span><span class="p">[</span><span class="n">m1</span><span class="p">,</span> <span class="p">],</span>
            <span class="n">raw_detectors</span><span class="o">=</span><span class="p">[</span><span class="n">noisy</span><span class="p">,</span> <span class="p">],</span>
            <span class="n">detectors</span><span class="o">=</span><span class="p">[</span><span class="n">noisy</span><span class="p">,</span> <span class="n">m1</span><span class="o">.</span><span class="n">user_setpoint</span><span class="p">]</span>  <span class="c1"># include motor setpoints array</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;number_points&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;pasm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;PRIOR POS&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;positioner_delay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pdelay</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xref</span><span class="p">[</span><span class="s2">&quot;positioners&quot;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;positioners.p</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">.setpoint_pv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">user_setpoint</span><span class="o">.</span><span class="n">pvname</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;positioners.p</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">.readback_pv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">user_readback</span><span class="o">.</span><span class="n">pvname</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;positioners.p</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">.start&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">start</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;positioners.p</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">.end&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">finish</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;detector_delay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ddelay</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xref</span><span class="p">[</span><span class="s2">&quot;detectors&quot;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;detectors.d</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">.input_pv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pvname</span>

        <span class="c1"># Get timestamp of each point in the scan.</span>
        <span class="c1"># This is a sscan record feature that returns the time since the scan started.</span>
        <span class="c1"># The time returned is relative to the first point of the scan.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;positioners.p4.readback_pv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;time&quot;</span>  <span class="c1"># or TIME (all upper case)</span>

    <span class="k">def</span> <span class="nf">read_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">describe_configuration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">kickoff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the sscan record.&quot;&quot;&quot;</span>
        <span class="c1"># self.setup_staging_1D_step()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="c1"># set(), do not `yield`, in kickoff()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execute_scan</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># start the sscan record</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquiring</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">status</span> <span class="o">=</span> <span class="n">DeviceStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">status</span><span class="o">.</span><span class="n">set_finished</span><span class="p">()</span>  <span class="c1"># means that kickoff was successful</span>
        <span class="k">return</span> <span class="n">status</span>

    <span class="k">def</span> <span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for sscan to complete.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;complete() starting&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquiring</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Not acquiring&quot;</span><span class="p">)</span>

        <span class="n">st</span> <span class="o">=</span> <span class="n">DeviceStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cb_started</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">def</span> <span class="nf">execute_scan_cb</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Watch ``sscan.EXSC`` for completion.&quot;&quot;&quot;</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cb_started</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;complete() ending&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unstage</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_acquiring</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">execute_scan</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">execute_scan_cb</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">st</span><span class="o">.</span><span class="n">done</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting </span><span class="si">%s</span><span class="s2"> execute status to `done`.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">st</span><span class="o">.</span><span class="n">set_finished</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">execute_scan</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">execute_scan_cb</span><span class="p">)</span>
        <span class="c1"># self.execute_scan.set(1)</span>
        <span class="n">cb_started</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">st</span>

    <span class="k">def</span> <span class="nf">describe_collect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Provide schema &amp; meta-data from collect().</span>

<span class="sd">        https://blueskyproject.io/ophyd/generated/ophyd.flyers.FlyerInterface.describe_collect.html</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dd</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">dd</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">m1</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
        <span class="n">dd</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">noisy</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
        <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">dd</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve all collected data (after complete()).</span>

<span class="sd">        Retrieve data from the flyer as proto-events.</span>
<span class="sd">        https://blueskyproject.io/ophyd/generated/ophyd.flyers.FlyerInterface.collect.html</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquiring</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Acquisition still in progress. Call complete() first.&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">get_data_from_sscan</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Read a sscan array and return as Python list.&quot;&quot;&quot;</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">][:</span><span class="n">n</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">data</span>

        <span class="k">def</span> <span class="nf">mkdoc</span><span class="p">(</span><span class="n">seq_num</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Bundle the dictionary of values into a raw event document.&quot;&quot;&quot;</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;__ts__&quot;</span><span class="p">)</span>
            <span class="k">yield</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="n">seq_num</span><span class="o">=</span><span class="n">seq_num</span><span class="p">,</span>
                <span class="n">time</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
                <span class="n">timestamps</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">timestamp</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">values</span><span class="p">},</span>
            <span class="p">)</span>

        <span class="k">def</span> <span class="nf">read_sscan_data</span><span class="p">(</span><span class="n">scan</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Get the sscan arrays and yield as discrete events.&quot;&quot;&quot;</span>
            <span class="n">_cp</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="n">current_point</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="n">scan</span><span class="o">.</span><span class="n">current_point</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">_cp</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
            <span class="n">ts_last_point</span> <span class="o">=</span> <span class="n">_cp</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span>

            <span class="c1"># get the per-step time stamps from positioner 4</span>
            <span class="n">ts_arr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">positioners</span><span class="o">.</span><span class="n">p4</span><span class="o">.</span><span class="n">array</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">use_monitor</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="n">n</span><span class="p">]</span>
            <span class="n">ts_arr</span> <span class="o">=</span> <span class="n">ts_last_point</span> <span class="o">+</span> <span class="n">ts_arr</span> <span class="o">-</span> <span class="n">ts_arr</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

            <span class="n">results</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">__ts__</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">ts_arr</span><span class="p">))</span>  <span class="c1"># __ts__ holds the timestamps, per point</span>

            <span class="c1"># This gets the full array for each item in one document</span>
            <span class="k">for</span> <span class="n">category</span><span class="p">,</span> <span class="n">signals</span> <span class="ow">in</span> <span class="n">scan</span><span class="o">.</span><span class="n">xref</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">signal</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">signals</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;positioners&quot;</span><span class="p">:</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;p</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;detectors&quot;</span><span class="p">:</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;d</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="s2">02d</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">get_data_from_sscan</span><span class="p">(</span>
                        <span class="nb">getattr</span><span class="p">(</span><span class="n">scan</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">.array&quot;</span><span class="p">),</span> <span class="n">n</span>
                    <span class="p">)</span>
                    <span class="n">results</span><span class="p">[</span><span class="n">signal</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

            <span class="c1"># yield all results one complete step at a time</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">yield from</span> <span class="n">mkdoc</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">results</span><span class="p">})</span>

        <span class="k">yield from</span> <span class="n">read_sscan_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unstage</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flyer</span> <span class="o">=</span> <span class="n">SscanFlyer_1D_StepSimple</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ioc</span><span class="si">}</span><span class="s2">scan1&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;flyer&quot;</span><span class="p">)</span>
<span class="n">flyer</span><span class="o">.</span><span class="n">wait_for_connection</span><span class="p">()</span>  <span class="c1"># sscan records have _many_ channels and fields</span>
<span class="n">flyer</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>  <span class="c1"># clear out any previous configuration</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flyer</span><span class="o">.</span><span class="n">setup_staging_1D_step</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">71</span><span class="p">)</span>

<span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">fly</span><span class="p">([</span><span class="n">flyer</span><span class="p">],</span> <span class="n">md</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">purpose</span><span class="o">=</span><span class="s2">&quot;demo bluesky fly plan with sscan record and 1-D step scan&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 957     Time: 2023-04-13 17:53:56
Persistent Unique Scan ID: &#39;1802af12-916d-447d-82e7-f9d79e43e5fa&#39;
New stream: &#39;label_start_motor&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
I Thu-17:53:57 - complete() starting
I Thu-17:54:13 - complete() ending
I Thu-17:54:13 - Setting flyer execute status to `done`.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;flyer&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/prjemian/.conda/envs/bluesky_2023_2/lib/python3.10/site-packages/event_model/__init__.py:224: UserWarning: The document type &#39;bulk_events&#39; has been deprecated in favor of &#39;event_page&#39;, whose structure is a transpose of &#39;bulk_events&#39;.
  warnings.warn(
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;1802af12-916d-447d-82e7-f9d79e43e5fa&#39;,)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">run</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">flyer</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;m1_user_setpoint&quot;</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;noisy&quot;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;scan_id=</span><span class="si">{</span><span class="n">run</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">][</span><span class="s1">&#39;scan_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;noisy&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__synapps_sscan_1d_flyer_15_1.png" src="../_images/howto__synapps_sscan_1d_flyer_15_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:           (time: 71)
Coordinates:
  * time              (time) float64 1.681e+09 1.681e+09 ... 1.681e+09 1.681e+09
Data variables:
    m1                (time) float64 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0 0.0
    m1_user_setpoint  (time) float64 -1.1 -1.069 -1.037 ... 1.037 1.069 1.1
    noisy             (time) float64 7.078e+03 8.256e+03 ... 682.6 679.9</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-47ab69cf-585c-4e7a-85ed-07b80efce943' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-47ab69cf-585c-4e7a-85ed-07b80efce943' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 71</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-df625a13-6ed1-4f3a-8bf0-9d55d96ef95a' class='xr-section-summary-in' type='checkbox'  checked><label for='section-df625a13-6ed1-4f3a-8bf0-9d55d96ef95a' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.681e+09 1.681e+09 ... 1.681e+09</div><input id='attrs-cd522d24-101e-4681-89f9-64329f862cae' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cd522d24-101e-4681-89f9-64329f862cae' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-11e766c9-e446-4b24-a98f-8e3592e65710' class='xr-var-data-in' type='checkbox'><label for='data-11e766c9-e446-4b24-a98f-8e3592e65710' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09, 1.681426e+09,
       1.681426e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b967333d-117c-4e77-a58a-5bb05e536d64' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b967333d-117c-4e77-a58a-5bb05e536d64' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>m1</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id='attrs-333fb38e-f842-495c-9018-1bdf3863f4d8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-333fb38e-f842-495c-9018-1bdf3863f4d8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c47c9a97-5a5e-48cf-a493-31063b2d9358' class='xr-var-data-in' type='checkbox'><label for='data-c47c9a97-5a5e-48cf-a493-31063b2d9358' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>flyer</dd></dl></div><div class='xr-var-data'><pre>array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.1 -1.069 -1.037 ... 1.069 1.1</div><input id='attrs-f1a25289-9690-45ac-82db-a5e827c5a838' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f1a25289-9690-45ac-82db-a5e827c5a838' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-130f624e-4b54-4935-9b9b-4fbbbd583200' class='xr-var-data-in' type='checkbox'><label for='data-130f624e-4b54-4935-9b9b-4fbbbd583200' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>flyer</dd></dl></div><div class='xr-var-data'><pre>array([-1.10000002e+00, -1.06857145e+00, -1.03714287e+00, -1.00571430e+00,
       -9.74285722e-01, -9.42857146e-01, -9.11428571e-01, -8.79999995e-01,
       -8.48571420e-01, -8.17142844e-01, -7.85714269e-01, -7.54285693e-01,
       -7.22857118e-01, -6.91428542e-01, -6.60000026e-01, -6.28571451e-01,
       -5.97142875e-01, -5.65714300e-01, -5.34285724e-01, -5.02857149e-01,
       -4.71428573e-01, -4.39999998e-01, -4.08571422e-01, -3.77142847e-01,
       -3.45714271e-01, -3.14285725e-01, -2.82857150e-01, -2.51428574e-01,
       -2.19999999e-01, -1.88571423e-01, -1.57142863e-01, -1.25714287e-01,
       -9.42857116e-02, -6.28571436e-02, -3.14285718e-02,  2.77555756e-16,
        3.14285718e-02,  6.28571436e-02,  9.42857116e-02,  1.25714287e-01,
        1.57142863e-01,  1.88571423e-01,  2.19999999e-01,  2.51428574e-01,
        2.82857150e-01,  3.14285725e-01,  3.45714271e-01,  3.77142847e-01,
        4.08571422e-01,  4.39999998e-01,  4.71428573e-01,  5.02857149e-01,
        5.34285724e-01,  5.65714300e-01,  5.97142875e-01,  6.28571451e-01,
        6.60000026e-01,  6.91428542e-01,  7.22857118e-01,  7.54285693e-01,
        7.85714269e-01,  8.17142844e-01,  8.48571420e-01,  8.79999995e-01,
        9.11428571e-01,  9.42857146e-01,  9.74285722e-01,  1.00571430e+00,
        1.03714287e+00,  1.06857145e+00,  1.10000002e+00])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>noisy</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>7.078e+03 8.256e+03 ... 682.6 679.9</div><input id='attrs-9543d0bc-2d69-428c-bcd2-863d3d1e8bef' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9543d0bc-2d69-428c-bcd2-863d3d1e8bef' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-70d29f4c-112e-4c38-829c-68d39cf06f9a' class='xr-var-data-in' type='checkbox'><label for='data-70d29f4c-112e-4c38-829c-68d39cf06f9a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>flyer</dd></dl></div><div class='xr-var-data'><pre>array([ 7077.84179688,  8256.04101562,  9391.16992188, 10182.45800781,
       11795.86425781, 14324.32617188, 16429.0546875 , 19254.88867188,
       22473.13867188, 29589.9453125 , 36168.19140625, 41031.36328125,
       53437.44921875, 69339.1328125 , 83533.0859375 , 90117.5078125 ,
       97632.828125  , 95162.078125  , 79415.765625  , 66389.9375    ,
       55833.28515625, 44964.9140625 , 34566.1484375 , 29006.93359375,
       23739.30664062, 19152.75195312, 17039.00585938, 14534.1484375 ,
       12179.19921875, 10625.77050781,  9509.53515625,  8264.56445312,
        6979.27490234,  6611.82470703,  5808.01806641,  5118.90966797,
        4898.13378906,  4270.76269531,  4085.27758789,  3620.88867188,
        3362.80493164,  3178.1706543 ,  2834.04248047,  2753.21044922,
        2537.26098633,  2369.05371094,  2162.23876953,  2128.70996094,
        1876.00280762,  1790.31689453,  1641.77575684,  1628.88378906,
        1506.86645508,  1430.4498291 ,  1335.33874512,  1338.12731934,
        1257.72106934,  1179.83325195,  1163.1697998 ,  1085.78637695,
        1045.90039062,   954.47723389,   906.4005127 ,   900.01818848,
         854.19433594,   839.04016113,   796.84051514,   777.57910156,
         718.6895752 ,   682.56268311,   679.94793701])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6877e3b7-0a1a-4e75-9a2b-7fa75457f30b' class='xr-section-summary-in' type='checkbox'  ><label for='section-6877e3b7-0a1a-4e75-9a2b-7fa75457f30b' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-2c263c84-8435-4019-a3b2-611d8b56accd' class='xr-index-data-in' type='checkbox'/><label for='index-2c263c84-8435-4019-a3b2-611d8b56accd' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Float64Index([ 1681426423.185802,  1681426423.386485, 1681426423.5872688,
              1681426423.7878444,  1681426423.988158, 1681426424.1885955,
              1681426424.3893147,  1681426424.589881, 1681426424.7902563,
              1681426424.9907222, 1681426425.1916142, 1681426425.3920424,
              1681426425.5927587, 1681426425.7934234, 1681426425.9938369,
              1681426426.1942747, 1681426426.3947666, 1681426426.5957365,
               1681426426.796384,  1681426426.997107, 1681426427.1975274,
              1681426427.3981833,   1681426427.59868, 1681426427.7993827,
              1681426427.9998853, 1681426428.2008295, 1681426428.4011004,
              1681426428.6017504, 1681426428.8019602, 1681426429.0024836,
              1681426429.2028952, 1681426429.4033031, 1681426429.6038167,
              1681426429.8046145,  1681426430.005246, 1681426430.2056568,
              1681426430.4058123, 1681426430.6063888, 1681426430.8068073,
              1681426431.0075002,  1681426431.208172, 1681426431.4090161,
              1681426431.6094117, 1681426431.8098512, 1681426432.0105221,
              1681426432.2111142,  1681426432.411606, 1681426432.6122499,
              1681426432.8131726, 1681426433.0134423, 1681426433.2140405,
              1681426433.4145398, 1681426433.6153214, 1681426433.8160033,
              1681426434.0163238, 1681426434.2168136, 1681426434.4176753,
              1681426434.6181073,  1681426434.818704, 1681426435.0191557,
              1681426435.2195194, 1681426435.4204297,  1681426435.620859,
               1681426435.821481, 1681426436.0220587, 1681426436.2225082,
               1681426436.423112, 1681426436.6240609, 1681426436.8241818,
              1681426437.0248067,  1681426437.225558],
             dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-294997b4-f43f-4c85-bd9a-338af63b77ad' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-294997b4-f43f-4c85-bd9a-338af63b77ad' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># compute the centroid and sigma from first and second moments of y(x):</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;centroid: </span><span class="si">{</span><span class="p">((</span><span class="n">y</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">y</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sigma: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">y</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">y</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
centroid: -0.5366484118894111
sigma: 0.6149932116936468
</pre></div></div>
</div>
</section>
<section id="id1">
<h2>References<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p>The documentation for <em>Flyer</em>s is distributed across the <em>bluesky</em> and <em>ophyd</em> packages:</p>
<ul class="simple">
<li><p>Pre-assembled bluesky plans: <a class="reference external" href="https://blueskyproject.io/bluesky/plans.html#pre-assembled-plans">https://blueskyproject.io/bluesky/plans.html#pre-assembled-plans</a></p></li>
<li><p>bluesky <code class="docutils literal notranslate"><span class="pre">fly()</span></code> plan: <a class="reference external" href="https://blueskyproject.io/bluesky/generated/bluesky.plans.fly.html#bluesky.plans.fly">https://blueskyproject.io/bluesky/generated/bluesky.plans.fly.html#bluesky.plans.fly</a></p></li>
<li><p>asynchronous collection with fly scans: <a class="reference external" href="https://blueskyproject.io/bluesky/plans.html#asynchronous-plans-fly-scans-and-monitoring">https://blueskyproject.io/bluesky/plans.html#asynchronous-plans-fly-scans-and-monitoring</a></p></li>
<li><p>Asynchronous Acquisition:https://blueskyproject.io/bluesky/async.html</p></li>
<li><p>ophyd flyer classes: <a class="reference external" href="https://blueskyproject.io/ophyd/generated/ophyd.flyers.html">https://blueskyproject.io/ophyd/generated/ophyd.flyers.html</a></p></li>
<li><p>ophyd Fly-able Interface (with links to the <code class="docutils literal notranslate"><span class="pre">FlyerInterface()</span></code> methods) : <a class="reference external" href="https://blueskyproject.io/ophyd/architecture.html#fly-able-interface">https://blueskyproject.io/ophyd/architecture.html#fly-able-interface</a></p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="_synapps_busy.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">synApps <em>busy</em> record</p>
      </div>
    </a>
    <a class="right-next"
       href="_temperature_controller_swait.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Simulate a temperature controller with an EPICS <code class="docutils literal notranslate"><span class="pre">swait</span></code> record</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#References">References</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Load-the-instrument-package">Load the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> package</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Bluesky-step-scan">Bluesky step scan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sscan-as-Bluesky-Flyer">sscan as Bluesky Flyer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">References</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/howto/_synapps_sscan_1d_flyer.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, APS BCDA.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>