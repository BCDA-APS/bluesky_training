

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Scan Area Detector v. Motor &#8212; APS Bluesky Training</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'howto/_ad_v_motors';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Accessing data later, after the measurement" href="_after_measurement.html" />
    <link rel="prev" title="Bluesky Cheat Sheet" href="bluesky_cheat_sheet.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">APS Bluesky Training</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../instrument/index.html">
    Instrument
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../example/index.html">
    Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../tutor/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>

            <li class="nav-item dropdown pst-header-nav-item">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class="nav-item ">
  <a class="nav-link dropdown-item nav-internal" href="../changes.html">
    Changes
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../instrument/index.html">
    Instrument
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../example/index.html">
    Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../tutor/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../changes.html">
    Changes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="bluesky_cheat_sheet.html">Bluesky Cheat Sheet</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Scan Area Detector v. Motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_after_measurement.html">Accessing data later, after the measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="_basic_aps_info.html">APS Accelerator Information for Beamlines</a></li>
<li class="toctree-l1"><a class="reference internal" href="_basic_motor_scaler_scan.html">Minimal: Scan scaler <em>vs</em> motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_bluesky_queueserver.html">First steps with bluesky-queueserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="_count_scaler.html">Count the scaler</a></li>
<li class="toctree-l1"><a class="reference internal" href="_custom_heater_positioner.html">Heater Simulation using synApps epid and transform records</a></li>
<li class="toctree-l1"><a class="reference internal" href="_custom_plan.html">Custom bluesky plan</a></li>

<li class="toctree-l1"><a class="reference internal" href="_doodle.html">Linux Command &amp; Wait for Finish</a></li>
<li class="toctree-l1"><a class="reference internal" href="_dynamic_limits_2motor.html">Dynamic Limits for Two Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="_epics_proc_field.html">Trigger a Device with the EPICS record .PROC field</a></li>
<li class="toctree-l1"><a class="reference internal" href="_images_darks_flats.html">Images, Darks, &amp; whites with EPICS area detector, ophyd, and Bluesky</a></li>
<li class="toctree-l1"><a class="reference internal" href="_lineup_1d_peak.html">Lineup a 1-D peak : scan detector <em>v</em> motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_locate_image_peak.html">Locate peak on 2-D area detector image</a></li>
<li class="toctree-l1"><a class="reference internal" href="_plot_x_y_databroker.html">Plot x, y data from a databroker run</a></li>
<li class="toctree-l1"><a class="reference internal" href="_synapps_busy.html">synApps <em>busy</em> record</a></li>
<li class="toctree-l1"><a class="reference internal" href="_synapps_sscan_1d_flyer.html">synApps <em>sscan</em> as 1D Flyer</a></li>
<li class="toctree-l1"><a class="reference internal" href="_temperature_controller_swait.html">Simulate a temperature controller with an EPICS <code class="docutils literal notranslate"><span class="pre">swait</span></code> record</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">How-To Guides</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Scan Area...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Scan-Area-Detector-v.-Motor">
<h1>Scan Area Detector v. Motor<a class="headerlink" href="#Scan-Area-Detector-v.-Motor" title="Permalink to this heading">#</a></h1>
<h3><p>Goals</p>
</h3><ul class="simple">
<li><p>☒ <strong>Use EPICS motor(s):</strong></p>
<ul>
<li><p>☒ Record current value (readback)</p></li>
<li><p>☒ Record commanded value (setpoint)</p></li>
</ul>
</li>
<li><p>☒ <strong>Use EPICS area detector:</strong></p>
<ul>
<li><p>☒ For each image</p>
<ul>
<li><p>☒ Write image to HDF5 file</p></li>
<li><p>☒ Measure total counts in image</p></li>
<li><p>☒ Measure maximum counts in image</p></li>
<li><p>☒ Note the image’s “unique ID”</p></li>
</ul>
</li>
</ul>
</li>
<li><p>☒ <strong>Step scan motor and collect :math:`n` image frame(s) at each step:</strong></p>
<ul>
<li><p>☒ Plan: count, just collect image(s)</p></li>
<li><p>☒ Plan: scan with one motor</p></li>
<li><p>☒ Plan: scan with two motors</p></li>
<li><p>☒ Plan: grid_scan with two motors</p></li>
</ul>
</li>
<li><p>☒ <strong>Collect data in a SPEC data file.</strong></p></li>
</ul>
<section id="Start-the-instrument-package">
<h2>Start the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> package<a class="headerlink" href="#Start-the-instrument-package" title="Permalink to this heading">#</a></h2>
<p>Our instrument package is in the <code class="docutils literal notranslate"><span class="pre">bluesky</span></code> subdirectory, so we add that to the search path before importing it.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pathlib</span><span class="o">,</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">()</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;bluesky&quot;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">instrument.collection</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/prjemian/bluesky/instrument/_iconfig.py
Activating auto-logging. Current session state plus future input saved.
Filename       : /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/.logs/ipython_console.log
Mode           : rotate
Output logging : True
Raw input log  : False
Timestamping   : True
State          : active
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
I Fri-18:38:11 - ############################################################ startup
I Fri-18:38:11 - logging started
I Fri-18:38:11 - logging level = 10
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/session_logs.py
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/collection.py
I Fri-18:38:11 - CONDA_PREFIX = /home/prjemian/.conda/envs/bluesky_2024_2
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Exception reporting mode: Minimal
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
I Fri-18:38:11 - xmode exception level: &#39;Minimal&#39;
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/mpl/notebook.py
I Fri-18:38:11 - #### Bluesky Framework ####
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/framework/check_python.py
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/framework/check_bluesky.py
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/framework/initialize.py
I Fri-18:38:11 - RunEngine metadata saved in directory: /home/prjemian/.config/Bluesky_RunEngine_md
I Fri-18:38:11 - using databroker catalog &#39;training&#39;
I Fri-18:38:11 - using ophyd control layer: pyepics
I Fri-18:38:11 - Using EPICS PV gp:gp:int20 for scan_id
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/framework/metadata.py
I Fri-18:38:11 - #### Devices ####
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/devices/area_detector.py
I Fri-18:38:11 - /home/prjemian/bluesky/instrument/devices/calculation_records.py
I Fri-18:38:18 - /home/prjemian/bluesky/instrument/devices/fourc_diffractometer.py
I Fri-18:38:18 - /home/prjemian/bluesky/instrument/devices/ioc_stats.py
I Fri-18:38:18 - /home/prjemian/bluesky/instrument/devices/kohzu_monochromator.py
I Fri-18:38:18 - /home/prjemian/bluesky/instrument/devices/motors.py
I Fri-18:38:19 - /home/prjemian/bluesky/instrument/devices/noisy_detector.py
I Fri-18:38:20 - /home/prjemian/bluesky/instrument/devices/scaler.py
I Fri-18:38:21 - /home/prjemian/bluesky/instrument/devices/shutter_simulator.py
I Fri-18:38:21 - /home/prjemian/bluesky/instrument/devices/simulated_fourc.py
I Fri-18:38:21 - /home/prjemian/bluesky/instrument/devices/simulated_kappa.py
I Fri-18:38:21 - /home/prjemian/bluesky/instrument/devices/slits.py
I Fri-18:38:21 - /home/prjemian/bluesky/instrument/devices/sixc_diffractometer.py
I Fri-18:38:21 - /home/prjemian/bluesky/instrument/devices/temperature_signal.py
I Fri-18:38:22 - #### Callbacks ####
I Fri-18:38:22 - /home/prjemian/bluesky/instrument/callbacks/spec_data_file_writer.py
I Fri-18:38:22 - #### Plans ####
I Fri-18:38:22 - /home/prjemian/bluesky/instrument/plans/lup_plan.py
I Fri-18:38:22 - /home/prjemian/bluesky/instrument/plans/peak_finder_example.py
I Fri-18:38:22 - /home/prjemian/bluesky/instrument/utils/image_analysis.py
I Fri-18:38:22 - /home/prjemian/bluesky/instrument/plans/randomize_noisy_peak_plan.py
I Fri-18:38:22 - #### Utilities ####
I Fri-18:38:22 - writing to SPEC file: /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/20240614-183822.dat
I Fri-18:38:22 -    &gt;&gt;&gt;&gt;   Using default SPEC file name   &lt;&lt;&lt;&lt;
I Fri-18:38:22 -    file will be created when bluesky ends its next scan
I Fri-18:38:22 -    to change SPEC file, use command:   newSpecFile(&#39;title&#39;)
I Fri-18:38:22 - #### Startup is complete. ####
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Create a custom area detector class</strong> with our own IOC prefix, add ROI and STATS plugins, and connect with local directories:</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">apstools.devices</span> <span class="kn">import</span> <span class="n">SingleTrigger_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector</span> <span class="kn">import</span> <span class="n">ADComponent</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector</span> <span class="kn">import</span> <span class="n">DetectorBase</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">ImagePlugin_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">PvaPlugin_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">ROIPlugin_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">StatsPlugin_V34</span>
<span class="kn">import</span> <span class="nn">hdf5plugin</span>  <span class="c1"># needed to read LZ4-compressed image from HDF5 file</span>

<span class="kn">from</span> <span class="nn">instrument.devices.area_detector</span> <span class="kn">import</span> <span class="n">MyHDF5Plugin</span>
<span class="kn">from</span> <span class="nn">instrument.devices.area_detector</span> <span class="kn">import</span> <span class="n">SimDetectorCam_V34</span>

<span class="c1"># for my IOC, these parameters apply:</span>
<span class="n">AD_IOC</span> <span class="o">=</span> <span class="s2">&quot;kad:&quot;</span>
<span class="n">FILE_BASE_IOC</span> <span class="o">=</span> <span class="s2">&quot;/tmp/&quot;</span>
<span class="n">FILE_BASE_BLUESKY</span> <span class="o">=</span> <span class="s2">&quot;/mnt/iockad/tmp/&quot;</span>

<span class="k">class</span> <span class="nc">SimDetector_V34</span><span class="p">(</span><span class="n">SingleTrigger_V34</span><span class="p">,</span> <span class="n">DetectorBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ADSimDetector</span>

<span class="sd">    SingleTrigger:</span>

<span class="sd">    * stop any current acquisition</span>
<span class="sd">    * sets image_mode to &#39;Multiple&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cam</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">SimDetectorCam_V34</span><span class="p">,</span> <span class="s2">&quot;cam1:&quot;</span><span class="p">)</span>
    <span class="n">hdf1</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span>
        <span class="n">MyHDF5Plugin</span><span class="p">,</span>
        <span class="s2">&quot;HDF1:&quot;</span><span class="p">,</span>
        <span class="n">write_path_template</span><span class="o">=</span><span class="n">FILE_BASE_IOC</span><span class="p">,</span>
        <span class="n">read_path_template</span><span class="o">=</span><span class="n">FILE_BASE_BLUESKY</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">ImagePlugin_V34</span><span class="p">,</span> <span class="s2">&quot;image1:&quot;</span><span class="p">)</span>
    <span class="n">pva</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">PvaPlugin_V34</span><span class="p">,</span> <span class="s2">&quot;Pva1:&quot;</span><span class="p">)</span>
    <span class="n">roi1</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">ROIPlugin_V34</span><span class="p">,</span> <span class="s2">&quot;ROI1:&quot;</span><span class="p">)</span>
    <span class="n">stats1</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">StatsPlugin_V34</span><span class="p">,</span> <span class="s2">&quot;Stats1:&quot;</span><span class="p">)</span>

<span class="n">simdet</span> <span class="o">=</span> <span class="n">SimDetector_V34</span><span class="p">(</span><span class="n">AD_IOC</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;simdet&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Setup-&amp;-connect-with-EPICS">
<h2>Setup &amp; connect with EPICS<a class="headerlink" href="#Setup-&-connect-with-EPICS" title="Permalink to this heading">#</a></h2>
<p>Search the ophyd object registry (<code class="docutils literal notranslate"><span class="pre">oregistry</span></code>) for the detector and motors. Verify that each is connected to EPICS.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">nm</span> <span class="ow">in</span> <span class="s2">&quot;simdet m1 m2&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">oregistry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">nm</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">connected</span><span class="si">=!r}</span><span class="s2"> </span><span class="si">{</span><span class="n">nm</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
obj.connected=True &#39;simdet&#39;
obj.connected=True &#39;m1&#39;
obj.connected=True &#39;m2&#39;
</pre></div></div>
</div>
<p><strong>Configure the area detector</strong> to:</p>
<ul class="simple">
<li><p>Collect <span class="math notranslate nohighlight">\(n\)</span> image frame(s) for each press of the <em>Acquire</em> button.</p></li>
<li><p>Save image(s) to HDF5.</p></li>
<li><p>Record total counts in the image.</p></li>
<li><p>Record maximum counts in the image.</p></li>
<li><p>Record the unique ID of the image.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ad_setup</span><span class="p">(</span><span class="n">det</span><span class="p">):</span>
    <span class="n">det</span><span class="o">.</span><span class="n">wait_for_connection</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">roi1</span><span class="o">.</span><span class="n">nd_array_port</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;SIM1&quot;</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">nd_array_port</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;ROI1&quot;</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">missing_plugins</span><span class="p">()</span>

    <span class="n">det</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;num_images&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">create_directory</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;compression&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;LZ4&quot;</span>

    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">max_value</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">total</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">unique_id</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>

    <span class="n">det</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;wait_for_plugins&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Yes&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;blocking_callbacks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;No&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;blocking_callbacks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;No&quot;</span>

<span class="n">ad_setup</span><span class="p">(</span><span class="n">simdet</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Diagnostics-(optional)">
<h2>Diagnostics (optional)<a class="headerlink" href="#Diagnostics-(optional)" title="Permalink to this heading">#</a></h2>
<p>These steps are optional.</p>
<p>Show the data from area detector <code class="docutils literal notranslate"><span class="pre">simdet</span></code>. This is the data collected by the <code class="docutils literal notranslate"><span class="pre">RE</span></code> during a run..</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simdet</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;simdet_stats1_unique_id&#39;,
              {&#39;value&#39;: 152753, &#39;timestamp&#39;: 1718396497.409682}),
             (&#39;simdet_stats1_max_value&#39;,
              {&#39;value&#39;: 163.0, &#39;timestamp&#39;: 1718396497.409703}),
             (&#39;simdet_stats1_total&#39;,
              {&#39;value&#39;: 11535831.0, &#39;timestamp&#39;: 1718408302.7033188})])
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Show how</strong> <code class="docutils literal notranslate"><span class="pre">simdet</span></code> is configured to collect <span class="math notranslate nohighlight">\(n\)</span> frames per point.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image frames per point:&quot;</span><span class="p">,</span> <span class="n">simdet</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;num_images&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Image frames per point: 3
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Show the staging configuration</strong> for <code class="docutils literal notranslate"><span class="pre">simdet</span></code>.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.cam&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.hdf1&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.roi1&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">roi1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.stats1&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;simdet&#39;: OrderedDict([(&#39;cam.acquire&#39;, 0), (&#39;cam.image_mode&#39;, 1)])}
{&#39;simdet.cam&#39;: OrderedDict([(&#39;num_images&#39;, 3), (&#39;wait_for_plugins&#39;, &#39;Yes&#39;)])}
{&#39;simdet.hdf1&#39;: OrderedDict([(&#39;enable&#39;, 1),
                             (&#39;blocking_callbacks&#39;, &#39;No&#39;),
                             (&#39;parent.cam.array_callbacks&#39;, 1),
                             (&#39;create_directory&#39;, -3),
                             (&#39;auto_increment&#39;, &#39;Yes&#39;),
                             (&#39;array_counter&#39;, 0),
                             (&#39;auto_save&#39;, &#39;Yes&#39;),
                             (&#39;num_capture&#39;, 0),
                             (&#39;file_template&#39;, &#39;%s%s_%6.6d.h5&#39;),
                             (&#39;file_write_mode&#39;, &#39;Stream&#39;),
                             (&#39;capture&#39;, 1),
                             (&#39;compression&#39;, &#39;LZ4&#39;)])}
{&#39;simdet.roi1&#39;: OrderedDict([(&#39;enable&#39;, 1),
                             (&#39;blocking_callbacks&#39;, &#39;Yes&#39;),
                             (&#39;parent.cam.array_callbacks&#39;, 1)])}
{&#39;simdet.stats1&#39;: OrderedDict([(&#39;enable&#39;, 1),
                               (&#39;blocking_callbacks&#39;, &#39;Yes&#39;),
                               (&#39;parent.cam.array_callbacks&#39;, 1)])}
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Show how the area detector ports are connected</strong> in a diagram.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simdet</span><span class="o">.</span><span class="n">visualize_asyn_digraph</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_16_0.png" src="../_images/howto__ad_v_motors_16_0.png" />
</div>
</div>
<section id="Read-the-Stats-plugin-signals">
<h3>Read the Stats plugin signals<a class="headerlink" href="#Read-the-Stats-plugin-signals" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>The plan below reads the signals from <code class="docutils literal notranslate"><span class="pre">simdet.stats1</span></code> multiple times. Since <code class="docutils literal notranslate"><span class="pre">simdet</span></code> itself is not included in the list of detectors, it will not be triggered (and thus will not produce new images). One can notice that the <code class="docutils literal notranslate"><span class="pre">unique_id</span></code> does not change. For clarity, the command is split into multiple lines.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="p">(</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">count</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">unique_id</span><span class="p">,</span>
            <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">max_value</span>
            <span class="p">],</span>
        <span class="n">num</span><span class="o">=</span><span class="mi">5</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 87     Time: 2024-06-14 18:38:23
Persistent Unique Scan ID: &#39;24737a37-74a2-4b19-b06f-3df3902f0ea0&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+-------------------------+-------------------------+---------------------+
|         1 | 18:38:24.1 |                  152753 |                     163 |            11535831 |
|         2 | 18:38:24.5 |                  152753 |                     163 |            11535831 |
|         3 | 18:38:24.9 |                  152753 |                     163 |            11535831 |
|         4 | 18:38:25.3 |                  152753 |                     163 |            11535831 |
|         5 | 18:38:25.6 |                  152753 |                     163 |            11535831 |
+-----------+------------+-------------------------+-------------------------+---------------------+
generator count [&#39;24737a37&#39;] (scan num: 87)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;24737a37-74a2-4b19-b06f-3df3902f0ea0&#39;,)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_18_4.png" src="../_images/howto__ad_v_motors_18_4.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assume our run is the most recent one in the catalog</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">run</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Read the primary data from the most recent run</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
run=&lt;BlueskyRun uid=&#39;24737a37-74a2-4b19-b06f-3df3902f0ea0&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/prjemian/.conda/envs/bluesky_2024_2/lib/python3.11/site-packages/databroker/intake_xarray_core/base.py:23: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 160B
Dimensions:                  (time: 5)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Data variables:
    simdet_stats1_unique_id  (time) int64 40B 152753 152753 152753 152753 152753
    simdet_stats1_max_value  (time) float64 40B 163.0 163.0 163.0 163.0 163.0
    simdet_stats1_total      (time) float64 40B 1.154e+07 ... 1.154e+07</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-48e407ac-7b44-4cb6-be32-cfa85b461aa7' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-48e407ac-7b44-4cb6-be32-cfa85b461aa7' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-3b69ff35-aacc-40ec-92f6-c9dc810d3c3a' class='xr-section-summary-in' type='checkbox'  checked><label for='section-3b69ff35-aacc-40ec-92f6-c9dc810d3c3a' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-0f4f3fea-ae73-4c8a-8106-1d1a4716396a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0f4f3fea-ae73-4c8a-8106-1d1a4716396a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d5c98f20-79dc-49cb-a911-745d8ba42350' class='xr-var-data-in' type='checkbox'><label for='data-d5c98f20-79dc-49cb-a911-745d8ba42350' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-96fece54-f407-471a-94d3-55941b6d22be' class='xr-section-summary-in' type='checkbox'  checked><label for='section-96fece54-f407-471a-94d3-55941b6d22be' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152753 152753 152753 152753 152753</div><input id='attrs-a21345d3-f451-4586-9f5b-35a33d645518' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a21345d3-f451-4586-9f5b-35a33d645518' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-50d3ae7c-5a3b-4987-9579-3be5d703d77c' class='xr-var-data-in' type='checkbox'><label for='data-50d3ae7c-5a3b-4987-9579-3be5d703d77c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet_stats1_unique_id</dd></dl></div><div class='xr-var-data'><pre>array([152753, 152753, 152753, 152753, 152753])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>163.0 163.0 163.0 163.0 163.0</div><input id='attrs-e219b714-6f71-4b00-aa3a-e30a797186c6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e219b714-6f71-4b00-aa3a-e30a797186c6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-05aeeb18-1a28-40f9-beb7-93f5f717d527' class='xr-var-data-in' type='checkbox'><label for='data-05aeeb18-1a28-40f9-beb7-93f5f717d527' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet_stats1_max_value</dd></dl></div><div class='xr-var-data'><pre>array([163., 163., 163., 163., 163.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.154e+07 1.154e+07 ... 1.154e+07</div><input id='attrs-d082fd08-e968-48fb-8e4c-b62a6e56504f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d082fd08-e968-48fb-8e4c-b62a6e56504f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-161322b9-1457-4c8c-b4d7-7470675b75e5' class='xr-var-data-in' type='checkbox'><label for='data-161322b9-1457-4c8c-b4d7-7470675b75e5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet_stats1_total</dd></dl></div><div class='xr-var-data'><pre>array([11535831., 11535831., 11535831., 11535831., 11535831.])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d8183b2d-d087-4a2b-b4f3-2b223fad70e4' class='xr-section-summary-in' type='checkbox'  ><label for='section-d8183b2d-d087-4a2b-b4f3-2b223fad70e4' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-9afd98e3-5a88-426c-b9e4-66d44e736e42' class='xr-index-data-in' type='checkbox'/><label for='index-9afd98e3-5a88-426c-b9e4-66d44e736e42' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718408304.1324468, 1718408304.5543303, 1718408304.9276028,
       1718408305.3008704, 1718408305.6879227],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-5712b29a-b809-49e2-a2e8-f96bc58708da' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-5712b29a-b809-49e2-a2e8-f96bc58708da' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
</section>
</section>
<section id="Take-image(s)-with-the-bp.count-plan">
<h2>Take image(s) with the <code class="docutils literal notranslate"><span class="pre">bp.count</span></code> plan<a class="headerlink" href="#Take-image(s)-with-the-bp.count-plan" title="Permalink to this heading">#</a></h2>
<p>Collect 5 sets of images (3-frames each as configured above).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">count</span><span class="p">([</span><span class="n">simdet</span><span class="p">],</span> <span class="n">num</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;uids=!r&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 88     Time: 2024-06-14 18:38:27
Persistent Unique Scan ID: &#39;3150f83f-9d10-4d9e-b9f5-659872cdfaa0&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+-------------------------+-------------------------+---------------------+
|         1 | 18:38:27.9 |                  152756 |                     162 |            11536441 |
|         2 | 18:38:28.3 |                  152759 |                     159 |            11375680 |
|         3 | 18:38:28.8 |                  152762 |                     166 |            11816159 |
|         4 | 18:38:29.2 |                  152765 |                     160 |            11392858 |
|         5 | 18:38:29.6 |                  152768 |                     161 |            11485969 |
+-----------+------------+-------------------------+-------------------------+---------------------+
generator count [&#39;3150f83f&#39;] (scan num: 88)
uids=!r
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_21_3.png" src="../_images/howto__ad_v_motors_21_3.png" />
</div>
</div>
<section id="Visualize-the-collected-data">
<h3>Visualize the collected data<a class="headerlink" href="#Visualize-the-collected-data" title="Permalink to this heading">#</a></h3>
<p>Let’s examine the data from the most recent run in the catalog:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the dataset from the most recent run</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1">#  Extract the image data</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>

<span class="c1"># Print the shape of the image data</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Display the dataset</span>
<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
image_data.shape=(5, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 16MB
Dimensions:                  (time: 5, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 16MB 10 8 ... 10
    simdet_stats1_unique_id  (time) int64 40B 152756 152759 152762 152765 152768
    simdet_stats1_max_value  (time) float64 40B 162.0 159.0 166.0 160.0 161.0
    simdet_stats1_total      (time) float64 40B 1.154e+07 ... 1.149e+07</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-34e66036-bf84-4be8-8847-6e6b7f8806ff' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-34e66036-bf84-4be8-8847-6e6b7f8806ff' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-f55ecd5e-3238-4c4b-8c18-5d800a1d4de4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f55ecd5e-3238-4c4b-8c18-5d800a1d4de4' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-16f48ce6-3e4c-4cc3-980d-6039611affee' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-16f48ce6-3e4c-4cc3-980d-6039611affee' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ea782695-578b-4632-96c5-9f6c09b360ee' class='xr-var-data-in' type='checkbox'><label for='data-ea782695-578b-4632-96c5-9f6c09b360ee' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-81323e7b-9eb6-421f-8910-c2e7726a6102' class='xr-section-summary-in' type='checkbox'  checked><label for='section-81323e7b-9eb6-421f-8910-c2e7726a6102' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>10 8 6 6 5 10 13 ... 8 12 12 7 7 10</div><input id='attrs-26321428-ccc9-42a2-aaab-b229a81dbbc8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-26321428-ccc9-42a2-aaab-b229a81dbbc8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a8ae9e71-61c6-4570-92ab-871286e4ca52' class='xr-var-data-in' type='checkbox'><label for='data-a8ae9e71-61c6-4570-92ab-871286e4ca52' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[10,  8,  6, ...,  7,  9,  7],
         [13, 13, 12, ...,  9,  8, 11],
         [10, 12, 13, ..., 11,  7, 11],
         ...,
         [ 7, 11,  9, ..., 10, 14, 11],
         [ 8,  8,  7, ...,  9, 11,  5],
         [ 7,  6, 13, ..., 11,  6,  9]],

        [[12, 14, 11, ..., 11,  9, 12],
         [13,  7, 13, ..., 13, 12, 11],
         [ 7,  9,  6, ...,  9, 13, 14],
         ...,
         [13,  5, 14, ...,  5,  7, 11],
         [14, 11, 13, ..., 12, 10, 14],
         [ 6, 13, 13, ..., 11,  5, 11]],

        [[14,  6,  7, ..., 13,  9, 12],
         [ 7, 13, 13, ..., 12,  6, 10],
         [12, 10, 11, ...,  6, 13,  8],
         ...,
...
         ...,
         [11,  7,  7, ...,  6,  9,  8],
         [14,  5,  9, ..., 12,  6, 13],
         [11, 13, 14, ..., 13,  7, 11]],

        [[ 9,  9,  6, ..., 10,  7, 12],
         [ 8, 13,  8, ..., 12, 10,  9],
         [ 6, 11,  7, ..., 14,  6,  7],
         ...,
         [ 5,  5, 11, ...,  7, 14,  6],
         [ 5, 13, 12, ...,  6,  9,  6],
         [ 8, 14, 11, ...,  5,  6,  8]],

        [[11, 14,  7, ...,  9, 10, 11],
         [ 6, 11,  9, ..., 12, 14, 10],
         [11,  6, 14, ..., 12,  7,  6],
         ...,
         [ 5, 11, 12, ...,  5,  9, 11],
         [13,  9, 13, ..., 12,  5, 12],
         [ 5,  5,  5, ...,  7,  7, 10]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152756 152759 152762 152765 152768</div><input id='attrs-9112a2eb-22d3-4ab2-921b-c3abce29fc77' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9112a2eb-22d3-4ab2-921b-c3abce29fc77' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-89a3f471-9ec4-47cc-a910-fcc4ee17f1a7' class='xr-var-data-in' type='checkbox'><label for='data-89a3f471-9ec4-47cc-a910-fcc4ee17f1a7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152756, 152759, 152762, 152765, 152768])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>162.0 159.0 166.0 160.0 161.0</div><input id='attrs-c25607fe-1d48-4e30-a179-06918068f193' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c25607fe-1d48-4e30-a179-06918068f193' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dd12662a-be6f-4557-9090-cd354b7b6f2f' class='xr-var-data-in' type='checkbox'><label for='data-dd12662a-be6f-4557-9090-cd354b7b6f2f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([162., 159., 166., 160., 161.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.154e+07 1.138e+07 ... 1.149e+07</div><input id='attrs-fa289bda-8ea3-451e-80e0-725e204bb573' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fa289bda-8ea3-451e-80e0-725e204bb573' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-92170066-281d-4ee4-b548-60c7d52f9412' class='xr-var-data-in' type='checkbox'><label for='data-92170066-281d-4ee4-b548-60c7d52f9412' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11536441., 11375680., 11816159., 11392858., 11485969.])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6445ae7b-38d3-4444-b96f-85f92fa8b4ff' class='xr-section-summary-in' type='checkbox'  ><label for='section-6445ae7b-38d3-4444-b96f-85f92fa8b4ff' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-4670c202-7044-4c5d-958b-a61644dc458c' class='xr-index-data-in' type='checkbox'/><label for='index-4670c202-7044-4c5d-958b-a61644dc458c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718408307.9876025,  1718408308.398535, 1718408308.8049364,
       1718408309.2290592, 1718408309.6564727],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d8a7f80a-b2fe-4c98-a819-5cfa4a483d3f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d8a7f80a-b2fe-4c98-a819-5cfa4a483d3f' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<ul class="simple">
<li><p><strong>Display the first image frame</strong> from the first <em>point</em>.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">()</span>  <span class="c1"># Plot the first frame.</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7f8649aa3e10&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_25_1.png" src="../_images/howto__ad_v_motors_25_1.png" />
</div>
</div>
</section>
<section id="About-the-HDF5-image-file">
<h3>About the HDF5 image file<a class="headerlink" href="#About-the-HDF5-image-file" title="Permalink to this heading">#</a></h3>
<p>Information about the HDF5 file is saved as a <code class="docutils literal notranslate"><span class="pre">resource</span></code> document in the catalog. This command shows the content of that document.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">resources</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">_resources</span>
<span class="n">resources</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Resource({&#39;path_semantics&#39;: &#39;posix&#39;,
 &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3},
 &#39;resource_path&#39;: &#39;mnt/iockad/tmp/eef6bc7c-bc78-44ce-80f1_000000.h5&#39;,
 &#39;root&#39;: &#39;/&#39;,
 &#39;run_start&#39;: &#39;3150f83f-9d10-4d9e-b9f5-659872cdfaa0&#39;,
 &#39;spec&#39;: &#39;AD_HDF5&#39;,
 &#39;uid&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4&#39;})]
</pre></div></div>
</div>
<p><strong>Note</strong> this is a Python <code class="docutils literal notranslate"><span class="pre">list</span></code>. The file name, as the catalog will find its image contents, is reconstructed:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;resource_path&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/mnt/iockad/tmp/eef6bc7c-bc78-44ce-80f1_000000.h5&#39;
</pre></div></div>
</div>
<p><strong>Show that this file is recognized</strong> on the file system available to Bluesky.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">image_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;resource_path&quot;</span><span class="p">])</span>
<span class="n">image_file</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
</section>
</section>
<section id="The-(1-D)-bp.scan()-plan-with-one-motor">
<h2>The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with one motor<a class="headerlink" href="#The-(1-D)-bp.scan()-plan-with-one-motor" title="Permalink to this heading">#</a></h2>
<p>Step scan a motor (m1) and measure 3 (as configured above) images at each step. Also record total counts and the maximum counts value for each step.</p>
<p>In the interest of brevity here, further graphical data visualization will be turned off. Refer to the section above for the visualization steps. They are identical for each type of scan.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bec</span><span class="o">.</span><span class="n">disable_plots</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p><strong>Run</strong> the scan.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">simdet</span><span class="p">],</span> <span class="n">m1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 89     Time: 2024-06-14 18:38:32
Persistent Unique Scan ID: &#39;bcf1e286-325e-4808-af42-c63d8ef4fed8&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time |         m1 | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+------------+-------------------------+-------------------------+---------------------+
|         1 | 18:38:34.7 |    -1.0000 |                  152771 |                     164 |            11698714 |
|         2 | 18:38:35.5 |    -0.5000 |                  152774 |                     165 |            11763108 |
|         3 | 18:38:36.3 |     0.0000 |                  152777 |                     163 |            11659032 |
|         4 | 18:38:37.1 |     0.5000 |                  152780 |                     164 |            11658545 |
|         5 | 18:38:37.9 |     1.0000 |                  152783 |                     160 |            11389070 |
+-----------+------------+------------+-------------------------+-------------------------+---------------------+
generator scan [&#39;bcf1e286&#39;] (scan num: 89)
image_data.shape=(5, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 16MB
Dimensions:                  (time: 5, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 16MB 11 7 ... 10
    simdet_stats1_unique_id  (time) int64 40B 152771 152774 152777 152780 152783
    simdet_stats1_max_value  (time) float64 40B 164.0 165.0 163.0 164.0 160.0
    simdet_stats1_total      (time) float64 40B 1.17e+07 1.176e+07 ... 1.139e+07
    m1                       (time) float64 40B -1.0 -0.5 0.0 0.5 1.0
    m1_user_setpoint         (time) float64 40B -1.0 -0.5 0.0 0.5 1.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-859eac8d-0f41-4f8a-bd0a-ec209e28ea19' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-859eac8d-0f41-4f8a-bd0a-ec209e28ea19' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-4d3cb949-b77e-4faf-bedc-760b8a7f5c44' class='xr-section-summary-in' type='checkbox'  checked><label for='section-4d3cb949-b77e-4faf-bedc-760b8a7f5c44' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-ee3b1e20-8cf2-4174-9b04-7cc4c811dc16' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ee3b1e20-8cf2-4174-9b04-7cc4c811dc16' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-97abef24-0c3d-4c1e-b3b6-e37b646949bd' class='xr-var-data-in' type='checkbox'><label for='data-97abef24-0c3d-4c1e-b3b6-e37b646949bd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-438349d8-4832-496b-97f5-a21d7a0d08fe' class='xr-section-summary-in' type='checkbox'  checked><label for='section-438349d8-4832-496b-97f5-a21d7a0d08fe' class='xr-section-summary' >Data variables: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>11 7 11 12 14 13 ... 6 13 7 7 11 10</div><input id='attrs-f731c54d-3f73-481d-9698-d84fde7b5fec' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f731c54d-3f73-481d-9698-d84fde7b5fec' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c54a19c8-ade2-4e2e-854d-5c5c6d9b8273' class='xr-var-data-in' type='checkbox'><label for='data-c54a19c8-ade2-4e2e-854d-5c5c6d9b8273' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[11,  7, 11, ...,  6,  6, 14],
         [12, 13, 13, ...,  5,  5,  6],
         [ 9,  8,  6, ..., 12,  7,  8],
         ...,
         [ 9, 10,  9, ...,  8, 11, 10],
         [ 5, 12, 13, ...,  5,  5, 13],
         [ 6,  8, 10, ...,  5,  8, 10]],

        [[ 9,  7,  6, ..., 10,  7, 11],
         [ 8, 11, 11, ...,  7, 13, 11],
         [13,  7, 10, ..., 10, 13, 12],
         ...,
         [ 6,  7,  7, ..., 14,  5,  9],
         [ 6,  9, 12, ..., 12,  7,  6],
         [ 6,  8,  8, ...,  9, 14,  5]],

        [[13, 13,  7, ...,  8, 13, 10],
         [ 8,  7,  6, ..., 13,  8,  8],
         [ 7, 13,  7, ...,  8, 11,  8],
         ...,
...
         ...,
         [ 7,  6,  5, ..., 10, 13, 10],
         [12,  5,  9, ...,  5, 12, 12],
         [ 8,  5,  8, ..., 14, 13, 10]],

        [[12,  8,  8, ...,  8, 11,  6],
         [14, 12, 10, ...,  8, 10,  7],
         [ 7, 13,  8, ...,  6,  8,  6],
         ...,
         [ 5,  6, 10, ...,  6, 13,  7],
         [12, 12, 13, ...,  5,  7,  9],
         [12, 12,  6, ..., 10,  7,  6]],

        [[ 5, 12, 14, ..., 12,  8, 11],
         [10,  7, 10, ..., 11,  5, 13],
         [ 8,  7, 11, ...,  5, 10,  8],
         ...,
         [ 5, 10,  7, ...,  8,  8, 10],
         [ 6,  8, 14, ...,  9,  9, 10],
         [12, 13, 14, ...,  7, 11, 10]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152771 152774 152777 152780 152783</div><input id='attrs-db416b1c-3c04-47ac-9040-6db6e90ecdf1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-db416b1c-3c04-47ac-9040-6db6e90ecdf1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-13c58169-5b68-4b8d-9944-e26d67dfa3c0' class='xr-var-data-in' type='checkbox'><label for='data-13c58169-5b68-4b8d-9944-e26d67dfa3c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152771, 152774, 152777, 152780, 152783])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>164.0 165.0 163.0 164.0 160.0</div><input id='attrs-a3c5c43b-1094-4085-82a5-46f13153773d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a3c5c43b-1094-4085-82a5-46f13153773d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dd11b189-9e9d-48b8-9873-7afd098c722e' class='xr-var-data-in' type='checkbox'><label for='data-dd11b189-9e9d-48b8-9873-7afd098c722e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([164., 165., 163., 164., 160.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.17e+07 1.176e+07 ... 1.139e+07</div><input id='attrs-e3727b02-5340-4105-b514-6e3b930402b7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e3727b02-5340-4105-b514-6e3b930402b7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b466835d-4a2d-4da0-8adb-f31ebe5295c1' class='xr-var-data-in' type='checkbox'><label for='data-b466835d-4a2d-4da0-8adb-f31ebe5295c1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11698714., 11763108., 11659032., 11658545., 11389070.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-2ec266cf-1734-4a19-8c5d-e29a998311d4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2ec266cf-1734-4a19-8c5d-e29a998311d4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-407b1a3f-0f52-49bf-a209-8074f913cad6' class='xr-var-data-in' type='checkbox'><label for='data-407b1a3f-0f52-49bf-a209-8074f913cad6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-ce4978c9-2bac-4054-8655-e3d50d412f96' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ce4978c9-2bac-4054-8655-e3d50d412f96' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-07ef9b14-701c-462d-82b9-4abf97f69320' class='xr-var-data-in' type='checkbox'><label for='data-07ef9b14-701c-462d-82b9-4abf97f69320' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-39e9a775-14f6-468b-a9c7-107906e09ee1' class='xr-section-summary-in' type='checkbox'  ><label for='section-39e9a775-14f6-468b-a9c7-107906e09ee1' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-fb7c5f28-c3b4-44b5-b3e2-9a32281a3299' class='xr-index-data-in' type='checkbox'/><label for='index-fb7c5f28-c3b4-44b5-b3e2-9a32281a3299' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718408314.7771826,  1718408315.561041, 1718408316.3652234,
       1718408317.1819696, 1718408317.9658725],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cd39c2cb-4a31-4e81-98ab-aca81b93ba12' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-cd39c2cb-4a31-4e81-98ab-aca81b93ba12' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
</section>
<section id="The-(1-D)-bp.scan()-plan-with-two-motors">
<h2>The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with two motors<a class="headerlink" href="#The-(1-D)-bp.scan()-plan-with-two-motors" title="Permalink to this heading">#</a></h2>
<p>Step scan two motors together (m1 &amp; m2) and measure 3 (as configured above) images at each step. Also record total counts and the maximum counts value for each step.</p>
<p>For clarity, the <code class="docutils literal notranslate"><span class="pre">scan</span></code> arguments are split into multiple lines.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span>
        <span class="p">[</span><span class="n">simdet</span><span class="p">],</span>
        <span class="n">m1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">m2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;uids=!r&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 90     Time: 2024-06-14 18:38:38
Persistent Unique Scan ID: &#39;ef338ace-f2be-437a-b838-d501bbbf7efd&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time |         m1 |         m2 | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|         1 | 18:38:42.7 |    -1.0000 |     4.0000 |                  152786 |                     164 |            11688862 |
|         2 | 18:38:43.6 |    -0.5000 |     3.3750 |                  152789 |                     165 |            11741804 |
|         3 | 18:38:44.4 |     0.0000 |     2.7500 |                  152792 |                     164 |            11663410 |
|         4 | 18:38:45.4 |     0.5000 |     2.1250 |                  152795 |                     162 |            11537004 |
|         5 | 18:38:46.3 |     1.0000 |     1.5000 |                  152798 |                     160 |            11387833 |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
generator scan [&#39;ef338ace&#39;] (scan num: 90)
uids=!r
image_data.shape=(5, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 16MB
Dimensions:                  (time: 5, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 16MB 6 5 ... 6 12
    simdet_stats1_unique_id  (time) int64 40B 152786 152789 152792 152795 152798
    simdet_stats1_max_value  (time) float64 40B 164.0 165.0 164.0 162.0 160.0
    simdet_stats1_total      (time) float64 40B 1.169e+07 ... 1.139e+07
    m2                       (time) float64 40B 4.0 3.375 2.75 2.125 1.5
    m2_user_setpoint         (time) float64 40B 4.0 3.375 2.75 2.125 1.5
    m1                       (time) float64 40B -1.0 -0.5 0.0 0.5 1.0
    m1_user_setpoint         (time) float64 40B -1.0 -0.5 0.0 0.5 1.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-fc04b6dd-115b-4da3-ab40-78e94f6c95ff' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-fc04b6dd-115b-4da3-ab40-78e94f6c95ff' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-5c485374-e757-410d-99e6-2c220549f304' class='xr-section-summary-in' type='checkbox'  checked><label for='section-5c485374-e757-410d-99e6-2c220549f304' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-649faae3-c601-46e2-96c0-d4cb7179efb0' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-649faae3-c601-46e2-96c0-d4cb7179efb0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a6d4f1c0-4dc7-4c43-a45c-fcd3bd26712b' class='xr-var-data-in' type='checkbox'><label for='data-a6d4f1c0-4dc7-4c43-a45c-fcd3bd26712b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-03551dfe-d867-4614-8bed-f039235278ea' class='xr-section-summary-in' type='checkbox'  checked><label for='section-03551dfe-d867-4614-8bed-f039235278ea' class='xr-section-summary' >Data variables: <span>(8)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>6 5 12 12 7 6 9 ... 10 12 5 11 6 12</div><input id='attrs-476ec387-e563-461f-8716-9035adc93541' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-476ec387-e563-461f-8716-9035adc93541' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8d23fbfe-0cf8-4f20-b14f-b0ccbc105f54' class='xr-var-data-in' type='checkbox'><label for='data-8d23fbfe-0cf8-4f20-b14f-b0ccbc105f54' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[ 6,  5, 12, ..., 12,  5,  8],
         [11,  9, 12, ...,  5,  6,  9],
         [13,  9, 11, ...,  6, 12, 13],
         ...,
         [ 8, 11,  9, ...,  5,  8,  9],
         [11,  6,  8, ...,  6,  6, 12],
         [ 5, 11, 12, ...,  6,  6, 14]],

        [[ 5,  5, 14, ..., 12,  6,  9],
         [13, 12, 10, ..., 13,  6,  5],
         [11, 10, 12, ...,  6,  7,  8],
         ...,
         [13, 13, 11, ...,  8, 13, 10],
         [14, 12, 10, ..., 12, 11, 10],
         [12,  7,  8, ..., 13, 10,  7]],

        [[14, 10, 13, ..., 14, 14, 11],
         [ 6,  6, 13, ...,  8, 10,  7],
         [ 6,  7, 11, ...,  9,  9, 14],
         ...,
...
         ...,
         [ 7, 14,  5, ..., 14, 12, 14],
         [ 5,  7,  7, ...,  6,  7, 13],
         [ 5, 12, 14, ...,  6, 10, 14]],

        [[ 5,  5,  6, ...,  7,  8,  9],
         [11,  7,  5, ...,  9,  7,  6],
         [10,  9, 10, ...,  5,  8, 12],
         ...,
         [ 5, 10, 13, ..., 10, 11,  8],
         [ 6,  8, 10, ...,  9, 10, 14],
         [12,  8,  6, ...,  7,  6,  6]],

        [[ 5,  9,  7, ..., 13, 10,  9],
         [ 8, 10,  9, ..., 10,  6,  8],
         [ 8, 10,  5, ..., 13, 14, 11],
         ...,
         [ 5, 10,  7, ..., 10, 14, 10],
         [ 7, 10, 13, ...,  9,  9,  7],
         [12,  6, 11, ..., 11,  6, 12]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152786 152789 152792 152795 152798</div><input id='attrs-263ec171-d7e0-44c8-851a-5272572087ee' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-263ec171-d7e0-44c8-851a-5272572087ee' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d77d082a-b9fe-4e34-b9b1-d5e686e747c0' class='xr-var-data-in' type='checkbox'><label for='data-d77d082a-b9fe-4e34-b9b1-d5e686e747c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152786, 152789, 152792, 152795, 152798])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>164.0 165.0 164.0 162.0 160.0</div><input id='attrs-c047bd73-f6a0-4e34-8fcc-726b9022e622' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c047bd73-f6a0-4e34-8fcc-726b9022e622' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-53f201d3-89cf-4276-90df-42eed5bb67e9' class='xr-var-data-in' type='checkbox'><label for='data-53f201d3-89cf-4276-90df-42eed5bb67e9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([164., 165., 164., 162., 160.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.169e+07 1.174e+07 ... 1.139e+07</div><input id='attrs-8587a1ec-2ed6-4bd4-8912-e8c46b587d36' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8587a1ec-2ed6-4bd4-8912-e8c46b587d36' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6bbc294e-0461-46ed-9dcf-587ab8763fbf' class='xr-var-data-in' type='checkbox'><label for='data-6bbc294e-0461-46ed-9dcf-587ab8763fbf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11688862., 11741804., 11663410., 11537004., 11387833.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.0 3.375 2.75 2.125 1.5</div><input id='attrs-db224e80-ae7b-4c75-a31e-13ae954316b2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-db224e80-ae7b-4c75-a31e-13ae954316b2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a77d99a9-6d67-4ef5-bac6-48850bc6e476' class='xr-var-data-in' type='checkbox'><label for='data-a77d99a9-6d67-4ef5-bac6-48850bc6e476' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([4.   , 3.375, 2.75 , 2.125, 1.5  ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.0 3.375 2.75 2.125 1.5</div><input id='attrs-1d247984-cf4b-4273-beac-fc00912a5eb7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1d247984-cf4b-4273-beac-fc00912a5eb7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-867bf9b5-ac8d-4763-9658-88a660e5bca4' class='xr-var-data-in' type='checkbox'><label for='data-867bf9b5-ac8d-4763-9658-88a660e5bca4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([4.   , 3.375, 2.75 , 2.125, 1.5  ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-7e345404-9575-4db8-9c18-0a23f3f1895a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7e345404-9575-4db8-9c18-0a23f3f1895a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8b53d9af-ef16-4b01-b618-dcd85d24173e' class='xr-var-data-in' type='checkbox'><label for='data-8b53d9af-ef16-4b01-b618-dcd85d24173e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-f367a0ad-9bab-4529-8112-f50cdcaabeff' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f367a0ad-9bab-4529-8112-f50cdcaabeff' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9af8cfaa-2a51-4257-b2bc-8da69a6cf277' class='xr-var-data-in' type='checkbox'><label for='data-9af8cfaa-2a51-4257-b2bc-8da69a6cf277' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-047cc6d7-78c3-4967-8a3c-4bce68e7d5bd' class='xr-section-summary-in' type='checkbox'  ><label for='section-047cc6d7-78c3-4967-8a3c-4bce68e7d5bd' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-90968772-b137-4121-b4a3-9cc937e0f37a' class='xr-index-data-in' type='checkbox'/><label for='index-90968772-b137-4121-b4a3-9cc937e0f37a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718408322.7443392, 1718408323.6006224, 1718408324.4918003,
         1718408325.40207, 1718408326.3017569],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e9e8b910-6a3b-4509-8e9a-f5abb266b379' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-e9e8b910-6a3b-4509-8e9a-f5abb266b379' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<section id="Show-the-sequence-of-motor-positions">
<h3>Show the sequence of motor positions<a class="headerlink" href="#Show-the-sequence-of-motor-positions" title="Permalink to this heading">#</a></h3>
<p>The second motor of the <code class="docutils literal notranslate"><span class="pre">scan</span></code> (<code class="docutils literal notranslate"><span class="pre">m2</span></code>) is moved at the same time as the first motor (<code class="docutils literal notranslate"><span class="pre">m1</span></code>). Here’s a plot of readback of each motor from a two-motor <code class="docutils literal notranslate"><span class="pre">scan</span></code> plotted <em>v</em>. data point number:</p>
<p><img alt="grid_scan motors v point number" src="../_images/scan_two_motors.png" /></p>
</section>
</section>
<section id="The-(2-D)-bp.grid_scan()-(mesh)-plan">
<h2>The (2-D) <code class="docutils literal notranslate"><span class="pre">bp.grid_scan()</span></code> (mesh) plan<a class="headerlink" href="#The-(2-D)-bp.grid_scan()-(mesh)-plan" title="Permalink to this heading">#</a></h2>
<p>Step scan two motors (m1 &amp; m2) and measure images at each step, as before. Also record total counts and the maximum counts value for each step.</p>
<p>For clarity, the <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code> arguments are split into multiple lines.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">grid_scan</span><span class="p">(</span>
        <span class="p">[</span><span class="n">simdet</span><span class="p">],</span>
        <span class="n">m1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">m2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">snake_axes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;uids=!r&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 91     Time: 2024-06-14 18:38:47
Persistent Unique Scan ID: &#39;68da3698-bcfa-49b7-95f1-68732545077a&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time |         m1 |         m2 | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|         1 | 18:38:49.6 |    -1.0000 |    -0.5000 |                  152801 |                     166 |            11823332 |
|         2 | 18:38:50.2 |    -1.0000 |    -0.1667 |                  152804 |                     166 |            11842544 |
|         3 | 18:38:50.8 |    -1.0000 |     0.1667 |                  152807 |                     166 |            11855439 |
|         4 | 18:38:51.4 |    -1.0000 |     0.5000 |                  152810 |                     162 |            11495078 |
|         5 | 18:38:52.2 |    -0.5000 |     0.5000 |                  152813 |                     160 |            11413098 |
|         6 | 18:38:52.8 |    -0.5000 |     0.1667 |                  152816 |                     162 |            11536244 |
|         7 | 18:38:53.4 |    -0.5000 |    -0.1667 |                  152819 |                     162 |            11482573 |
|         8 | 18:38:54.0 |    -0.5000 |    -0.5000 |                  152822 |                     165 |            11796069 |
|         9 | 18:38:54.8 |     0.0000 |    -0.5000 |                  152825 |                     163 |            11658269 |
|        10 | 18:38:55.4 |     0.0000 |    -0.1667 |                  152828 |                     160 |            11410469 |
|        11 | 18:38:56.0 |     0.0000 |     0.1667 |                  152831 |                     160 |            11401028 |
|        12 | 18:38:56.6 |     0.0000 |     0.5000 |                  152834 |                     165 |            11798737 |
|        13 | 18:38:57.4 |     0.5000 |     0.5000 |                  152837 |                     166 |            11844567 |
|        14 | 18:38:58.0 |     0.5000 |     0.1667 |                  152840 |                     164 |            11730554 |
|        15 | 18:38:58.6 |     0.5000 |    -0.1667 |                  152843 |                     161 |            11465427 |
|        16 | 18:38:59.2 |     0.5000 |    -0.5000 |                  152846 |                     166 |            11827694 |
|        17 | 18:39:00.0 |     1.0000 |    -0.5000 |                  152849 |                     159 |            11382965 |
|        18 | 18:39:00.6 |     1.0000 |    -0.1667 |                  152852 |                     162 |            11536706 |
|        19 | 18:39:01.2 |     1.0000 |     0.1667 |                  152855 |                     163 |            11658095 |
|        20 | 18:39:01.8 |     1.0000 |     0.5000 |                  152858 |                     164 |            11722735 |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
generator grid_scan [&#39;68da3698&#39;] (scan num: 91)
uids=!r
image_data.shape=(20, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 63MB
Dimensions:                  (time: 20, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 160B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 63MB 8 9 ... 7 12
    simdet_stats1_unique_id  (time) int64 160B 152801 152804 ... 152855 152858
    simdet_stats1_max_value  (time) float64 160B 166.0 166.0 ... 163.0 164.0
    simdet_stats1_total      (time) float64 160B 1.182e+07 ... 1.172e+07
    m2                       (time) float64 160B -0.5 -0.1667 ... 0.1667 0.5
    m2_user_setpoint         (time) float64 160B -0.5 -0.1667 ... 0.1667 0.5
    m1                       (time) float64 160B -1.0 -1.0 -1.0 ... 1.0 1.0 1.0
    m1_user_setpoint         (time) float64 160B -1.0 -1.0 -1.0 ... 1.0 1.0 1.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-b9ea34cf-049d-4b5c-80cc-da7426d4a829' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-b9ea34cf-049d-4b5c-80cc-da7426d4a829' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 20</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-adc9edaa-4bd6-40dc-bf24-0dc77da1c686' class='xr-section-summary-in' type='checkbox'  checked><label for='section-adc9edaa-4bd6-40dc-bf24-0dc77da1c686' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-eea3bf46-2b3d-43b7-a507-f029a367e339' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-eea3bf46-2b3d-43b7-a507-f029a367e339' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8ad32a1c-b686-4746-8dd6-417b1df97de3' class='xr-var-data-in' type='checkbox'><label for='data-8ad32a1c-b686-4746-8dd6-417b1df97de3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09,
       1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09,
       1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09,
       1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09, 1.718408e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-943baa0b-f09d-40b7-9351-a5bc8e9f0b17' class='xr-section-summary-in' type='checkbox'  checked><label for='section-943baa0b-f09d-40b7-9351-a5bc8e9f0b17' class='xr-section-summary' >Data variables: <span>(8)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>8 9 9 8 5 11 10 ... 13 12 6 11 7 12</div><input id='attrs-d86836c1-b1f6-4ba5-91c3-9d0bdc4a1beb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d86836c1-b1f6-4ba5-91c3-9d0bdc4a1beb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c7861b78-9b28-4552-995e-734655d9a269' class='xr-var-data-in' type='checkbox'><label for='data-c7861b78-9b28-4552-995e-734655d9a269' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[ 8,  9,  9, ..., 13,  9,  6],
         [ 6,  8,  6, ...,  9,  7,  6],
         [ 8, 13,  5, ..., 12, 10,  6],
         ...,
         [10,  8,  6, ..., 14,  5, 13],
         [ 7,  9,  7, ..., 11, 13, 11],
         [13, 10,  9, ...,  9, 10,  5]],

        [[12, 11,  6, ...,  9, 12,  6],
         [ 6,  9, 13, ...,  5,  7, 10],
         [ 9, 11,  6, ...,  9, 10,  8],
         ...,
         [12, 11,  6, ..., 10, 13,  7],
         [14,  7, 13, ..., 11, 14,  6],
         [11,  7,  5, ..., 10, 14, 11]],

        [[ 9,  9,  5, ...,  7, 10, 13],
         [11,  6,  5, ..., 13, 14,  5],
         [13,  7,  7, ...,  6, 14, 12],
         ...,
...
         ...,
         [ 8,  8, 13, ..., 13,  7,  8],
         [ 9, 14, 10, ...,  6, 14,  5],
         [ 7, 10,  6, ..., 13, 12, 11]],

        [[10, 12,  5, ..., 12, 10,  8],
         [14,  6,  8, ...,  6, 10, 12],
         [ 9, 11,  6, ..., 10,  9,  8],
         ...,
         [14,  6, 10, ...,  8,  5, 11],
         [10,  8,  9, ..., 14,  8, 13],
         [ 8,  5, 10, ..., 14,  9, 10]],

        [[14,  7,  7, ...,  6, 10, 11],
         [ 6, 14,  6, ...,  8, 11,  8],
         [12, 14,  7, ..., 12, 14,  8],
         ...,
         [14, 10, 14, ...,  8,  6,  8],
         [ 9,  9, 11, ...,  9, 11,  9],
         [ 5,  9, 10, ..., 11,  7, 12]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152801 152804 ... 152855 152858</div><input id='attrs-c4f6c95d-2677-4cf0-9a81-60f92e9d74d2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c4f6c95d-2677-4cf0-9a81-60f92e9d74d2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d76724ac-e16a-474f-9d00-26b7b514a5bc' class='xr-var-data-in' type='checkbox'><label for='data-d76724ac-e16a-474f-9d00-26b7b514a5bc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152801, 152804, 152807, 152810, 152813, 152816, 152819, 152822,
       152825, 152828, 152831, 152834, 152837, 152840, 152843, 152846,
       152849, 152852, 152855, 152858])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>166.0 166.0 166.0 ... 163.0 164.0</div><input id='attrs-2f78326f-b6fb-4a9d-9960-6c616f855420' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2f78326f-b6fb-4a9d-9960-6c616f855420' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4f61aceb-92e9-4762-90e7-fe60ffd33af4' class='xr-var-data-in' type='checkbox'><label for='data-4f61aceb-92e9-4762-90e7-fe60ffd33af4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([166., 166., 166., 162., 160., 162., 162., 165., 163., 160., 160.,
       165., 166., 164., 161., 166., 159., 162., 163., 164.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.182e+07 1.184e+07 ... 1.172e+07</div><input id='attrs-4376391d-dd6e-4daa-87eb-538cbeb2d7e1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4376391d-dd6e-4daa-87eb-538cbeb2d7e1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e0201679-573a-44c2-96c6-3bc078c0897d' class='xr-var-data-in' type='checkbox'><label for='data-e0201679-573a-44c2-96c6-3bc078c0897d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11823332., 11842544., 11855439., 11495078., 11413098., 11536244.,
       11482573., 11796069., 11658269., 11410469., 11401028., 11798737.,
       11844567., 11730554., 11465427., 11827694., 11382965., 11536706.,
       11658095., 11722735.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.5 -0.1667 0.1667 ... 0.1667 0.5</div><input id='attrs-4f25a4ef-ca45-4e92-8b90-742f71ddefc4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4f25a4ef-ca45-4e92-8b90-742f71ddefc4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0741752e-7d9d-4ef8-a2b3-1d310d3ff6e1' class='xr-var-data-in' type='checkbox'><label for='data-0741752e-7d9d-4ef8-a2b3-1d310d3ff6e1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([-0.5   , -0.1667,  0.1667,  0.5   ,  0.5   ,  0.1667, -0.1667,
       -0.5   , -0.5   , -0.1667,  0.1667,  0.5   ,  0.5   ,  0.1667,
       -0.1667, -0.5   , -0.5   , -0.1667,  0.1667,  0.5   ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.5 -0.1667 0.1667 ... 0.1667 0.5</div><input id='attrs-ad17804f-b80a-4f15-b41d-da72992ca002' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ad17804f-b80a-4f15-b41d-da72992ca002' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f1caa014-d794-4e50-bcae-228e4d251011' class='xr-var-data-in' type='checkbox'><label for='data-f1caa014-d794-4e50-bcae-228e4d251011' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([-0.5       , -0.16666667,  0.16666667,  0.5       ,  0.5       ,
        0.16666667, -0.16666667, -0.5       , -0.5       , -0.16666667,
        0.16666667,  0.5       ,  0.5       ,  0.16666667, -0.16666667,
       -0.5       , -0.5       , -0.16666667,  0.16666667,  0.5       ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -1.0 -1.0 -1.0 ... 1.0 1.0 1.0</div><input id='attrs-e6b3f2be-4fb0-4d6f-8ec9-dbdded393727' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e6b3f2be-4fb0-4d6f-8ec9-dbdded393727' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fc430a64-90bf-4b56-abc3-e5c43f894734' class='xr-var-data-in' type='checkbox'><label for='data-fc430a64-90bf-4b56-abc3-e5c43f894734' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -1. , -1. , -1. , -0.5, -0.5, -0.5, -0.5,  0. ,  0. ,  0. ,
        0. ,  0.5,  0.5,  0.5,  0.5,  1. ,  1. ,  1. ,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -1.0 -1.0 -1.0 ... 1.0 1.0 1.0</div><input id='attrs-2ff25f74-cd5a-4fe7-b2cb-206386222627' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2ff25f74-cd5a-4fe7-b2cb-206386222627' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-37ab2539-f67f-42df-b617-dc15324acbfc' class='xr-var-data-in' type='checkbox'><label for='data-37ab2539-f67f-42df-b617-dc15324acbfc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -1. , -1. , -1. , -0.5, -0.5, -0.5, -0.5,  0. ,  0. ,  0. ,
        0. ,  0.5,  0.5,  0.5,  0.5,  1. ,  1. ,  1. ,  1. ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d16937e5-982c-44c2-aa59-0ace4730c3e5' class='xr-section-summary-in' type='checkbox'  ><label for='section-d16937e5-982c-44c2-aa59-0ace4730c3e5' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-e4120349-f193-4dbb-a3b4-008467124db4' class='xr-index-data-in' type='checkbox'/><label for='index-e4120349-f193-4dbb-a3b4-008467124db4' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718408329.6446254,  1718408330.201864,  1718408330.820179,
       1718408331.4075918,  1718408332.222419,   1718408332.82264,
       1718408333.4213834, 1718408334.0267546, 1718408334.8307734,
        1718408335.432131,  1718408336.016191, 1718408336.6360476,
       1718408337.4201431, 1718408338.0395994, 1718408338.6267586,
       1718408339.2449555, 1718408340.0460134,  1718408340.645662,
       1718408341.2364016,  1718408341.848082],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f1236157-d99a-4e48-b3d2-56079c75d629' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f1236157-d99a-4e48-b3d2-56079c75d629' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<section id="id1">
<h3>Show the sequence of motor positions<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>The second motor of the <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code> (<code class="docutils literal notranslate"><span class="pre">m2</span></code>) is snaked. It’s direction changes with each subsequent increment of the first motor (<code class="docutils literal notranslate"><span class="pre">m1</span></code>). Here’s a plot of readback value of each motor from a <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code> plotted <em>v</em>. data point number:</p>
<p><img alt="grid_scan motors v time-of-day" src="../_images/grid_scan_snake.png" /></p>
</section>
</section>
<section id="SPEC-data-file">
<h2>SPEC data file<a class="headerlink" href="#SPEC-data-file" title="Permalink to this heading">#</a></h2>
<p>All along, quietly in the background, the data has been saved both to a catalog and to a SPEC data file. Show the SPEC file. The total counts, max counts, and unique ID from all scans can be plotted from the SPEC file using PyMCA or NeXpy.</p>
<p>The image content is not stored in the SPEC file; images cannot be viewed from the SPEC file.</p>
<p>References to the images are save as comments. See comment lines that match a search for</p>
<p><code class="docutils literal notranslate"><span class="pre">resource</span> <span class="pre">{'spec':</span> <span class="pre">'AD_HDF5'</span></code></p>
<p>Here is an example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#C Thu Jun 13 11:36:38 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/d94f633b-12a7-4ff0-92af_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;5328206b-dd13-49f8-b108-17e0d867d470&#39;, &#39;run_start&#39;: &#39;e8c24278-656f-4c79-b3eb-d522310f7649&#39;}
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">specwriter</span><span class="o">.</span><span class="n">spec_filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
#F /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/20240614-183822.dat
#E 1718408302
#D Fri Jun 14 18:38:22 2024
#C Bluesky  user = prjemian  host = arf.jemian.org
#O0 dcm_m_theta  dcm_m_y  dcm_m_z  fourc_chi  fourc_omega  fourc_phi  fourc_tth  m1
#O1 m10  m11  m12  m13  m14  m15  m16  m2
#O2 m3  m4  m7  m8  m9  sixc_chi  sixc_delta  sixc_gamma
#O3 sixc_mu  sixc_omega  sixc_phi
#o0 dcm_m_theta  dcm_m_y  dcm_m_z  fourc_chi  fourc_omega  fourc_phi  fourc_tth  m1
#o1 m10  m11  m12  m13  m14  m15  m16  m2
#o2 m3  m4  m7  m8  m9  sixc_chi  sixc_delta  sixc_gamma
#o3 sixc_mu  sixc_omega  sixc_phi

#S 87  count(detectors=[&#39;simdet_stats1_unique_id&#39;, &#39;simdet_stats1_total&#39;, &#39;simdet_stats1_max_value&#39;], num=5, delay=None)
#D Fri Jun 14 18:38:23 2024
#C Fri Jun 14 18:38:23 2024.  plan_type = generator
#C Fri Jun 14 18:38:23 2024.  uid = 24737a37-74a2-4b19-b06f-3df3902f0ea0
#MD uid = 24737a37-74a2-4b19-b06f-3df3902f0ea0
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet_stats1_unique_id&#39;, &#39;simdet_stats1_total&#39;, &#39;simdet_stats1_max_value&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 131335
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 5
#L Epoch_float  Epoch  simdet_stats1_unique_id  simdet_stats1_total  simdet_stats1_max_value
0.17633652687072754 0 152753 11535831.0 163.0
0.5982201099395752 1 152753 11535831.0 163.0
0.9714925289154053 1 152753 11535831.0 163.0
1.3447601795196533 1 152753 11535831.0 163.0
1.7318124771118164 2 152753 11535831.0 163.0
#C Fri Jun 14 18:38:26 2024.  num_events_label_start_motor = 1
#C Fri Jun 14 18:38:26 2024.  num_events_primary = 5
#C Fri Jun 14 18:38:26 2024.  exit_status = success

#S 88  count(detectors=[&#39;simdet&#39;], num=5, delay=None)
#D Fri Jun 14 18:38:27 2024
#C Fri Jun 14 18:38:27 2024.  plan_type = generator
#C Fri Jun 14 18:38:27 2024.  uid = 3150f83f-9d10-4d9e-b9f5-659872cdfaa0
#MD uid = 3150f83f-9d10-4d9e-b9f5-659872cdfaa0
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 131335
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 7
#L Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  simdet
0.19955039024353027 0 0 152756 162.0 11536441.0 0
#U 0 simdet_image 878fed37-1308-4444-aa04-4d722553b9a4/0
0.610482931137085 1 1 152759 159.0 11375680.0 0
#U 1 simdet_image 878fed37-1308-4444-aa04-4d722553b9a4/1
1.0168843269348145 1 2 152762 166.0 11816159.0 0
#U 2 simdet_image 878fed37-1308-4444-aa04-4d722553b9a4/2
1.441007137298584 1 3 152765 160.0 11392858.0 0
#U 3 simdet_image 878fed37-1308-4444-aa04-4d722553b9a4/3
1.8684206008911133 2 4 152768 161.0 11485969.0 0
#U 4 simdet_image 878fed37-1308-4444-aa04-4d722553b9a4/4
#C Fri Jun 14 18:38:27 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/eef6bc7c-bc78-44ce-80f1_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4&#39;, &#39;run_start&#39;: &#39;3150f83f-9d10-4d9e-b9f5-659872cdfaa0&#39;}
#C Fri Jun 14 18:38:27 2024.  datum {&#39;resource&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4&#39;, &#39;datum_id&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Fri Jun 14 18:38:28 2024.  datum {&#39;resource&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4&#39;, &#39;datum_id&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Fri Jun 14 18:38:28 2024.  datum {&#39;resource&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4&#39;, &#39;datum_id&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Fri Jun 14 18:38:29 2024.  datum {&#39;resource&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4&#39;, &#39;datum_id&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Fri Jun 14 18:38:29 2024.  datum {&#39;resource&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4&#39;, &#39;datum_id&#39;: &#39;878fed37-1308-4444-aa04-4d722553b9a4/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Fri Jun 14 18:38:30 2024.  num_events_label_start_motor = 1
#C Fri Jun 14 18:38:30 2024.  num_events_primary = 5
#C Fri Jun 14 18:38:30 2024.  exit_status = success

#S 89  scan(detectors=[&#39;simdet&#39;], num=5, args=&#39;[&#39;m1&#39;, -1, 1]&#39;, per_step=&#39;None&#39;)
#D Fri Jun 14 18:38:32 2024
#C Fri Jun 14 18:38:32 2024.  plan_type = generator
#C Fri Jun 14 18:38:32 2024.  uid = bcf1e286-325e-4808-af42-c63d8ef4fed8
#MD uid = bcf1e286-325e-4808-af42-c63d8ef4fed8
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD motors = (&#39;m1&#39;,)
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 131335
#MD plan_pattern = inner_product
#MD plan_pattern_args = {&#39;num&#39;: 5, &#39;args&#39;: [&#34;MyEpicsMotor(prefix=&#39;gp:m1&#39;, name=&#39;m1&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -1, 1]}
#MD plan_pattern_module = bluesky.plan_patterns
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 9
#L m1  Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  m1_user_setpoint  simdet
-1.0 2.349158763885498 2 0 152771 164.0 11698714.0 -1.0 0
#U 0 simdet_image ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/0
-0.5 3.1330173015594482 3 1 152774 165.0 11763108.0 -0.5 0
#U 1 simdet_image ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/1
0.0 3.937199592590332 4 2 152777 163.0 11659032.0 0.0 0
#U 2 simdet_image ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/2
0.5 4.753945827484131 5 3 152780 164.0 11658545.0 0.5 0
#U 3 simdet_image ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/3
1.0 5.537848711013794 6 4 152783 160.0 11389070.0 1.0 0
#U 4 simdet_image ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/4
#C Fri Jun 14 18:38:34 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/cc823f56-8c99-4e4a-b3f9_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432&#39;, &#39;run_start&#39;: &#39;bcf1e286-325e-4808-af42-c63d8ef4fed8&#39;}
#C Fri Jun 14 18:38:34 2024.  datum {&#39;resource&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432&#39;, &#39;datum_id&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Fri Jun 14 18:38:35 2024.  datum {&#39;resource&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432&#39;, &#39;datum_id&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Fri Jun 14 18:38:36 2024.  datum {&#39;resource&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432&#39;, &#39;datum_id&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Fri Jun 14 18:38:37 2024.  datum {&#39;resource&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432&#39;, &#39;datum_id&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Fri Jun 14 18:38:37 2024.  datum {&#39;resource&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432&#39;, &#39;datum_id&#39;: &#39;ce5dcb49-5f0e-4ae6-8ca3-46d3ae96a432/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Fri Jun 14 18:38:37 2024.  num_events_label_start_motor = 1
#C Fri Jun 14 18:38:37 2024.  num_events_primary = 5
#C Fri Jun 14 18:38:37 2024.  exit_status = success

#S 90  scan(detectors=[&#39;simdet&#39;], num=5, args=&#39;[&#39;m1&#39;, -1, 1, &#39;m2&#39;, 4, 1.5]&#39;, per_step=&#39;None&#39;)
#D Fri Jun 14 18:38:38 2024
#C Fri Jun 14 18:38:38 2024.  plan_type = generator
#C Fri Jun 14 18:38:38 2024.  uid = ef338ace-f2be-437a-b838-d501bbbf7efd
#MD uid = ef338ace-f2be-437a-b838-d501bbbf7efd
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD motors = (&#39;m1&#39;, &#39;m2&#39;)
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 131335
#MD plan_pattern = inner_product
#MD plan_pattern_args = {&#39;num&#39;: 5, &#39;args&#39;: [&#34;MyEpicsMotor(prefix=&#39;gp:m1&#39;, name=&#39;m1&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -1, 1, &#34;MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, 4, 1.5]}
#MD plan_pattern_module = bluesky.plan_patterns
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 11
#L m1  m2  Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  m2_user_setpoint  m1_user_setpoint  simdet
-1.0 4.0 3.9007973670959473 4 0 152786 164.0 11688862.0 4.0 -1.0 0
#U 0 simdet_image f82af27c-f2f1-40cd-9d3c-dd12caef8856/0
-0.5 3.375 4.757080554962158 5 1 152789 165.0 11741804.0 3.375 -0.5 0
#U 1 simdet_image f82af27c-f2f1-40cd-9d3c-dd12caef8856/1
0.0 2.75 5.648258447647095 6 2 152792 164.0 11663410.0 2.75 0.0 0
#U 2 simdet_image f82af27c-f2f1-40cd-9d3c-dd12caef8856/2
0.5 2.125 6.558528184890747 7 3 152795 162.0 11537004.0 2.125 0.5 0
#U 3 simdet_image f82af27c-f2f1-40cd-9d3c-dd12caef8856/3
1.0 1.5 7.458214998245239 7 4 152798 160.0 11387833.0 1.5 1.0 0
#U 4 simdet_image f82af27c-f2f1-40cd-9d3c-dd12caef8856/4
#C Fri Jun 14 18:38:42 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/4a9a0e55-c3bc-43e4-b8ce_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856&#39;, &#39;run_start&#39;: &#39;ef338ace-f2be-437a-b838-d501bbbf7efd&#39;}
#C Fri Jun 14 18:38:42 2024.  datum {&#39;resource&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856&#39;, &#39;datum_id&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Fri Jun 14 18:38:43 2024.  datum {&#39;resource&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856&#39;, &#39;datum_id&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Fri Jun 14 18:38:44 2024.  datum {&#39;resource&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856&#39;, &#39;datum_id&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Fri Jun 14 18:38:45 2024.  datum {&#39;resource&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856&#39;, &#39;datum_id&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Fri Jun 14 18:38:46 2024.  datum {&#39;resource&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856&#39;, &#39;datum_id&#39;: &#39;f82af27c-f2f1-40cd-9d3c-dd12caef8856/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Fri Jun 14 18:38:46 2024.  num_events_label_start_motor = 1
#C Fri Jun 14 18:38:46 2024.  num_events_primary = 5
#C Fri Jun 14 18:38:46 2024.  exit_status = success

#S 91  grid_scan(detectors=[&#39;simdet&#39;], args=&#39;[&#39;m1&#39;, -1, 1, 5, &#39;m2&#39;, -0.5, 0.5, 4, True]&#39;, per_step=&#39;None&#39;)
#D Fri Jun 14 18:38:47 2024
#C Fri Jun 14 18:38:47 2024.  plan_type = generator
#C Fri Jun 14 18:38:47 2024.  uid = 68da3698-bcfa-49b7-95f1-68732545077a
#MD uid = 68da3698-bcfa-49b7-95f1-68732545077a
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD extents = ([-1, 1], [-0.5, 0.5])
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD motors = (&#39;m1&#39;, &#39;m2&#39;)
#MD num_intervals = 19
#MD num_points = 20
#MD pid = 131335
#MD plan_pattern = outer_product
#MD plan_pattern_args = {&#39;args&#39;: [&#34;MyEpicsMotor(prefix=&#39;gp:m1&#39;, name=&#39;m1&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -1, 1, 5, &#34;MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -0.5, 0.5, 4, True]}
#MD plan_pattern_module = bluesky.plan_patterns
#MD proposal_id = training
#MD shape = (5, 4)
#MD snaking = (False, True)
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 11
#L m1  m2  Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  m2_user_setpoint  m1_user_setpoint  simdet
-1.0 -0.5 2.4324190616607666 2 0 152801 166.0 11823332.0 -0.5 -1.0 0
#U 0 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/0
-1.0 -0.16670000000000001 2.9896576404571533 3 1 152804 166.0 11842544.0 -0.16666666666666669 -1.0 0
#U 1 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/1
-1.0 0.16670000000000001 3.6079726219177246 4 2 152807 166.0 11855439.0 0.16666666666666663 -1.0 0
#U 2 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/2
-1.0 0.5 4.195385456085205 4 3 152810 162.0 11495078.0 0.5 -1.0 0
#U 3 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/3
-0.5 0.5 5.010212659835815 5 4 152813 160.0 11413098.0 0.5 -0.5 0
#U 4 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/4
-0.5 0.16670000000000001 5.610433578491211 6 5 152816 162.0 11536244.0 0.16666666666666663 -0.5 0
#U 5 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/5
-0.5 -0.16670000000000001 6.209177017211914 6 6 152819 162.0 11482573.0 -0.16666666666666669 -0.5 0
#U 6 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/6
-0.5 -0.5 6.8145482540130615 7 7 152822 165.0 11796069.0 -0.5 -0.5 0
#U 7 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/7
0.0 -0.5 7.618566989898682 8 8 152825 163.0 11658269.0 -0.5 0.0 0
#U 8 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/8
0.0 -0.16670000000000001 8.219924688339233 8 9 152828 160.0 11410469.0 -0.16666666666666669 0.0 0
#U 9 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/9
0.0 0.16670000000000001 8.803984642028809 9 10 152831 160.0 11401028.0 0.16666666666666663 0.0 0
#U 10 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/10
0.0 0.5 9.42384123802185 9 11 152834 165.0 11798737.0 0.5 0.0 0
#U 11 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/11
0.5 0.5 10.207936763763428 10 12 152837 166.0 11844567.0 0.5 0.5 0
#U 12 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/12
0.5 0.16670000000000001 10.827393054962158 11 13 152840 164.0 11730554.0 0.16666666666666663 0.5 0
#U 13 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/13
0.5 -0.16670000000000001 11.414552211761475 11 14 152843 161.0 11465427.0 -0.16666666666666669 0.5 0
#U 14 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/14
0.5 -0.5 12.03274917602539 12 15 152846 166.0 11827694.0 -0.5 0.5 0
#U 15 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/15
1.0 -0.5 12.833806991577148 13 16 152849 159.0 11382965.0 -0.5 1.0 0
#U 16 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/16
1.0 -0.16670000000000001 13.4334557056427 13 17 152852 162.0 11536706.0 -0.16666666666666669 1.0 0
#U 17 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/17
1.0 0.16670000000000001 14.024195194244385 14 18 152855 163.0 11658095.0 0.16666666666666663 1.0 0
#U 18 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/18
1.0 0.5 14.635875701904297 15 19 152858 164.0 11722735.0 0.5 1.0 0
#U 19 simdet_image a9d9aeef-438c-4073-98a2-1145122fc14c/19
#C Fri Jun 14 18:38:49 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/94d856ae-d787-4a8a-9285_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;run_start&#39;: &#39;68da3698-bcfa-49b7-95f1-68732545077a&#39;}
#C Fri Jun 14 18:38:49 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Fri Jun 14 18:38:50 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Fri Jun 14 18:38:50 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Fri Jun 14 18:38:51 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Fri Jun 14 18:38:52 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Fri Jun 14 18:38:52 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/5&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 5}}
#C Fri Jun 14 18:38:53 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/6&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 6}}
#C Fri Jun 14 18:38:54 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/7&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 7}}
#C Fri Jun 14 18:38:54 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/8&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 8}}
#C Fri Jun 14 18:38:55 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/9&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 9}}
#C Fri Jun 14 18:38:56 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/10&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 10}}
#C Fri Jun 14 18:38:56 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/11&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 11}}
#C Fri Jun 14 18:38:57 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/12&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 12}}
#C Fri Jun 14 18:38:58 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/13&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 13}}
#C Fri Jun 14 18:38:58 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/14&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 14}}
#C Fri Jun 14 18:38:59 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/15&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 15}}
#C Fri Jun 14 18:39:00 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/16&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 16}}
#C Fri Jun 14 18:39:00 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/17&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 17}}
#C Fri Jun 14 18:39:01 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/18&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 18}}
#C Fri Jun 14 18:39:01 2024.  datum {&#39;resource&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c&#39;, &#39;datum_id&#39;: &#39;a9d9aeef-438c-4073-98a2-1145122fc14c/19&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 19}}
#C Fri Jun 14 18:39:01 2024.  num_events_label_start_motor = 1
#C Fri Jun 14 18:39:01 2024.  num_events_primary = 20
#C Fri Jun 14 18:39:01 2024.  exit_status = success

</pre></div></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="bluesky_cheat_sheet.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Bluesky Cheat Sheet</p>
      </div>
    </a>
    <a class="right-next"
       href="_after_measurement.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Accessing data later, after the measurement</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Start-the-instrument-package">Start the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Setup-&amp;-connect-with-EPICS">Setup &amp; connect with EPICS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Diagnostics-(optional)">Diagnostics (optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Read-the-Stats-plugin-signals">Read the Stats plugin signals</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Take-image(s)-with-the-bp.count-plan">Take image(s) with the <code class="docutils literal notranslate"><span class="pre">bp.count</span></code> plan</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Visualize-the-collected-data">Visualize the collected data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#About-the-HDF5-image-file">About the HDF5 image file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#The-(1-D)-bp.scan()-plan-with-one-motor">The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with one motor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#The-(1-D)-bp.scan()-plan-with-two-motors">The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with two motors</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Show-the-sequence-of-motor-positions">Show the sequence of motor positions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#The-(2-D)-bp.grid_scan()-(mesh)-plan">The (2-D) <code class="docutils literal notranslate"><span class="pre">bp.grid_scan()</span></code> (mesh) plan</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Show the sequence of motor positions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#SPEC-data-file">SPEC data file</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/howto/_ad_v_motors.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, APS BCDA.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>