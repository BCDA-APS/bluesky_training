
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Scan Area Detector v. Motor &#8212; APS Bluesky Training</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'howto/_ad_v_motors';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Accessing data later, after the measurement" href="_after_measurement.html" />
    <link rel="prev" title="Bluesky Cheat Sheet" href="bluesky_cheat_sheet.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">APS Bluesky Training</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../instrument/index.html">
    Instrument
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../example/index.html">
    Examples
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutor/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../changes.html">
    Changes
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../instrument/index.html">
    Instrument
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../example/index.html">
    Examples
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutor/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../changes.html">
    Changes
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="bluesky_cheat_sheet.html">Bluesky Cheat Sheet</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Scan Area Detector v. Motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_after_measurement.html">Accessing data later, after the measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="_basic_aps_info.html">APS Accelerator Information for Beamlines</a></li>
<li class="toctree-l1"><a class="reference internal" href="_basic_motor_scaler_scan.html">Minimal: Scan scaler <em>vs</em> motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_bluesky_queueserver.html">First steps with bluesky-queueserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="_count_scaler.html">Count the scaler</a></li>
<li class="toctree-l1"><a class="reference internal" href="_custom_heater_positioner.html">Heater Simulation using synApps epid and transform records</a></li>
<li class="toctree-l1"><a class="reference internal" href="_custom_plan.html">Custom bluesky plan</a></li>

<li class="toctree-l1"><a class="reference internal" href="_doodle.html">Linux Command &amp; Wait for Finish</a></li>
<li class="toctree-l1"><a class="reference internal" href="_dynamic_limits_2motor.html">Dynamic Limits for Two Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="_epics_proc_field.html">Trigger a Device with the EPICS record .PROC field</a></li>
<li class="toctree-l1"><a class="reference internal" href="_images_darks_flats.html">Images, Darks, &amp; whites with EPICS area detector, ophyd, and Bluesky</a></li>
<li class="toctree-l1"><a class="reference internal" href="_lineup_1d_peak.html">Lineup a 1-D peak : scan detector <em>v</em> motor</a></li>
<li class="toctree-l1"><a class="reference internal" href="_locate_image_peak.html">Locate peak on 2-D area detector image</a></li>
<li class="toctree-l1"><a class="reference internal" href="_plot_x_y_databroker.html">Plot x, y data from a databroker run</a></li>
<li class="toctree-l1"><a class="reference internal" href="_synapps_busy.html">synApps <em>busy</em> record</a></li>
<li class="toctree-l1"><a class="reference internal" href="_synapps_sscan_1d_flyer.html">synApps <em>sscan</em> as 1D Flyer</a></li>
<li class="toctree-l1"><a class="reference internal" href="_temperature_controller_swait.html">Simulate a temperature controller with an EPICS <code class="docutils literal notranslate"><span class="pre">swait</span></code> record</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">How-To Guides</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Scan Area Detector v. Motor</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Scan-Area-Detector-v.-Motor">
<h1>Scan Area Detector v. Motor<a class="headerlink" href="#Scan-Area-Detector-v.-Motor" title="Link to this heading">#</a></h1>
<h3><p>Goals</p>
</h3><ul class="simple">
<li><p>☒ <strong>Use EPICS motor(s):</strong></p>
<ul>
<li><p>☒ Record current value (readback)</p></li>
<li><p>☒ Record commanded value (setpoint)</p></li>
</ul>
</li>
<li><p>☒ <strong>Use EPICS area detector:</strong></p>
<ul>
<li><p>☒ For each image</p>
<ul>
<li><p>☒ Write image to HDF5 file</p></li>
<li><p>☒ Measure total counts in image</p></li>
<li><p>☒ Measure maximum counts in image</p></li>
<li><p>☒ Note the image’s “unique ID”</p></li>
</ul>
</li>
</ul>
</li>
<li><p>☒ <strong>Step scan motor and collect n image frame(s) at each step:</strong></p>
<ul>
<li><p>☒ Plan: count, just collect image(s)</p></li>
<li><p>☒ Plan: scan with one motor</p></li>
<li><p>☒ Plan: scan with two motors</p></li>
<li><p>☒ Plan: grid_scan with two motors</p></li>
</ul>
</li>
<li><p>☒ <strong>Collect data in a SPEC data file.</strong></p></li>
</ul>
<section id="Start-the-instrument-package">
<h2>Start the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> package<a class="headerlink" href="#Start-the-instrument-package" title="Link to this heading">#</a></h2>
<p>Our instrument package is in the <code class="docutils literal notranslate"><span class="pre">bluesky</span></code> subdirectory, so we add that to the search path before importing it.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pathlib</span><span class="o">,</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">()</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;bluesky&quot;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">instrument.collection</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/prjemian/bluesky/instrument/_iconfig.py
Activating auto-logging. Current session state plus future input saved.
Filename       : /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/.logs/ipython_console.log
Mode           : rotate
Output logging : True
Raw input log  : False
Timestamping   : True
State          : active
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
I Sat-13:18:30 - ############################################################ startup
I Sat-13:18:30 - logging started
I Sat-13:18:30 - logging level = 10
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/session_logs.py
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/collection.py
I Sat-13:18:30 - CONDA_PREFIX = /home/prjemian/.conda/envs/bluesky_2024_2
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Exception reporting mode: Minimal
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
I Sat-13:18:30 - xmode exception level: &#39;Minimal&#39;
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/mpl/notebook.py
I Sat-13:18:30 - #### Bluesky Framework ####
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/framework/check_python.py
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/framework/check_bluesky.py
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/framework/initialize.py
I Sat-13:18:30 - RunEngine metadata saved in directory: /home/prjemian/.config/Bluesky_RunEngine_md
I Sat-13:18:30 - using databroker catalog &#39;training&#39;
I Sat-13:18:30 - using ophyd control layer: pyepics
I Sat-13:18:30 - Using EPICS PV gp:gp:int20 for scan_id
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/framework/metadata.py
I Sat-13:18:30 - #### Devices ####
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/devices/area_detector.py
I Sat-13:18:30 - /home/prjemian/bluesky/instrument/devices/calculation_records.py
I Sat-13:18:35 - /home/prjemian/bluesky/instrument/devices/fourc_diffractometer.py
I Sat-13:18:35 - /home/prjemian/bluesky/instrument/devices/ioc_stats.py
I Sat-13:18:35 - /home/prjemian/bluesky/instrument/devices/kohzu_monochromator.py
I Sat-13:18:35 - /home/prjemian/bluesky/instrument/devices/motors.py
I Sat-13:18:36 - /home/prjemian/bluesky/instrument/devices/noisy_detector.py
I Sat-13:18:36 - /home/prjemian/bluesky/instrument/devices/scaler.py
I Sat-13:18:37 - /home/prjemian/bluesky/instrument/devices/shutter_simulator.py
I Sat-13:18:37 - /home/prjemian/bluesky/instrument/devices/simulated_fourc.py
I Sat-13:18:37 - /home/prjemian/bluesky/instrument/devices/simulated_kappa.py
I Sat-13:18:37 - /home/prjemian/bluesky/instrument/devices/slits.py
I Sat-13:18:38 - /home/prjemian/bluesky/instrument/devices/sixc_diffractometer.py
I Sat-13:18:38 - /home/prjemian/bluesky/instrument/devices/temperature_signal.py
I Sat-13:18:38 - #### Callbacks ####
I Sat-13:18:38 - /home/prjemian/bluesky/instrument/callbacks/spec_data_file_writer.py
I Sat-13:18:38 - #### Plans ####
I Sat-13:18:38 - /home/prjemian/bluesky/instrument/plans/lup_plan.py
I Sat-13:18:38 - /home/prjemian/bluesky/instrument/plans/peak_finder_example.py
I Sat-13:18:38 - /home/prjemian/bluesky/instrument/utils/image_analysis.py
I Sat-13:18:38 - /home/prjemian/bluesky/instrument/plans/randomize_noisy_peak_plan.py
I Sat-13:18:38 - #### Utilities ####
I Sat-13:18:38 - writing to SPEC file: /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/20240615-131838.dat
I Sat-13:18:38 -    &gt;&gt;&gt;&gt;   Using default SPEC file name   &lt;&lt;&lt;&lt;
I Sat-13:18:38 -    file will be created when bluesky ends its next scan
I Sat-13:18:38 -    to change SPEC file, use command:   newSpecFile(&#39;title&#39;)
I Sat-13:18:38 - #### Startup is complete. ####
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Create a custom area detector class</strong> with our own IOC prefix, add ROI and STATS plugins, and connect with local directories:</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">apstools.devices</span> <span class="kn">import</span> <span class="n">SingleTrigger_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector</span> <span class="kn">import</span> <span class="n">ADComponent</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector</span> <span class="kn">import</span> <span class="n">DetectorBase</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">ImagePlugin_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">PvaPlugin_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">ROIPlugin_V34</span>
<span class="kn">from</span> <span class="nn">ophyd.areadetector.plugins</span> <span class="kn">import</span> <span class="n">StatsPlugin_V34</span>
<span class="kn">import</span> <span class="nn">hdf5plugin</span>  <span class="c1"># needed to read LZ4-compressed image from HDF5 file</span>

<span class="kn">from</span> <span class="nn">instrument.devices.area_detector</span> <span class="kn">import</span> <span class="n">MyHDF5Plugin</span>
<span class="kn">from</span> <span class="nn">instrument.devices.area_detector</span> <span class="kn">import</span> <span class="n">SimDetectorCam_V34</span>

<span class="c1"># for my IOC, these parameters apply:</span>
<span class="n">AD_IOC</span> <span class="o">=</span> <span class="s2">&quot;kad:&quot;</span>
<span class="n">FILE_BASE_IOC</span> <span class="o">=</span> <span class="s2">&quot;/tmp/&quot;</span>
<span class="n">FILE_BASE_BLUESKY</span> <span class="o">=</span> <span class="s2">&quot;/mnt/iockad/tmp/&quot;</span>

<span class="k">class</span> <span class="nc">SimDetector_V34</span><span class="p">(</span><span class="n">SingleTrigger_V34</span><span class="p">,</span> <span class="n">DetectorBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ADSimDetector</span>

<span class="sd">    SingleTrigger:</span>

<span class="sd">    * stop any current acquisition</span>
<span class="sd">    * sets image_mode to &#39;Multiple&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cam</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">SimDetectorCam_V34</span><span class="p">,</span> <span class="s2">&quot;cam1:&quot;</span><span class="p">)</span>
    <span class="n">hdf1</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span>
        <span class="n">MyHDF5Plugin</span><span class="p">,</span>
        <span class="s2">&quot;HDF1:&quot;</span><span class="p">,</span>
        <span class="n">write_path_template</span><span class="o">=</span><span class="n">FILE_BASE_IOC</span><span class="p">,</span>
        <span class="n">read_path_template</span><span class="o">=</span><span class="n">FILE_BASE_BLUESKY</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">ImagePlugin_V34</span><span class="p">,</span> <span class="s2">&quot;image1:&quot;</span><span class="p">)</span>
    <span class="n">pva</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">PvaPlugin_V34</span><span class="p">,</span> <span class="s2">&quot;Pva1:&quot;</span><span class="p">)</span>
    <span class="n">roi1</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">ROIPlugin_V34</span><span class="p">,</span> <span class="s2">&quot;ROI1:&quot;</span><span class="p">)</span>
    <span class="n">stats1</span> <span class="o">=</span> <span class="n">ADComponent</span><span class="p">(</span><span class="n">StatsPlugin_V34</span><span class="p">,</span> <span class="s2">&quot;Stats1:&quot;</span><span class="p">)</span>

<span class="n">simdet</span> <span class="o">=</span> <span class="n">SimDetector_V34</span><span class="p">(</span><span class="n">AD_IOC</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;simdet&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Setup-&amp;-connect-with-EPICS">
<h2>Setup &amp; connect with EPICS<a class="headerlink" href="#Setup-&-connect-with-EPICS" title="Link to this heading">#</a></h2>
<p>Search the ophyd object registry (<code class="docutils literal notranslate"><span class="pre">oregistry</span></code>) for the detector and motors. Verify that each is connected to EPICS.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">nm</span> <span class="ow">in</span> <span class="s2">&quot;simdet m1 m2&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">oregistry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">nm</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">connected</span><span class="si">=!r}</span><span class="s2"> </span><span class="si">{</span><span class="n">nm</span><span class="si">!r}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
obj.connected=True &#39;simdet&#39;
obj.connected=True &#39;m1&#39;
obj.connected=True &#39;m2&#39;
</pre></div></div>
</div>
<p><strong>Configure the area detector</strong> to:</p>
<ul class="simple">
<li><p>Collect <span class="math notranslate nohighlight">\(n\)</span> image frame(s) for each press of the <em>Acquire</em> button.</p></li>
<li><p>Save image(s) to HDF5.</p></li>
<li><p>Record total counts in the image.</p></li>
<li><p>Record maximum counts in the image.</p></li>
<li><p>Record the unique ID of the image.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ad_setup</span><span class="p">(</span><span class="n">det</span><span class="p">):</span>
    <span class="n">det</span><span class="o">.</span><span class="n">wait_for_connection</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">roi1</span><span class="o">.</span><span class="n">nd_array_port</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;SIM1&quot;</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">nd_array_port</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;ROI1&quot;</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">missing_plugins</span><span class="p">()</span>

    <span class="n">det</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;num_images&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">create_directory</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;compression&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;LZ4&quot;</span>

    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">max_value</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">total</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">unique_id</span><span class="o">.</span><span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;hinted&quot;</span>

    <span class="n">det</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;wait_for_plugins&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Yes&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;blocking_callbacks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;No&quot;</span>
    <span class="n">det</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;blocking_callbacks&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;No&quot;</span>

<span class="n">ad_setup</span><span class="p">(</span><span class="n">simdet</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Diagnostics-(optional)">
<h2>Diagnostics (optional)<a class="headerlink" href="#Diagnostics-(optional)" title="Link to this heading">#</a></h2>
<p>These steps are optional.</p>
<ul class="simple">
<li><p><strong>Show the data</strong> from area detector <code class="docutils literal notranslate"><span class="pre">simdet</span></code>. This is the data collected by the <code class="docutils literal notranslate"><span class="pre">RE</span></code> during a run..</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simdet</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;simdet_stats1_unique_id&#39;,
              {&#39;value&#39;: 152858, &#39;timestamp&#39;: 1718408341.829117}),
             (&#39;simdet_stats1_max_value&#39;,
              {&#39;value&#39;: 164.0, &#39;timestamp&#39;: 1718408341.829133}),
             (&#39;simdet_stats1_total&#39;,
              {&#39;value&#39;: 11722735.0, &#39;timestamp&#39;: 1718408341.829158})])
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Show how</strong> <code class="docutils literal notranslate"><span class="pre">simdet</span></code> is configured to collect <span class="math notranslate nohighlight">\(n\)</span> frames per point.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image frames per point:&quot;</span><span class="p">,</span> <span class="n">simdet</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">[</span><span class="s2">&quot;num_images&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Image frames per point: 3
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Show the staging configuration</strong> for <code class="docutils literal notranslate"><span class="pre">simdet</span></code>.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.cam&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.hdf1&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">hdf1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.roi1&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">roi1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
<span class="n">pprint</span><span class="p">({</span><span class="s2">&quot;simdet.stats1&quot;</span><span class="p">:</span> <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">stage_sigs</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;simdet&#39;: OrderedDict([(&#39;cam.acquire&#39;, 0), (&#39;cam.image_mode&#39;, 1)])}
{&#39;simdet.cam&#39;: OrderedDict([(&#39;num_images&#39;, 3), (&#39;wait_for_plugins&#39;, &#39;Yes&#39;)])}
{&#39;simdet.hdf1&#39;: OrderedDict([(&#39;enable&#39;, 1),
                             (&#39;blocking_callbacks&#39;, &#39;No&#39;),
                             (&#39;parent.cam.array_callbacks&#39;, 1),
                             (&#39;create_directory&#39;, -3),
                             (&#39;auto_increment&#39;, &#39;Yes&#39;),
                             (&#39;array_counter&#39;, 0),
                             (&#39;auto_save&#39;, &#39;Yes&#39;),
                             (&#39;num_capture&#39;, 0),
                             (&#39;file_template&#39;, &#39;%s%s_%6.6d.h5&#39;),
                             (&#39;file_write_mode&#39;, &#39;Stream&#39;),
                             (&#39;capture&#39;, 1),
                             (&#39;compression&#39;, &#39;LZ4&#39;)])}
{&#39;simdet.roi1&#39;: OrderedDict([(&#39;enable&#39;, 1),
                             (&#39;blocking_callbacks&#39;, &#39;Yes&#39;),
                             (&#39;parent.cam.array_callbacks&#39;, 1)])}
{&#39;simdet.stats1&#39;: OrderedDict([(&#39;enable&#39;, 1),
                               (&#39;blocking_callbacks&#39;, &#39;Yes&#39;),
                               (&#39;parent.cam.array_callbacks&#39;, 1)])}
</pre></div></div>
</div>
<ul class="simple">
<li><p><strong>Show how the area detector ports are connected</strong> in a diagram.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simdet</span><span class="o">.</span><span class="n">visualize_asyn_digraph</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_16_0.png" src="../_images/howto__ad_v_motors_16_0.png" />
</div>
</div>
<section id="Read-the-Stats-plugin-signals">
<h3>Read the Stats plugin signals<a class="headerlink" href="#Read-the-Stats-plugin-signals" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>The plan below reads the signals from <code class="docutils literal notranslate"><span class="pre">simdet.stats1</span></code> multiple times. Since <code class="docutils literal notranslate"><span class="pre">simdet</span></code> itself is not included in the list of detectors, it will not be triggered (and thus will not produce new images). One can notice that the <code class="docutils literal notranslate"><span class="pre">unique_id</span></code> does not change. For clarity, the command is split into multiple lines.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="p">(</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">count</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">unique_id</span><span class="p">,</span>
            <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="n">simdet</span><span class="o">.</span><span class="n">stats1</span><span class="o">.</span><span class="n">max_value</span>
            <span class="p">],</span>
        <span class="n">num</span><span class="o">=</span><span class="mi">5</span>
        <span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 92     Time: 2024-06-15 13:18:40
Persistent Unique Scan ID: &#39;ceaecdd7-e1af-411f-94f2-c14d5d3debab&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+-------------------------+---------------------+-------------------------+
|   seq_num |       time | simdet_stats1_unique_id | simdet_stats1_total | simdet_stats1_max_value |
+-----------+------------+-------------------------+---------------------+-------------------------+
|         1 | 13:18:41.1 |                  152858 |            11722735 |                     164 |
|         2 | 13:18:41.5 |                  152858 |            11722735 |                     164 |
|         3 | 13:18:41.9 |                  152858 |            11722735 |                     164 |
|         4 | 13:18:42.3 |                  152858 |            11722735 |                     164 |
|         5 | 13:18:42.6 |                  152858 |            11722735 |                     164 |
+-----------+------------+-------------------------+---------------------+-------------------------+
generator count [&#39;ceaecdd7&#39;] (scan num: 92)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;ceaecdd7-e1af-411f-94f2-c14d5d3debab&#39;,)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_18_4.png" src="../_images/howto__ad_v_motors_18_4.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assume our run is the most recent one in the catalog</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">run</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Read the primary data from the most recent run</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
run=&lt;BlueskyRun uid=&#39;ceaecdd7-e1af-411f-94f2-c14d5d3debab&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/prjemian/.conda/envs/bluesky_2024_2/lib/python3.11/site-packages/databroker/intake_xarray_core/base.py:23: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  &#39;dims&#39;: dict(self._ds.dims),
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 160B
Dimensions:                  (time: 5)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Data variables:
    simdet_stats1_unique_id  (time) int64 40B 152858 152858 152858 152858 152858
    simdet_stats1_total      (time) float64 40B 1.172e+07 ... 1.172e+07
    simdet_stats1_max_value  (time) float64 40B 164.0 164.0 164.0 164.0 164.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-83c0b4f4-5061-4542-9444-a04c6ef6f9dc' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-83c0b4f4-5061-4542-9444-a04c6ef6f9dc' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-239a76a3-1b74-4f89-9792-e320f8361709' class='xr-section-summary-in' type='checkbox'  checked><label for='section-239a76a3-1b74-4f89-9792-e320f8361709' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-b4e0dbc2-4132-440c-a676-7c27b4d74f5f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b4e0dbc2-4132-440c-a676-7c27b4d74f5f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-63d1277d-92e9-4bc9-a040-5050becf8582' class='xr-var-data-in' type='checkbox'><label for='data-63d1277d-92e9-4bc9-a040-5050becf8582' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c7aa3551-de29-4cbb-b99e-6788296aef58' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c7aa3551-de29-4cbb-b99e-6788296aef58' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152858 152858 152858 152858 152858</div><input id='attrs-873737b5-9998-4398-be80-351f081a98f4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-873737b5-9998-4398-be80-351f081a98f4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e7e5ae41-2cc8-4a0f-a59b-1dd9d0070cd0' class='xr-var-data-in' type='checkbox'><label for='data-e7e5ae41-2cc8-4a0f-a59b-1dd9d0070cd0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet_stats1_unique_id</dd></dl></div><div class='xr-var-data'><pre>array([152858, 152858, 152858, 152858, 152858])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.172e+07 1.172e+07 ... 1.172e+07</div><input id='attrs-9f150ed4-0ccd-4335-8e84-893c52de946d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9f150ed4-0ccd-4335-8e84-893c52de946d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8101fc6d-008e-4fcf-b742-64f3c9c595ec' class='xr-var-data-in' type='checkbox'><label for='data-8101fc6d-008e-4fcf-b742-64f3c9c595ec' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet_stats1_total</dd></dl></div><div class='xr-var-data'><pre>array([11722735., 11722735., 11722735., 11722735., 11722735.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>164.0 164.0 164.0 164.0 164.0</div><input id='attrs-84eea06e-793e-4319-8e44-7a850a14547c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-84eea06e-793e-4319-8e44-7a850a14547c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ed98ca34-daaa-44a9-8eb9-5e08068eda57' class='xr-var-data-in' type='checkbox'><label for='data-ed98ca34-daaa-44a9-8eb9-5e08068eda57' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet_stats1_max_value</dd></dl></div><div class='xr-var-data'><pre>array([164., 164., 164., 164., 164.])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d9ce164f-dd10-4e61-b3a8-d8133577418d' class='xr-section-summary-in' type='checkbox'  ><label for='section-d9ce164f-dd10-4e61-b3a8-d8133577418d' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-43535840-817e-444d-a6f1-b653962a05c3' class='xr-index-data-in' type='checkbox'/><label for='index-43535840-817e-444d-a6f1-b653962a05c3' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718475521.1052098,  1718475521.527617, 1718475521.9094555,
       1718475522.3039458, 1718475522.6947227],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f7a2fbe0-d67e-40c4-aeda-3468394e2b18' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f7a2fbe0-d67e-40c4-aeda-3468394e2b18' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
</section>
</section>
<section id="Take-image(s)-with-the-bp.count-plan">
<h2>Take image(s) with the <code class="docutils literal notranslate"><span class="pre">bp.count</span></code> plan<a class="headerlink" href="#Take-image(s)-with-the-bp.count-plan" title="Link to this heading">#</a></h2>
<p>Collect 5 sets of images (3-frames each as configured above).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">count</span><span class="p">([</span><span class="n">simdet</span><span class="p">],</span> <span class="n">num</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;uids=!r&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 93     Time: 2024-06-15 13:18:44
Persistent Unique Scan ID: &#39;f39f2eb2-fc04-4696-ac26-245cd574f7c2&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+-------------------------+-------------------------+---------------------+
|         1 | 13:18:45.1 |                  152861 |                     164 |            11658834 |
|         2 | 13:18:45.5 |                  152864 |                     164 |            11710598 |
|         3 | 13:18:45.9 |                  152867 |                     163 |            11537287 |
|         4 | 13:18:46.3 |                  152870 |                     159 |            11360372 |
|         5 | 13:18:46.8 |                  152873 |                     166 |            11817560 |
+-----------+------------+-------------------------+-------------------------+---------------------+
generator count [&#39;f39f2eb2&#39;] (scan num: 93)
uids=!r
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_21_3.png" src="../_images/howto__ad_v_motors_21_3.png" />
</div>
</div>
<section id="Visualize-the-collected-data">
<h3>Visualize the collected data<a class="headerlink" href="#Visualize-the-collected-data" title="Link to this heading">#</a></h3>
<p>Let’s examine the data from the most recent run in the catalog:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the dataset from the most recent run</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1">#  Extract the image data</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>

<span class="c1"># Print the shape of the image data</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Display the dataset</span>
<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
image_data.shape=(5, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 16MB
Dimensions:                  (time: 5, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 16MB 10 9 ... 11
    simdet_stats1_unique_id  (time) int64 40B 152861 152864 152867 152870 152873
    simdet_stats1_max_value  (time) float64 40B 164.0 164.0 163.0 159.0 166.0
    simdet_stats1_total      (time) float64 40B 1.166e+07 ... 1.182e+07</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-32188741-d2f3-43bc-9cf2-b73c11a796e2' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-32188741-d2f3-43bc-9cf2-b73c11a796e2' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-b759b076-5748-459e-8fb5-dfb99831a734' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b759b076-5748-459e-8fb5-dfb99831a734' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-044de852-17d8-4426-9f77-9f3858f91408' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-044de852-17d8-4426-9f77-9f3858f91408' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-31c03d83-becd-48f4-a779-eb4084278a83' class='xr-var-data-in' type='checkbox'><label for='data-31c03d83-becd-48f4-a779-eb4084278a83' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9e83bff4-448f-4993-8fbb-8b11e6a63447' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9e83bff4-448f-4993-8fbb-8b11e6a63447' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>10 9 14 7 5 9 ... 7 9 10 13 10 11</div><input id='attrs-6a5105db-0e63-404c-aaae-e4748f087871' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6a5105db-0e63-404c-aaae-e4748f087871' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bfc25c0e-3e33-4a91-998c-21af1d9fb5f5' class='xr-var-data-in' type='checkbox'><label for='data-bfc25c0e-3e33-4a91-998c-21af1d9fb5f5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[10,  9, 14, ...,  6, 11, 13],
         [ 8,  8, 13, ..., 10,  6, 11],
         [ 7,  8,  7, ..., 10, 12,  6],
         ...,
         [11,  5,  6, ...,  7,  7, 13],
         [13,  5,  8, ...,  8, 14,  8],
         [14, 10, 10, ...,  5, 13,  7]],

        [[ 5,  8,  7, ...,  6,  6, 11],
         [ 8,  5, 13, ...,  6, 14, 12],
         [14, 14, 14, ...,  9,  7, 12],
         ...,
         [14,  9,  9, ...,  5,  8, 12],
         [10, 13,  9, ..., 13,  8,  7],
         [14, 13, 13, ...,  6,  5, 14]],

        [[ 8, 11,  9, ...,  6, 14,  6],
         [ 8, 14, 12, ..., 14, 14, 10],
         [10,  5, 11, ..., 10,  8, 14],
         ...,
...
         ...,
         [10,  6, 14, ..., 11, 11, 14],
         [ 5, 11,  5, ..., 12, 12,  6],
         [ 6,  7, 11, ...,  6,  7,  6]],

        [[ 6,  8, 14, ..., 12,  5,  8],
         [11, 10, 13, ...,  5,  7,  8],
         [ 5,  5,  5, ..., 12,  5, 11],
         ...,
         [13, 12,  9, ...,  9,  9, 12],
         [10, 12, 14, ...,  9,  8,  6],
         [13,  7,  7, ...,  7, 10, 11]],

        [[13,  7,  5, ..., 11,  5,  5],
         [ 6,  9,  8, ...,  8,  7, 10],
         [ 7,  6,  6, ..., 13, 12,  6],
         ...,
         [12, 14,  7, ...,  5, 11,  9],
         [12, 13,  9, ..., 12, 14,  6],
         [14,  7, 14, ..., 13, 10, 11]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152861 152864 152867 152870 152873</div><input id='attrs-e6f9267c-eb36-40be-bf2d-13f0239633d3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e6f9267c-eb36-40be-bf2d-13f0239633d3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8732a11b-9cf7-4d63-9dc8-397f14245f42' class='xr-var-data-in' type='checkbox'><label for='data-8732a11b-9cf7-4d63-9dc8-397f14245f42' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152861, 152864, 152867, 152870, 152873])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>164.0 164.0 163.0 159.0 166.0</div><input id='attrs-97aa71eb-8f5e-4f03-a830-2632611b306f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-97aa71eb-8f5e-4f03-a830-2632611b306f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0c56610b-dc4f-4f64-8565-f1edc877a852' class='xr-var-data-in' type='checkbox'><label for='data-0c56610b-dc4f-4f64-8565-f1edc877a852' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([164., 164., 163., 159., 166.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.166e+07 1.171e+07 ... 1.182e+07</div><input id='attrs-e73006a4-9f4b-4a0b-8592-87c2bb56eb64' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e73006a4-9f4b-4a0b-8592-87c2bb56eb64' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3a49fad0-8781-4e59-8879-f478cbc2377d' class='xr-var-data-in' type='checkbox'><label for='data-3a49fad0-8781-4e59-8879-f478cbc2377d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11658834., 11710598., 11537287., 11360372., 11817560.])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-fc1f7a84-5cb8-46c2-b9c1-af7f08f99f10' class='xr-section-summary-in' type='checkbox'  ><label for='section-fc1f7a84-5cb8-46c2-b9c1-af7f08f99f10' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-8db6f19f-06ff-4fa6-9a05-25db516e817d' class='xr-index-data-in' type='checkbox'/><label for='index-8db6f19f-06ff-4fa6-9a05-25db516e817d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718475525.1200914,  1718475525.555351,  1718475525.964354,
        1718475526.390957, 1718475526.8042006],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-794a2e32-fa32-4067-9043-3c4e404fe649' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-794a2e32-fa32-4067-9043-3c4e404fe649' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<ul class="simple">
<li><p><strong>Display the first image frame</strong> from the first <em>point</em>.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">()</span>  <span class="c1"># Plot the first frame.</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fddf7c27d50&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/howto__ad_v_motors_25_1.png" src="../_images/howto__ad_v_motors_25_1.png" />
</div>
</div>
</section>
<section id="About-the-HDF5-image-file">
<h3>About the HDF5 image file<a class="headerlink" href="#About-the-HDF5-image-file" title="Link to this heading">#</a></h3>
<p>Information about the HDF5 file is saved as a <code class="docutils literal notranslate"><span class="pre">resource</span></code> document in the catalog. This command shows the content of that document.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">resources</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">_resources</span>
<span class="n">resources</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Resource({&#39;path_semantics&#39;: &#39;posix&#39;,
 &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3},
 &#39;resource_path&#39;: &#39;mnt/iockad/tmp/1245c370-4953-4ff3-8982_000000.h5&#39;,
 &#39;root&#39;: &#39;/&#39;,
 &#39;run_start&#39;: &#39;f39f2eb2-fc04-4696-ac26-245cd574f7c2&#39;,
 &#39;spec&#39;: &#39;AD_HDF5&#39;,
 &#39;uid&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3&#39;})]
</pre></div></div>
</div>
<p>Starting with this <code class="docutils literal notranslate"><span class="pre">resources</span></code> object (a Python <code class="docutils literal notranslate"><span class="pre">list</span></code>), this command <strong>reconstructs the image file name</strong>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;resource_path&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/mnt/iockad/tmp/1245c370-4953-4ff3-8982_000000.h5&#39;
</pre></div></div>
</div>
<p><strong>Show that this file is recognized</strong> on the file system available to Bluesky.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">image_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">resources</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;resource_path&quot;</span><span class="p">])</span>
<span class="n">image_file</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
</section>
</section>
<section id="The-(1-D)-bp.scan()-plan-with-one-motor">
<h2>The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with one motor<a class="headerlink" href="#The-(1-D)-bp.scan()-plan-with-one-motor" title="Link to this heading">#</a></h2>
<p>Step scan a motor (m1); at each step:</p>
<ul class="simple">
<li><p>Measure 3 images (as configured above during detector staging).</p></li>
<li><p>Record total counts.</p></li>
<li><p>Record maximum counts value.</p></li>
</ul>
<p>In the interest of brevity here, further graphical data visualization will be turned off. Refer to the section above for the visualization steps. They are identical for each type of scan.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bec</span><span class="o">.</span><span class="n">disable_plots</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p><strong>Run</strong> the scan.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">([</span><span class="n">simdet</span><span class="p">],</span> <span class="n">m1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 94     Time: 2024-06-15 13:18:49
Persistent Unique Scan ID: &#39;03dde617-eb69-4b66-abe5-8595de04051d&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time |         m1 | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+------------+-------------------------+-------------------------+---------------------+
|         1 | 13:18:52.0 |    -1.0000 |                  152876 |                     160 |            11445712 |
|         2 | 13:18:52.8 |    -0.5000 |                  152879 |                     163 |            11658331 |
|         3 | 13:18:53.6 |     0.0000 |                  152882 |                     162 |            11535839 |
|         4 | 13:18:54.4 |     0.5000 |                  152885 |                     165 |            11799101 |
|         5 | 13:18:55.2 |     1.0000 |                  152888 |                     166 |            11824045 |
+-----------+------------+------------+-------------------------+-------------------------+---------------------+
generator scan [&#39;03dde617&#39;] (scan num: 94)
image_data.shape=(5, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 16MB
Dimensions:                  (time: 5, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 16MB 8 10 ... 9 6
    simdet_stats1_unique_id  (time) int64 40B 152876 152879 152882 152885 152888
    simdet_stats1_max_value  (time) float64 40B 160.0 163.0 162.0 165.0 166.0
    simdet_stats1_total      (time) float64 40B 1.145e+07 ... 1.182e+07
    m1                       (time) float64 40B -1.0 -0.5 0.0 0.5 1.0
    m1_user_setpoint         (time) float64 40B -1.0 -0.5 0.0 0.5 1.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-d1783e76-0633-4ed8-bc8a-ad9098a9ab63' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d1783e76-0633-4ed8-bc8a-ad9098a9ab63' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-93bc7d08-9e3b-4bfd-8010-4d646d1abcd9' class='xr-section-summary-in' type='checkbox'  checked><label for='section-93bc7d08-9e3b-4bfd-8010-4d646d1abcd9' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-d85205dd-597c-4323-9587-c3fba25c41bc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d85205dd-597c-4323-9587-c3fba25c41bc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a7875ad-b59b-47b4-a0af-07ea8ee22365' class='xr-var-data-in' type='checkbox'><label for='data-2a7875ad-b59b-47b4-a0af-07ea8ee22365' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e7009529-18d4-44de-a264-7e281afa0789' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e7009529-18d4-44de-a264-7e281afa0789' class='xr-section-summary' >Data variables: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>8 10 7 5 7 8 5 ... 11 6 8 10 12 9 6</div><input id='attrs-282dc781-ee29-4b63-a1be-2295d778767d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-282dc781-ee29-4b63-a1be-2295d778767d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-481beffb-c8d0-451a-9c61-5f88b3e4341f' class='xr-var-data-in' type='checkbox'><label for='data-481beffb-c8d0-451a-9c61-5f88b3e4341f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[ 8, 10,  7, ..., 10, 12, 13],
         [ 6, 14,  5, ...,  8, 13, 12],
         [ 5, 11, 10, ...,  9, 13,  5],
         ...,
         [10,  9, 14, ...,  7, 14,  9],
         [14, 12, 10, ...,  5,  7, 12],
         [10,  9, 10, ..., 10,  6,  7]],

        [[13,  8, 13, ...,  6, 11, 11],
         [14, 10, 13, ..., 10,  5,  6],
         [ 9,  9, 14, ..., 11,  5,  9],
         ...,
         [ 6,  8,  7, ..., 12,  6, 11],
         [ 7,  8, 13, ..., 13, 10,  9],
         [ 5,  6, 14, ...,  5,  8,  6]],

        [[ 9,  7, 13, ...,  7,  6,  7],
         [14,  9, 10, ..., 12, 10,  7],
         [ 7, 14, 11, ..., 11, 14, 12],
         ...,
...
         ...,
         [ 6, 10,  6, ...,  6, 10, 10],
         [11, 13,  5, ...,  7, 12,  8],
         [ 5, 13,  7, ..., 10, 14, 13]],

        [[13,  5, 13, ..., 11,  9, 12],
         [12,  7,  9, ..., 10,  5, 14],
         [ 8, 11, 12, ...,  7, 14, 10],
         ...,
         [13, 10, 12, ...,  7, 14, 12],
         [ 8, 12, 10, ..., 12,  5,  6],
         [ 5,  6, 14, ..., 12, 13, 12]],

        [[13,  5,  7, ...,  9,  5,  5],
         [ 8,  6,  7, ...,  7, 10, 10],
         [ 9, 13, 11, ..., 13, 13, 10],
         ...,
         [10, 14,  8, ...,  5,  5,  9],
         [ 6, 10, 11, ..., 13,  6,  9],
         [12, 14, 10, ..., 12,  9,  6]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152876 152879 152882 152885 152888</div><input id='attrs-88b9397e-52dd-4566-a517-cc5b72d70d32' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-88b9397e-52dd-4566-a517-cc5b72d70d32' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7bfb0e54-2ef2-4c92-912e-8e7af3bd7ba8' class='xr-var-data-in' type='checkbox'><label for='data-7bfb0e54-2ef2-4c92-912e-8e7af3bd7ba8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152876, 152879, 152882, 152885, 152888])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>160.0 163.0 162.0 165.0 166.0</div><input id='attrs-7aa7b3bf-5de1-46fa-b16b-f2bb49df0b81' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7aa7b3bf-5de1-46fa-b16b-f2bb49df0b81' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9b6d3311-c634-4c46-a113-c06f2bda179d' class='xr-var-data-in' type='checkbox'><label for='data-9b6d3311-c634-4c46-a113-c06f2bda179d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([160., 163., 162., 165., 166.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.145e+07 1.166e+07 ... 1.182e+07</div><input id='attrs-bcccfed3-4467-425c-921d-c58a51457bf8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bcccfed3-4467-425c-921d-c58a51457bf8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-575082b8-e747-4d10-9f8f-33f7fbcb7424' class='xr-var-data-in' type='checkbox'><label for='data-575082b8-e747-4d10-9f8f-33f7fbcb7424' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11445712., 11658331., 11535839., 11799101., 11824045.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-62b31496-26de-4cac-a549-3fa0e8cac49b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-62b31496-26de-4cac-a549-3fa0e8cac49b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e06a9e90-3eda-4e60-8383-f39abf091695' class='xr-var-data-in' type='checkbox'><label for='data-e06a9e90-3eda-4e60-8383-f39abf091695' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-8b4614d1-788a-4ff8-a685-0bb67755cab8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8b4614d1-788a-4ff8-a685-0bb67755cab8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-30bc3ea5-000a-492d-b1a1-11110efb1bae' class='xr-var-data-in' type='checkbox'><label for='data-30bc3ea5-000a-492d-b1a1-11110efb1bae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-4865efac-f6d2-49ea-8230-0ab956657b12' class='xr-section-summary-in' type='checkbox'  ><label for='section-4865efac-f6d2-49ea-8230-0ab956657b12' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-dbd8c3ad-6908-4b40-9b1f-32eedab0cc8b' class='xr-index-data-in' type='checkbox'/><label for='index-dbd8c3ad-6908-4b40-9b1f-32eedab0cc8b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718475532.0808392,      1718475532.83,   1718475533.63973,
       1718475534.4423587,  1718475535.242229],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a9a97f99-7fe4-4019-861b-31606f2bcd2f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-a9a97f99-7fe4-4019-861b-31606f2bcd2f' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
</section>
<section id="The-(1-D)-bp.scan()-plan-with-two-motors">
<h2>The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with two motors<a class="headerlink" href="#The-(1-D)-bp.scan()-plan-with-two-motors" title="Link to this heading">#</a></h2>
<p>Step scan two motors together (m1 &amp; m2) as in the previous section; at each step:</p>
<ul class="simple">
<li><p>Measure 3 images (as configured above during detector staging).</p></li>
<li><p>Record total counts.</p></li>
<li><p>Record maximum counts value.</p></li>
</ul>
<p>For clarity, the <code class="docutils literal notranslate"><span class="pre">scan</span></code> arguments are split into multiple lines.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span>
        <span class="p">[</span><span class="n">simdet</span><span class="p">],</span>
        <span class="n">m1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">m2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;uids=!r&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 95     Time: 2024-06-15 13:18:56
Persistent Unique Scan ID: &#39;b0fc4001-c2e2-468a-ac82-1ccb19ddbdb3&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time |         m1 |         m2 | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|         1 | 13:19:00.1 |    -1.0000 |     4.0000 |                  152891 |                     163 |            11659109 |
|         2 | 13:19:00.9 |    -0.5000 |     3.3750 |                  152894 |                     159 |            11355578 |
|         3 | 13:19:01.8 |     0.0000 |     2.7500 |                  152897 |                     164 |            11659418 |
|         4 | 13:19:02.7 |     0.5000 |     2.1250 |                  152900 |                     162 |            11536310 |
|         5 | 13:19:03.6 |     1.0000 |     1.5000 |                  152903 |                     163 |            11658922 |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
generator scan [&#39;b0fc4001&#39;] (scan num: 95)
uids=!r
image_data.shape=(5, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 16MB
Dimensions:                  (time: 5, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 40B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 16MB 8 6 ... 7 6
    simdet_stats1_unique_id  (time) int64 40B 152891 152894 152897 152900 152903
    simdet_stats1_max_value  (time) float64 40B 163.0 159.0 164.0 162.0 163.0
    simdet_stats1_total      (time) float64 40B 1.166e+07 ... 1.166e+07
    m1                       (time) float64 40B -1.0 -0.5 0.0 0.5 1.0
    m1_user_setpoint         (time) float64 40B -1.0 -0.5 0.0 0.5 1.0
    m2                       (time) float64 40B 4.0 3.375 2.75 2.125 1.5
    m2_user_setpoint         (time) float64 40B 4.0 3.375 2.75 2.125 1.5</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-59202596-1f72-4242-ad37-acf6cd6a8e3f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-59202596-1f72-4242-ad37-acf6cd6a8e3f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 5</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-f7a72146-e6e8-44c5-a382-3c42a2c9049d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f7a72146-e6e8-44c5-a382-3c42a2c9049d' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-2b11d663-0d98-40c2-b437-4696e7cf6209' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2b11d663-0d98-40c2-b437-4696e7cf6209' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-649ee34c-2f76-4604-aa3a-c0fe198b4be5' class='xr-var-data-in' type='checkbox'><label for='data-649ee34c-2f76-4604-aa3a-c0fe198b4be5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f03d8313-0e67-4614-ac84-8777ee0318ef' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f03d8313-0e67-4614-ac84-8777ee0318ef' class='xr-section-summary' >Data variables: <span>(8)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>8 6 9 6 14 14 14 ... 14 7 11 11 7 6</div><input id='attrs-b7902ece-cb24-4afb-ae69-886bfb8ba50c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b7902ece-cb24-4afb-ae69-886bfb8ba50c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-62d135e8-3aba-45c1-8051-31b2f3d8217a' class='xr-var-data-in' type='checkbox'><label for='data-62d135e8-3aba-45c1-8051-31b2f3d8217a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[ 8,  6,  9, ..., 13, 13, 11],
         [13, 13,  5, ...,  8,  8, 13],
         [ 6,  6, 13, ..., 12, 13,  5],
         ...,
         [12,  6,  5, ..., 13, 14, 12],
         [ 5, 12,  5, ..., 13, 10,  8],
         [13,  6, 10, ..., 14, 10,  8]],

        [[ 5, 13, 11, ..., 13,  8,  7],
         [ 6,  8, 12, ..., 12, 12,  7],
         [10,  6, 10, ...,  8,  8,  7],
         ...,
         [ 7, 10,  7, ..., 10,  9,  5],
         [ 6, 13, 10, ...,  9, 14, 13],
         [12,  9,  8, ...,  8,  5, 11]],

        [[ 6,  5, 11, ..., 14, 10,  8],
         [ 8, 11, 12, ...,  5, 11,  7],
         [ 7,  7,  7, ...,  6,  7, 10],
         ...,
...
         ...,
         [ 6, 12, 14, ..., 11,  7, 14],
         [10,  6,  9, ...,  8,  6, 13],
         [10, 10,  8, ...,  6, 10,  6]],

        [[14,  9, 10, ..., 11, 13,  5],
         [12,  8, 13, ...,  5, 13,  7],
         [13, 13, 12, ...,  6, 13,  8],
         ...,
         [ 9,  8,  7, ...,  6, 11, 10],
         [ 7, 10,  7, ..., 14,  7, 10],
         [ 8, 11,  8, ...,  9,  9,  6]],

        [[ 8, 11,  8, ..., 11, 13,  9],
         [11,  5,  5, ...,  7,  8,  9],
         [13,  9,  7, ..., 12,  9,  8],
         ...,
         [14,  9,  6, ...,  7, 12, 14],
         [ 7,  9, 13, ..., 12,  8,  6],
         [12, 13, 11, ..., 11,  7,  6]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152891 152894 152897 152900 152903</div><input id='attrs-53994c44-b7c2-4523-88eb-c4d01099492a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-53994c44-b7c2-4523-88eb-c4d01099492a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-59a456a8-5dad-4b06-902f-a5efa712f587' class='xr-var-data-in' type='checkbox'><label for='data-59a456a8-5dad-4b06-902f-a5efa712f587' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152891, 152894, 152897, 152900, 152903])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>163.0 159.0 164.0 162.0 163.0</div><input id='attrs-60a9e99f-a818-4ab6-a347-0d34ed22f78b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-60a9e99f-a818-4ab6-a347-0d34ed22f78b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ab83b507-3818-4f47-b28b-0870eff0a3dc' class='xr-var-data-in' type='checkbox'><label for='data-ab83b507-3818-4f47-b28b-0870eff0a3dc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([163., 159., 164., 162., 163.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.166e+07 1.136e+07 ... 1.166e+07</div><input id='attrs-1380e29b-9d46-414c-a7ad-7fcce24793a0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1380e29b-9d46-414c-a7ad-7fcce24793a0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bc0f9414-32c6-4d51-84ed-e77ba28e7a6e' class='xr-var-data-in' type='checkbox'><label for='data-bc0f9414-32c6-4d51-84ed-e77ba28e7a6e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11659109., 11355578., 11659418., 11536310., 11658922.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-eed0935b-c408-4a7a-a465-57dbc124cacd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-eed0935b-c408-4a7a-a465-57dbc124cacd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ac40ed7a-f64e-49b2-8f76-f22724bf5059' class='xr-var-data-in' type='checkbox'><label for='data-ac40ed7a-f64e-49b2-8f76-f22724bf5059' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -0.5 0.0 0.5 1.0</div><input id='attrs-562dcfce-0f66-4254-819d-d4295b6ea446' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-562dcfce-0f66-4254-819d-d4295b6ea446' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-436a0142-c341-498b-8a83-3aebe1f47251' class='xr-var-data-in' type='checkbox'><label for='data-436a0142-c341-498b-8a83-3aebe1f47251' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -0.5,  0. ,  0.5,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.0 3.375 2.75 2.125 1.5</div><input id='attrs-fca101ea-19cd-4d42-9aa4-09a955a80a14' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fca101ea-19cd-4d42-9aa4-09a955a80a14' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6365ac08-2a1d-49be-8d51-8938c2742dff' class='xr-var-data-in' type='checkbox'><label for='data-6365ac08-2a1d-49be-8d51-8938c2742dff' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([4.   , 3.375, 2.75 , 2.125, 1.5  ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.0 3.375 2.75 2.125 1.5</div><input id='attrs-2e03ac2c-9f04-4ecf-a42d-96b601e61381' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2e03ac2c-9f04-4ecf-a42d-96b601e61381' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-372ba54c-74a0-47d5-851d-205af1081770' class='xr-var-data-in' type='checkbox'><label for='data-372ba54c-74a0-47d5-851d-205af1081770' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([4.   , 3.375, 2.75 , 2.125, 1.5  ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6c37b0ef-8672-4cf7-8bde-b3178aede7e7' class='xr-section-summary-in' type='checkbox'  ><label for='section-6c37b0ef-8672-4cf7-8bde-b3178aede7e7' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1de9eb6f-6367-4ff2-9f34-3ebf7703e626' class='xr-index-data-in' type='checkbox'/><label for='index-1de9eb6f-6367-4ff2-9f34-3ebf7703e626' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718475540.1103883, 1718475540.9505434,  1718475541.860732,
       1718475542.7624683,  1718475543.662016],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f8f30c1f-efba-4220-bfc6-77b44fca1c13' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-f8f30c1f-efba-4220-bfc6-77b44fca1c13' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<section id="Show-the-sequence-of-motor-positions">
<h3>Show the sequence of motor positions<a class="headerlink" href="#Show-the-sequence-of-motor-positions" title="Link to this heading">#</a></h3>
<p>Both motors move at the same time. The same number of steps are taken by each motor. Below is a plot showing the readback values of each motor during a two-motor <code class="docutils literal notranslate"><span class="pre">scan</span></code> versus the data point number:</p>
<p><img alt="grid_scan motors v point number" src="../_images/scan_two_motors.png" /></p>
</section>
</section>
<section id="The-(2-D)-bp.grid_scan()-(mesh)-plan">
<h2>The (2-D) <code class="docutils literal notranslate"><span class="pre">bp.grid_scan()</span></code> (mesh) plan<a class="headerlink" href="#The-(2-D)-bp.grid_scan()-(mesh)-plan" title="Link to this heading">#</a></h2>
<p>Step scan two motors (m1 &amp; m2) as in the previous section; at each step:</p>
<ul class="simple">
<li><p>Measure 3 images (as configured aboveduring detector staging).</p></li>
<li><p>Record total counts.</p></li>
<li><p>Record maximum counts value.</p></li>
</ul>
<p>For clarity, the <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code> arguments are split into multiple lines.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">uids</span> <span class="o">=</span> <span class="n">RE</span><span class="p">(</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">grid_scan</span><span class="p">(</span>
        <span class="p">[</span><span class="n">simdet</span><span class="p">],</span>
        <span class="n">m1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">m2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">snake_axes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;uids=!r&quot;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">cat</span><span class="p">[</span><span class="n">uids</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">primary</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">image_data</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;simdet_image&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_data</span><span class="o">.</span><span class="n">shape</span><span class="si">=!r}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">dataset</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>


Transient Scan ID: 96     Time: 2024-06-15 13:19:04
Persistent Unique Scan ID: &#39;5d5d851f-d953-4926-adb2-68e2cf658890&#39;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
device=MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]), exception=Data keys (field names) from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]) collide with those from MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;]). The colliding keys are {&#39;m2&#39;, &#39;m2_user_setpoint&#39;}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
New stream: &#39;label_start_motor&#39;
New stream: &#39;primary&#39;
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|   seq_num |       time |         m1 |         m2 | simdet_stats1_unique_id | simdet_stats1_max_value | simdet_stats1_total |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
|         1 | 13:19:07.1 |    -1.0000 |    -0.5000 |                  152906 |                     164 |            11663011 |
|         2 | 13:19:07.6 |    -1.0000 |    -0.1667 |                  152909 |                     160 |            11445949 |
|         3 | 13:19:08.2 |    -1.0000 |     0.1667 |                  152912 |                     159 |            11355981 |
|         4 | 13:19:08.8 |    -1.0000 |     0.5000 |                  152915 |                     164 |            11677059 |
|         5 | 13:19:09.6 |    -0.5000 |     0.5000 |                  152918 |                     164 |            11708538 |
|         6 | 13:19:10.2 |    -0.5000 |     0.1667 |                  152921 |                     166 |            11846736 |
|         7 | 13:19:10.8 |    -0.5000 |    -0.1667 |                  152924 |                     164 |            11692952 |
|         8 | 13:19:11.4 |    -0.5000 |    -0.5000 |                  152927 |                     164 |            11693749 |
|         9 | 13:19:12.2 |     0.0000 |    -0.5000 |                  152930 |                     163 |            11657723 |
|        10 | 13:19:12.8 |     0.0000 |    -0.1667 |                  152933 |                     162 |            11536782 |
|        11 | 13:19:13.4 |     0.0000 |     0.1667 |                  152936 |                     164 |            11717110 |
|        12 | 13:19:14.0 |     0.0000 |     0.5000 |                  152939 |                     160 |            11411453 |
|        13 | 13:19:14.8 |     0.5000 |     0.5000 |                  152942 |                     161 |            11486128 |
|        14 | 13:19:15.4 |     0.5000 |     0.1667 |                  152945 |                     164 |            11702804 |
|        15 | 13:19:16.0 |     0.5000 |    -0.1667 |                  152948 |                     164 |            11728435 |
|        16 | 13:19:16.6 |     0.5000 |    -0.5000 |                  152951 |                     164 |            11695619 |
|        17 | 13:19:17.5 |     1.0000 |    -0.5000 |                  152954 |                     159 |            11388541 |
|        18 | 13:19:18.1 |     1.0000 |    -0.1667 |                  152957 |                     160 |            11455055 |
|        19 | 13:19:18.7 |     1.0000 |     0.1667 |                  152960 |                     160 |            11394404 |
|        20 | 13:19:19.2 |     1.0000 |     0.5000 |                  152963 |                     165 |            11773811 |
+-----------+------------+------------+------------+-------------------------+-------------------------+---------------------+
generator grid_scan [&#39;5d5d851f&#39;] (scan num: 96)
uids=!r
image_data.shape=(20, 3, 1024, 1024)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 63MB
Dimensions:                  (time: 20, dim_0: 3, dim_1: 1024, dim_2: 1024)
Coordinates:
  * time                     (time) float64 160B 1.718e+09 ... 1.718e+09
Dimensions without coordinates: dim_0, dim_1, dim_2
Data variables:
    simdet_image             (time, dim_0, dim_1, dim_2) uint8 63MB 8 14 ... 8 6
    simdet_stats1_unique_id  (time) int64 160B 152906 152909 ... 152960 152963
    simdet_stats1_max_value  (time) float64 160B 164.0 160.0 ... 160.0 165.0
    simdet_stats1_total      (time) float64 160B 1.166e+07 ... 1.177e+07
    m1                       (time) float64 160B -1.0 -1.0 -1.0 ... 1.0 1.0 1.0
    m1_user_setpoint         (time) float64 160B -1.0 -1.0 -1.0 ... 1.0 1.0 1.0
    m2                       (time) float64 160B -0.5 -0.1667 ... 0.1667 0.5
    m2_user_setpoint         (time) float64 160B -0.5 -0.1667 ... 0.1667 0.5</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-339bbca0-9d0a-4488-b5a5-99aa6ac36b10' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-339bbca0-9d0a-4488-b5a5-99aa6ac36b10' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 20</li><li><span>dim_0</span>: 3</li><li><span>dim_1</span>: 1024</li><li><span>dim_2</span>: 1024</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-649e9464-aaf5-49cb-9cb1-5395c55446bb' class='xr-section-summary-in' type='checkbox'  checked><label for='section-649e9464-aaf5-49cb-9cb1-5395c55446bb' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.718e+09 1.718e+09 ... 1.718e+09</div><input id='attrs-1bdef301-deda-4b01-93b4-513d0d27da6d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1bdef301-deda-4b01-93b4-513d0d27da6d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5bfebcf1-6acc-499b-832d-ca85b97f780f' class='xr-var-data-in' type='checkbox'><label for='data-5bfebcf1-6acc-499b-832d-ca85b97f780f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09,
       1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09,
       1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09,
       1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09, 1.718476e+09])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-5761293f-fbc0-4391-8a34-a2a0835cf18b' class='xr-section-summary-in' type='checkbox'  checked><label for='section-5761293f-fbc0-4391-8a34-a2a0835cf18b' class='xr-section-summary' >Data variables: <span>(8)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>simdet_image</span></div><div class='xr-var-dims'>(time, dim_0, dim_1, dim_2)</div><div class='xr-var-dtype'>uint8</div><div class='xr-var-preview xr-preview'>8 14 13 12 13 5 6 ... 10 8 8 6 8 6</div><input id='attrs-5ce69aee-2620-4e5b-8c18-f56ba22e1c98' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5ce69aee-2620-4e5b-8c18-f56ba22e1c98' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-21c9522f-84bd-40b5-ae7e-bd61c4aa3026' class='xr-var-data-in' type='checkbox'><label for='data-21c9522f-84bd-40b5-ae7e-bd61c4aa3026' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([[[[ 8, 14, 13, ..., 11,  6,  5],
         [ 9,  8, 12, ...,  9, 11, 13],
         [ 9, 14, 12, ..., 14,  8,  9],
         ...,
         [ 8, 10, 11, ...,  7,  9,  8],
         [11, 11, 14, ...,  5, 10, 12],
         [ 5, 10,  6, ...,  7, 13,  6]],

        [[11, 13,  9, ...,  5,  9, 12],
         [ 8, 10, 11, ..., 13,  9, 14],
         [10, 11, 11, ...,  5, 11,  9],
         ...,
         [11,  9,  7, ...,  7,  6,  5],
         [ 9,  9,  6, ...,  6,  5,  9],
         [ 5, 13,  5, ..., 10, 11, 10]],

        [[12,  7,  8, ..., 11, 14, 14],
         [ 5, 14,  5, ...,  9, 14, 11],
         [ 5,  8,  6, ...,  6,  5, 14],
         ...,
...
         ...,
         [ 5,  6,  9, ..., 10,  6,  9],
         [ 7,  6, 13, ..., 14,  6,  9],
         [ 5,  6, 10, ..., 10,  9,  9]],

        [[11,  7,  5, ...,  8, 10, 11],
         [ 8, 14, 14, ...,  8,  9, 13],
         [ 6,  7, 12, ...,  5, 10, 11],
         ...,
         [11,  8, 12, ...,  9, 10, 14],
         [ 8,  9, 12, ..., 13,  7,  6],
         [ 7,  5,  7, ..., 14,  6,  5]],

        [[ 6,  6,  9, ..., 11, 11,  9],
         [11,  7,  9, ..., 13, 13, 13],
         [10, 13,  9, ..., 14,  7,  8],
         ...,
         [11,  8, 14, ...,  5,  8, 13],
         [ 7, 12,  7, ...,  7, 11,  9],
         [10, 14,  5, ...,  6,  8,  6]]]], dtype=uint8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_unique_id</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>152906 152909 ... 152960 152963</div><input id='attrs-092939ba-28de-44a6-8b13-32e4dcc97b20' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-092939ba-28de-44a6-8b13-32e4dcc97b20' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2caf5121-2be4-4877-a082-712d6bca3416' class='xr-var-data-in' type='checkbox'><label for='data-2caf5121-2be4-4877-a082-712d6bca3416' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([152906, 152909, 152912, 152915, 152918, 152921, 152924, 152927,
       152930, 152933, 152936, 152939, 152942, 152945, 152948, 152951,
       152954, 152957, 152960, 152963])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_max_value</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>164.0 160.0 159.0 ... 160.0 165.0</div><input id='attrs-af31b26b-5e57-48f9-aa54-ccba43f98c63' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-af31b26b-5e57-48f9-aa54-ccba43f98c63' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dd827f0f-caae-448e-920d-b0387e7c0610' class='xr-var-data-in' type='checkbox'><label for='data-dd827f0f-caae-448e-920d-b0387e7c0610' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([164., 160., 159., 164., 164., 166., 164., 164., 163., 162., 164.,
       160., 161., 164., 164., 164., 159., 160., 160., 165.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>simdet_stats1_total</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.166e+07 1.145e+07 ... 1.177e+07</div><input id='attrs-f43c7e46-f41a-4c83-a7e8-28be3dcce8d3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f43c7e46-f41a-4c83-a7e8-28be3dcce8d3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f64949f2-95c2-43d6-a80d-2907b54e7a4d' class='xr-var-data-in' type='checkbox'><label for='data-f64949f2-95c2-43d6-a80d-2907b54e7a4d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>simdet</dd></dl></div><div class='xr-var-data'><pre>array([11663011., 11445949., 11355981., 11677059., 11708538., 11846736.,
       11692952., 11693749., 11657723., 11536782., 11717110., 11411453.,
       11486128., 11702804., 11728435., 11695619., 11388541., 11455055.,
       11394404., 11773811.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -1.0 -1.0 -1.0 ... 1.0 1.0 1.0</div><input id='attrs-158e5240-530f-4e59-b592-50aad90d74e6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-158e5240-530f-4e59-b592-50aad90d74e6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-798778a5-6cd2-4e14-b259-d61a8e4f4f13' class='xr-var-data-in' type='checkbox'><label for='data-798778a5-6cd2-4e14-b259-d61a8e4f4f13' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -1. , -1. , -1. , -0.5, -0.5, -0.5, -0.5,  0. ,  0. ,  0. ,
        0. ,  0.5,  0.5,  0.5,  0.5,  1. ,  1. ,  1. ,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m1_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-1.0 -1.0 -1.0 -1.0 ... 1.0 1.0 1.0</div><input id='attrs-a92286fc-a36e-42f3-a907-6f00166d4ab6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a92286fc-a36e-42f3-a907-6f00166d4ab6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-42eb6e1d-99f9-44dd-afe8-9bd447420841' class='xr-var-data-in' type='checkbox'><label for='data-42eb6e1d-99f9-44dd-afe8-9bd447420841' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m1</dd></dl></div><div class='xr-var-data'><pre>array([-1. , -1. , -1. , -1. , -0.5, -0.5, -0.5, -0.5,  0. ,  0. ,  0. ,
        0. ,  0.5,  0.5,  0.5,  0.5,  1. ,  1. ,  1. ,  1. ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.5 -0.1667 0.1667 ... 0.1667 0.5</div><input id='attrs-129b2fc8-0b58-41fb-9347-23429edffd1c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-129b2fc8-0b58-41fb-9347-23429edffd1c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f21ff222-79c1-4775-9214-811bb97db79f' class='xr-var-data-in' type='checkbox'><label for='data-f21ff222-79c1-4775-9214-811bb97db79f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([-0.5   , -0.1667,  0.1667,  0.5   ,  0.5   ,  0.1667, -0.1667,
       -0.5   , -0.5   , -0.1667,  0.1667,  0.5   ,  0.5   ,  0.1667,
       -0.1667, -0.5   , -0.5   , -0.1667,  0.1667,  0.5   ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>m2_user_setpoint</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.5 -0.1667 0.1667 ... 0.1667 0.5</div><input id='attrs-cd529a3a-568f-46e4-82d2-d49fbeba4597' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cd529a3a-568f-46e4-82d2-d49fbeba4597' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-af0124f9-0aec-4585-8b73-c5c963db74f2' class='xr-var-data-in' type='checkbox'><label for='data-af0124f9-0aec-4585-8b73-c5c963db74f2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>object :</span></dt><dd>m2</dd></dl></div><div class='xr-var-data'><pre>array([-0.5       , -0.16666667,  0.16666667,  0.5       ,  0.5       ,
        0.16666667, -0.16666667, -0.5       , -0.5       , -0.16666667,
        0.16666667,  0.5       ,  0.5       ,  0.16666667, -0.16666667,
       -0.5       , -0.5       , -0.16666667,  0.16666667,  0.5       ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9b1c3b30-fa35-4f3a-a94f-7683f98109a3' class='xr-section-summary-in' type='checkbox'  ><label for='section-9b1c3b30-fa35-4f3a-a94f-7683f98109a3' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f54ebef1-af73-4636-bca0-10f0ac007b0d' class='xr-index-data-in' type='checkbox'/><label for='index-f54ebef1-af73-4636-bca0-10f0ac007b0d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1718475547.1016889, 1718475547.6889985, 1718475548.2715652,
       1718475548.8735123, 1718475549.6955707,  1718475550.283441,
       1718475550.8870528, 1718475551.4843397, 1718475552.2825255,
       1718475552.8914993, 1718475553.4914536, 1718475554.0983245,
        1718475554.898487, 1718475555.4984066,  1718475556.094555,
       1718475556.6871016, 1718475557.5042434, 1718475558.1027176,
        1718475558.702482, 1718475559.2953453],
      dtype=&#x27;float64&#x27;, name=&#x27;time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-596d5917-c8bd-4ff3-a28a-635ef7e6b2a4' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-596d5917-c8bd-4ff3-a28a-635ef7e6b2a4' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<section id="id1">
<h3>Show the sequence of motor positions<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<details><p>Here is the sequence of how the motors are stepped during a <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m1</span></code> is stepped through its range; at each step of <code class="docutils literal notranslate"><span class="pre">m1</span></code>:</p>
<ul>
<li><p>At each step:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">m2</span></code> is stepped through its range (<code class="docutils literal notranslate"><span class="pre">m1</span></code> does not move).</p>
<ul>
<li><p>With <code class="docutils literal notranslate"><span class="pre">snake_axes=True</span></code>, the <code class="docutils literal notranslate"><span class="pre">m2</span></code> changes direction each time <code class="docutils literal notranslate"><span class="pre">m1</span></code> is stepped.</p></li>
<li><p>At each step:</p>
<ul>
<li><p>Measure 3 images (as configured aboveduring detector staging).</p></li>
<li><p>Record total counts.</p></li>
<li><p>Record maximum counts value.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code> with <code class="docutils literal notranslate"><span class="pre">snake_axes=True</span></code> progresses through the sequence of (<code class="docutils literal notranslate"><span class="pre">m1</span></code>, <code class="docutils literal notranslate"><span class="pre">m2</span></code>) combinations as would a snake.</p>
</details><p>The second motor of the <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code> (<code class="docutils literal notranslate"><span class="pre">m2</span></code>) is snaked. It’s direction changes with each subsequent increment of the first motor (<code class="docutils literal notranslate"><span class="pre">m1</span></code>). Here’s a plot of readback value of each motor from a <code class="docutils literal notranslate"><span class="pre">grid_scan</span></code> plotted <em>v</em>. data point number:</p>
<p><img alt="grid_scan motors v time-of-day" src="../_images/grid_scan_snake.png" /></p>
</section>
</section>
<section id="SPEC-data-file">
<h2>SPEC data file<a class="headerlink" href="#SPEC-data-file" title="Link to this heading">#</a></h2>
<p>All along, quietly in the background, the data has been saved both to a catalog and to a SPEC data file. The total counts, max counts, and unique ID from all scans can be plotted from the SPEC file using PyMCA or NeXpy.</p>
<p>The image content is not stored in the SPEC file, so images cannot be viewed from it. However, references to the images are saved as comments. See the comment lines that match a search for</p>
<p><code class="docutils literal notranslate"><span class="pre">resource</span> <span class="pre">{'spec':</span> <span class="pre">'AD_HDF5'</span></code></p>
<p>Here is an example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#C Thu Jun 13 11:36:38 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/d94f633b-12a7-4ff0-92af_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;5328206b-dd13-49f8-b108-17e0d867d470&#39;, &#39;run_start&#39;: &#39;e8c24278-656f-4c79-b3eb-d522310f7649&#39;}
</pre></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">specwriter</span><span class="o">.</span><span class="n">spec_filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
#F /home/prjemian/Documents/projects/BCDA-APS/bluesky_training/docs/source/howto/20240615-131838.dat
#E 1718475518
#D Sat Jun 15 13:18:38 2024
#C Bluesky  user = prjemian  host = arf.jemian.org
#O0 dcm_m_theta  dcm_m_y  dcm_m_z  fourc_chi  fourc_omega  fourc_phi  fourc_tth  m1
#O1 m10  m11  m12  m13  m14  m15  m16  m2
#O2 m3  m4  m7  m8  m9  sixc_chi  sixc_delta  sixc_gamma
#O3 sixc_mu  sixc_omega  sixc_phi
#o0 dcm_m_theta  dcm_m_y  dcm_m_z  fourc_chi  fourc_omega  fourc_phi  fourc_tth  m1
#o1 m10  m11  m12  m13  m14  m15  m16  m2
#o2 m3  m4  m7  m8  m9  sixc_chi  sixc_delta  sixc_gamma
#o3 sixc_mu  sixc_omega  sixc_phi

#S 92  count(detectors=[&#39;simdet_stats1_unique_id&#39;, &#39;simdet_stats1_total&#39;, &#39;simdet_stats1_max_value&#39;], num=5, delay=None)
#D Sat Jun 15 13:18:40 2024
#C Sat Jun 15 13:18:40 2024.  plan_type = generator
#C Sat Jun 15 13:18:40 2024.  uid = ceaecdd7-e1af-411f-94f2-c14d5d3debab
#MD uid = ceaecdd7-e1af-411f-94f2-c14d5d3debab
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet_stats1_unique_id&#39;, &#39;simdet_stats1_total&#39;, &#39;simdet_stats1_max_value&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 154110
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 5
#L Epoch_float  Epoch  simdet_stats1_unique_id  simdet_stats1_total  simdet_stats1_max_value
0.15399622917175293 0 152858 11722735.0 164.0
0.5764033794403076 1 152858 11722735.0 164.0
0.9582419395446777 1 152858 11722735.0 164.0
1.3527321815490723 1 152858 11722735.0 164.0
1.74350905418396 2 152858 11722735.0 164.0
#C Sat Jun 15 13:18:43 2024.  num_events_label_start_motor = 1
#C Sat Jun 15 13:18:43 2024.  num_events_primary = 5
#C Sat Jun 15 13:18:43 2024.  exit_status = success

#S 93  count(detectors=[&#39;simdet&#39;], num=5, delay=None)
#D Sat Jun 15 13:18:44 2024
#C Sat Jun 15 13:18:44 2024.  plan_type = generator
#C Sat Jun 15 13:18:44 2024.  uid = f39f2eb2-fc04-4696-ac26-245cd574f7c2
#MD uid = f39f2eb2-fc04-4696-ac26-245cd574f7c2
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 154110
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 7
#L Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  simdet
0.2595047950744629 0 0 152861 164.0 11658834.0 0
#U 0 simdet_image 510c0d90-f922-41c2-a5ed-2b1013b82ab3/0
0.6947643756866455 1 1 152864 164.0 11710598.0 0
#U 1 simdet_image 510c0d90-f922-41c2-a5ed-2b1013b82ab3/1
1.1037673950195312 1 2 152867 163.0 11537287.0 0
#U 2 simdet_image 510c0d90-f922-41c2-a5ed-2b1013b82ab3/2
1.5303704738616943 2 3 152870 159.0 11360372.0 0
#U 3 simdet_image 510c0d90-f922-41c2-a5ed-2b1013b82ab3/3
1.9436140060424805 2 4 152873 166.0 11817560.0 0
#U 4 simdet_image 510c0d90-f922-41c2-a5ed-2b1013b82ab3/4
#C Sat Jun 15 13:18:45 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/1245c370-4953-4ff3-8982_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3&#39;, &#39;run_start&#39;: &#39;f39f2eb2-fc04-4696-ac26-245cd574f7c2&#39;}
#C Sat Jun 15 13:18:45 2024.  datum {&#39;resource&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3&#39;, &#39;datum_id&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Sat Jun 15 13:18:45 2024.  datum {&#39;resource&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3&#39;, &#39;datum_id&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Sat Jun 15 13:18:45 2024.  datum {&#39;resource&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3&#39;, &#39;datum_id&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Sat Jun 15 13:18:46 2024.  datum {&#39;resource&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3&#39;, &#39;datum_id&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Sat Jun 15 13:18:46 2024.  datum {&#39;resource&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3&#39;, &#39;datum_id&#39;: &#39;510c0d90-f922-41c2-a5ed-2b1013b82ab3/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Sat Jun 15 13:18:47 2024.  num_events_label_start_motor = 1
#C Sat Jun 15 13:18:47 2024.  num_events_primary = 5
#C Sat Jun 15 13:18:47 2024.  exit_status = success

#S 94  scan(detectors=[&#39;simdet&#39;], num=5, args=&#39;[&#39;m1&#39;, -1, 1]&#39;, per_step=&#39;None&#39;)
#D Sat Jun 15 13:18:49 2024
#C Sat Jun 15 13:18:49 2024.  plan_type = generator
#C Sat Jun 15 13:18:49 2024.  uid = 03dde617-eb69-4b66-abe5-8595de04051d
#MD uid = 03dde617-eb69-4b66-abe5-8595de04051d
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD motors = (&#39;m1&#39;,)
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 154110
#MD plan_pattern = inner_product
#MD plan_pattern_args = {&#39;num&#39;: 5, &#39;args&#39;: [&#34;MyEpicsMotor(prefix=&#39;gp:m1&#39;, name=&#39;m1&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -1, 1]}
#MD plan_pattern_module = bluesky.plan_patterns
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 9
#L m1  Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  m1_user_setpoint  simdet
-1.0 2.4708797931671143 2 0 152876 160.0 11445712.0 -1.0 0
#U 0 simdet_image a833899a-286a-4eaf-94d8-8feaf24c9b52/0
-0.5 3.2200405597686768 3 1 152879 163.0 11658331.0 -0.5 0
#U 1 simdet_image a833899a-286a-4eaf-94d8-8feaf24c9b52/1
0.0 4.029770612716675 4 2 152882 162.0 11535839.0 0.0 0
#U 2 simdet_image a833899a-286a-4eaf-94d8-8feaf24c9b52/2
0.5 4.832399368286133 5 3 152885 165.0 11799101.0 0.5 0
#U 3 simdet_image a833899a-286a-4eaf-94d8-8feaf24c9b52/3
1.0 5.632269620895386 6 4 152888 166.0 11824045.0 1.0 0
#U 4 simdet_image a833899a-286a-4eaf-94d8-8feaf24c9b52/4
#C Sat Jun 15 13:18:52 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/d2ada5a8-8b64-475f-9c2c_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52&#39;, &#39;run_start&#39;: &#39;03dde617-eb69-4b66-abe5-8595de04051d&#39;}
#C Sat Jun 15 13:18:52 2024.  datum {&#39;resource&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52&#39;, &#39;datum_id&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Sat Jun 15 13:18:52 2024.  datum {&#39;resource&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52&#39;, &#39;datum_id&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Sat Jun 15 13:18:53 2024.  datum {&#39;resource&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52&#39;, &#39;datum_id&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Sat Jun 15 13:18:54 2024.  datum {&#39;resource&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52&#39;, &#39;datum_id&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Sat Jun 15 13:18:55 2024.  datum {&#39;resource&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52&#39;, &#39;datum_id&#39;: &#39;a833899a-286a-4eaf-94d8-8feaf24c9b52/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Sat Jun 15 13:18:55 2024.  num_events_label_start_motor = 1
#C Sat Jun 15 13:18:55 2024.  num_events_primary = 5
#C Sat Jun 15 13:18:55 2024.  exit_status = success

#S 95  scan(detectors=[&#39;simdet&#39;], num=5, args=&#39;[&#39;m1&#39;, -1, 1, &#39;m2&#39;, 4, 1.5]&#39;, per_step=&#39;None&#39;)
#D Sat Jun 15 13:18:56 2024
#C Sat Jun 15 13:18:56 2024.  plan_type = generator
#C Sat Jun 15 13:18:56 2024.  uid = b0fc4001-c2e2-468a-ac82-1ccb19ddbdb3
#MD uid = b0fc4001-c2e2-468a-ac82-1ccb19ddbdb3
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD motors = (&#39;m1&#39;, &#39;m2&#39;)
#MD num_intervals = 4
#MD num_points = 5
#MD pid = 154110
#MD plan_pattern = inner_product
#MD plan_pattern_args = {&#39;num&#39;: 5, &#39;args&#39;: [&#34;MyEpicsMotor(prefix=&#39;gp:m1&#39;, name=&#39;m1&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -1, 1, &#34;MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, 4, 1.5]}
#MD plan_pattern_module = bluesky.plan_patterns
#MD proposal_id = training
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 11
#L m1  m2  Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  m1_user_setpoint  m2_user_setpoint  simdet
-1.0 4.0 3.9975199699401855 4 0 152891 163.0 11659109.0 -1.0 4.0 0
#U 0 simdet_image 46d1362c-9557-45a5-aadd-407e0bd98646/0
-0.5 3.375 4.837675094604492 5 1 152894 159.0 11355578.0 -0.5 3.375 0
#U 1 simdet_image 46d1362c-9557-45a5-aadd-407e0bd98646/1
0.0 2.75 5.74786376953125 6 2 152897 164.0 11659418.0 0.0 2.75 0
#U 2 simdet_image 46d1362c-9557-45a5-aadd-407e0bd98646/2
0.5 2.125 6.649600028991699 7 3 152900 162.0 11536310.0 0.5 2.125 0
#U 3 simdet_image 46d1362c-9557-45a5-aadd-407e0bd98646/3
1.0 1.5 7.549147605895996 8 4 152903 163.0 11658922.0 1.0 1.5 0
#U 4 simdet_image 46d1362c-9557-45a5-aadd-407e0bd98646/4
#C Sat Jun 15 13:19:00 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/6eafee88-ec97-4498-a6f5_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646&#39;, &#39;run_start&#39;: &#39;b0fc4001-c2e2-468a-ac82-1ccb19ddbdb3&#39;}
#C Sat Jun 15 13:19:00 2024.  datum {&#39;resource&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646&#39;, &#39;datum_id&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Sat Jun 15 13:19:00 2024.  datum {&#39;resource&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646&#39;, &#39;datum_id&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Sat Jun 15 13:19:01 2024.  datum {&#39;resource&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646&#39;, &#39;datum_id&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Sat Jun 15 13:19:02 2024.  datum {&#39;resource&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646&#39;, &#39;datum_id&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Sat Jun 15 13:19:03 2024.  datum {&#39;resource&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646&#39;, &#39;datum_id&#39;: &#39;46d1362c-9557-45a5-aadd-407e0bd98646/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Sat Jun 15 13:19:03 2024.  num_events_label_start_motor = 1
#C Sat Jun 15 13:19:03 2024.  num_events_primary = 5
#C Sat Jun 15 13:19:03 2024.  exit_status = success

#S 96  grid_scan(detectors=[&#39;simdet&#39;], args=&#39;[&#39;m1&#39;, -1, 1, 5, &#39;m2&#39;, -0.5, 0.5, 4, True]&#39;, per_step=&#39;None&#39;)
#D Sat Jun 15 13:19:04 2024
#C Sat Jun 15 13:19:04 2024.  plan_type = generator
#C Sat Jun 15 13:19:04 2024.  uid = 5d5d851f-d953-4926-adb2-68e2cf658890
#MD uid = 5d5d851f-d953-4926-adb2-68e2cf658890
#MD beamline_id = Bluesky_training
#MD conda_prefix = /home/prjemian/.conda/envs/bluesky_2024_2
#MD databroker_catalog = training
#MD detectors = [&#39;simdet&#39;]
#MD extents = ([-1, 1], [-0.5, 0.5])
#MD iconfig = {&#39;ADSIM_IOC_PREFIX&#39;: &#39;ad:&#39;, &#39;GP_IOC_PREFIX&#39;: &#39;gp:&#39;, &#39;DATABROKER_CATALOG&#39;: &#39;training&#39;, &#39;RUNENGINE_METADATA&#39;: {&#39;beamline_id&#39;: &#39;Bluesky_training&#39;, &#39;instrument_name&#39;: &#39;BCDA EPICS Bluesky training&#39;, &#39;proposal_id&#39;: &#39;training&#39;, &#39;databroker_catalog&#39;: &#39;training&#39;}, &#39;RUN_ENGINE_SCAN_ID_PV&#39;: &#39;gp:gp:int20&#39;, &#39;AD_IMAGE_DIR&#39;: &#39;adsimdet/%Y/%m/%d&#39;, &#39;AD_MOUNT_PATH&#39;: &#39;/tmp&#39;, &#39;BLUESKY_MOUNT_PATH&#39;: &#39;/tmp/docker_ioc/iocad/tmp&#39;, &#39;ALLOW_AREA_DETECTOR_WARMUP&#39;: True, &#39;ENABLE_AREA_DETECTOR_IMAGE_PLUGIN&#39;: True, &#39;ENABLE_CALCS&#39;: True, &#39;USE_PROGRESS_BAR&#39;: False, &#39;WRITE_NEXUS_DATA_FILES&#39;: False, &#39;NEXUS_WARN_MISSING_CONTENT&#39;: False, &#39;NEXUS_FILE_EXTENSION&#39;: &#39;h5&#39;, &#39;WRITE_SPEC_DATA_FILES&#39;: True, &#39;RUNENGINE_MD_PATH&#39;: &#39;/home/prjemian/.config/Bluesky_RunEngine_md&#39;, &#39;LOGGING&#39;: {&#39;NUMBER_OF_PREVIOUS_BACKUPS&#39;: 9}, &#39;PV_READ_TIMEOUT&#39;: 15, &#39;PV_WRITE_TIMEOUT&#39;: 15, &#39;PV_CONNECTION_TIMEOUT&#39;: 15, &#39;XMODE_DEBUG_LEVEL&#39;: &#39;Minimal&#39;, &#39;MINIMUM_PYTHON_VERSION&#39;: [3, 8], &#39;MINIMUM_BLUESKY_VERSION&#39;: [1, 10], &#39;MINIMUM_OPHYD_VERSION&#39;: [1, 7], &#39;MINIMUM_DATABROKER_VERSION&#39;: [1, 2], &#39;ICONFIG_VERSION&#39;: &#39;1.0.1&#39;}
#MD instrument_name = BCDA EPICS Bluesky training
#MD login_id = prjemian@arf.jemian.org
#MD motors = (&#39;m1&#39;, &#39;m2&#39;)
#MD num_intervals = 19
#MD num_points = 20
#MD pid = 154110
#MD plan_pattern = outer_product
#MD plan_pattern_args = {&#39;args&#39;: [&#34;MyEpicsMotor(prefix=&#39;gp:m1&#39;, name=&#39;m1&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -1, 1, 5, &#34;MyEpicsMotor(prefix=&#39;gp:m2&#39;, name=&#39;m2&#39;, settle_time=0.0, timeout=None, read_attrs=[&#39;user_readback&#39;, &#39;user_setpoint&#39;], configuration_attrs=[&#39;user_offset&#39;, &#39;user_offset_dir&#39;, &#39;velocity&#39;, &#39;acceleration&#39;, &#39;motor_egu&#39;])&#34;, -0.5, 0.5, 4, True]}
#MD plan_pattern_module = bluesky.plan_patterns
#MD proposal_id = training
#MD shape = (5, 4)
#MD snaking = (False, True)
#MD versions = {&#39;apstools&#39;: &#39;1.6.19&#39;, &#39;bluesky&#39;: &#39;1.13.0a3&#39;, &#39;databroker&#39;: &#39;1.2.5&#39;, &#39;epics&#39;: &#39;3.5.2&#39;, &#39;h5py&#39;: &#39;3.9.0&#39;, &#39;intake&#39;: &#39;0.6.4&#39;, &#39;matplotlib&#39;: &#39;3.8.4&#39;, &#39;numpy&#39;: &#39;1.26.4&#39;, &#39;ophyd&#39;: &#39;1.9.0&#39;, &#39;pyRestTable&#39;: &#39;2020.0.8&#39;, &#39;spec2nexus&#39;: &#39;2021.2.6&#39;}
#P0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.0
#P1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 1.5
#P2 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0
#P3 0.0 0.0 0.0
#N 11
#L m1  m2  Epoch_float  Epoch  simdet_image  simdet_stats1_unique_id  simdet_stats1_max_value  simdet_stats1_total  m1_user_setpoint  m2_user_setpoint  simdet
-1.0 -0.5 2.472050189971924 2 0 152906 164.0 11663011.0 -1.0 -0.5 0
#U 0 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/0
-1.0 -0.16670000000000001 3.0593597888946533 3 1 152909 160.0 11445949.0 -1.0 -0.16666666666666669 0
#U 1 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/1
-1.0 0.16670000000000001 3.6419265270233154 4 2 152912 159.0 11355981.0 -1.0 0.16666666666666663 0
#U 2 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/2
-1.0 0.5 4.243873596191406 4 3 152915 164.0 11677059.0 -1.0 0.5 0
#U 3 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/3
-0.5 0.5 5.065932035446167 5 4 152918 164.0 11708538.0 -0.5 0.5 0
#U 4 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/4
-0.5 0.16670000000000001 5.653802394866943 6 5 152921 166.0 11846736.0 -0.5 0.16666666666666663 0
#U 5 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/5
-0.5 -0.16670000000000001 6.257414102554321 6 6 152924 164.0 11692952.0 -0.5 -0.16666666666666669 0
#U 6 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/6
-0.5 -0.5 6.854701042175293 7 7 152927 164.0 11693749.0 -0.5 -0.5 0
#U 7 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/7
0.0 -0.5 7.652886867523193 8 8 152930 163.0 11657723.0 0.0 -0.5 0
#U 8 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/8
0.0 -0.16670000000000001 8.261860609054565 8 9 152933 162.0 11536782.0 0.0 -0.16666666666666669 0
#U 9 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/9
0.0 0.16670000000000001 8.861814975738525 9 10 152936 164.0 11717110.0 0.0 0.16666666666666663 0
#U 10 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/10
0.0 0.5 9.468685865402222 9 11 152939 160.0 11411453.0 0.0 0.5 0
#U 11 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/11
0.5 0.5 10.268848419189453 10 12 152942 161.0 11486128.0 0.5 0.5 0
#U 12 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/12
0.5 0.16670000000000001 10.868767976760864 11 13 152945 164.0 11702804.0 0.5 0.16666666666666663 0
#U 13 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/13
0.5 -0.16670000000000001 11.464916229248047 11 14 152948 164.0 11728435.0 0.5 -0.16666666666666669 0
#U 14 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/14
0.5 -0.5 12.057462930679321 12 15 152951 164.0 11695619.0 0.5 -0.5 0
#U 15 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/15
1.0 -0.5 12.87460470199585 13 16 152954 159.0 11388541.0 1.0 -0.5 0
#U 16 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/16
1.0 -0.16670000000000001 13.473078966140747 13 17 152957 160.0 11455055.0 1.0 -0.16666666666666669 0
#U 17 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/17
1.0 0.16670000000000001 14.072843313217163 14 18 152960 160.0 11394404.0 1.0 0.16666666666666663 0
#U 18 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/18
1.0 0.5 14.665706634521484 15 19 152963 165.0 11773811.0 1.0 0.5 0
#U 19 simdet_image 6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/19
#C Sat Jun 15 13:19:07 2024.  resource {&#39;spec&#39;: &#39;AD_HDF5&#39;, &#39;root&#39;: &#39;/&#39;, &#39;resource_path&#39;: &#39;mnt/iockad/tmp/f23af069-cf36-4939-ac63_000000.h5&#39;, &#39;resource_kwargs&#39;: {&#39;frame_per_point&#39;: 3}, &#39;path_semantics&#39;: &#39;posix&#39;, &#39;uid&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;run_start&#39;: &#39;5d5d851f-d953-4926-adb2-68e2cf658890&#39;}
#C Sat Jun 15 13:19:07 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/0&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 0}}
#C Sat Jun 15 13:19:07 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/1&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 1}}
#C Sat Jun 15 13:19:08 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/2&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 2}}
#C Sat Jun 15 13:19:08 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/3&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 3}}
#C Sat Jun 15 13:19:09 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/4&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 4}}
#C Sat Jun 15 13:19:10 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/5&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 5}}
#C Sat Jun 15 13:19:10 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/6&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 6}}
#C Sat Jun 15 13:19:11 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/7&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 7}}
#C Sat Jun 15 13:19:12 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/8&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 8}}
#C Sat Jun 15 13:19:12 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/9&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 9}}
#C Sat Jun 15 13:19:13 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/10&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 10}}
#C Sat Jun 15 13:19:14 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/11&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 11}}
#C Sat Jun 15 13:19:14 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/12&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 12}}
#C Sat Jun 15 13:19:15 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/13&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 13}}
#C Sat Jun 15 13:19:16 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/14&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 14}}
#C Sat Jun 15 13:19:16 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/15&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 15}}
#C Sat Jun 15 13:19:17 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/16&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 16}}
#C Sat Jun 15 13:19:18 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/17&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 17}}
#C Sat Jun 15 13:19:18 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/18&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 18}}
#C Sat Jun 15 13:19:19 2024.  datum {&#39;resource&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180&#39;, &#39;datum_id&#39;: &#39;6b69e3a2-9d68-4ea7-beaa-8ea32f0c0180/19&#39;, &#39;datum_kwargs&#39;: {&#39;point_number&#39;: 19}}
#C Sat Jun 15 13:19:19 2024.  num_events_label_start_motor = 1
#C Sat Jun 15 13:19:19 2024.  num_events_primary = 20
#C Sat Jun 15 13:19:19 2024.  exit_status = success

</pre></div></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="bluesky_cheat_sheet.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Bluesky Cheat Sheet</p>
      </div>
    </a>
    <a class="right-next"
       href="_after_measurement.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Accessing data later, after the measurement</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Start-the-instrument-package">Start the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> package</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Setup-&amp;-connect-with-EPICS">Setup &amp; connect with EPICS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Diagnostics-(optional)">Diagnostics (optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Read-the-Stats-plugin-signals">Read the Stats plugin signals</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Take-image(s)-with-the-bp.count-plan">Take image(s) with the <code class="docutils literal notranslate"><span class="pre">bp.count</span></code> plan</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Visualize-the-collected-data">Visualize the collected data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#About-the-HDF5-image-file">About the HDF5 image file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#The-(1-D)-bp.scan()-plan-with-one-motor">The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with one motor</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#The-(1-D)-bp.scan()-plan-with-two-motors">The (1-D) <code class="docutils literal notranslate"><span class="pre">bp.scan()</span></code> plan with two motors</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Show-the-sequence-of-motor-positions">Show the sequence of motor positions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#The-(2-D)-bp.grid_scan()-(mesh)-plan">The (2-D) <code class="docutils literal notranslate"><span class="pre">bp.grid_scan()</span></code> (mesh) plan</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Show the sequence of motor positions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#SPEC-data-file">SPEC data file</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/howto/_ad_v_motors.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, APS BCDA.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>